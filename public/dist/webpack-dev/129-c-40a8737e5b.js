(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[129],{

/***/ "A5yp":
/*!***********************************************************!*\
  !*** ./ui/shared/outcomes/backbone/models/Outcome.coffee ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n */ \"HGxv\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _canvas_grade_summary_backbone_models_CalculationMethodContent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/grade-summary/backbone/models/CalculationMethodContent */ \"Oe3c\");\nvar I18n, Outcome,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\n\n\n\n\n\n\n\n\nI18n = Object(_canvas_i18n__WEBPACK_IMPORTED_MODULE_0__[\"useScope\"])('modelsOutcome');\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Outcome = (function(superClass) {\n  extend(Outcome, superClass);\n\n  function Outcome() {\n    return Outcome.__super__.constructor.apply(this, arguments);\n  }\n\n  Outcome.prototype.defaults = {\n    mastery_points: 3,\n    points_possible: 5,\n    ratings: [\n      {\n        description: I18n.t(\"criteria.exceeds_expectations\", \"Exceeds Expectations\"),\n        points: 5\n      }, {\n        description: I18n.t(\"criteria.meets_expectations\", \"Meets Expectations\"),\n        points: 3\n      }, {\n        description: I18n.t(\"criteria.does_not_meet_expectations\", \"Does Not Meet Expectations\"),\n        points: 0\n      }\n    ]\n  };\n\n  Outcome.prototype.setMasteryScales = function() {\n    var ratings;\n    ratings = ENV.MASTERY_SCALE.outcome_proficiency.ratings;\n    return this.set({\n      ratings: ratings,\n      mastery_points: underscore__WEBPACK_IMPORTED_MODULE_1___default.a.find(ratings, (function(_this) {\n        return function(r) {\n          return r.mastery;\n        };\n      })(this)).points,\n      points_possible: Math.max.apply(Math, underscore__WEBPACK_IMPORTED_MODULE_1___default.a.map(ratings, function(r) {\n        return r.points;\n      }))\n    });\n  };\n\n  Outcome.prototype.defaultCalculationInt = function() {\n    return {\n      n_mastery: 5,\n      decaying_average: 65\n    }[this.get('calculation_method')];\n  };\n\n  Outcome.prototype.initialize = function() {\n    var ref;\n    if (!this.get('calculation_method')) {\n      this.setDefaultCalcSettings();\n    }\n    if (ENV.ACCOUNT_LEVEL_MASTERY_SCALES && ((ref = ENV.MASTERY_SCALE) != null ? ref.outcome_proficiency : void 0)) {\n      this.setMasteryScales();\n    }\n    this.on('change:calculation_method', (function(_this) {\n      return function(model, changedTo) {\n        return model.set({\n          calculation_int: _this.defaultCalculationInt()\n        });\n      };\n    })(this));\n    return Outcome.__super__.initialize.apply(this, arguments);\n  };\n\n  Outcome.prototype.setDefaultCalcSettings = function() {\n    return this.set({\n      calculation_method: 'decaying_average',\n      calculation_int: '65'\n    });\n  };\n\n  Outcome.prototype.calculationMethodContent = function() {\n    return new _canvas_grade_summary_backbone_models_CalculationMethodContent__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this);\n  };\n\n  Outcome.prototype.calculationMethods = function() {\n    return this.calculationMethodContent().toJSON();\n  };\n\n  Outcome.prototype.name = function() {\n    return this.get('title');\n  };\n\n  Outcome.prototype.canManage = function() {\n    return this.get('can_edit') || this.canManageInContext();\n  };\n\n  Outcome.prototype.canManageInContext = function() {\n    var ref, ref1, ref2;\n    return ((ref = ENV.ROOT_OUTCOME_GROUP) != null ? ref.context_type : void 0) === \"Course\" && ((ref1 = ENV.PERMISSIONS) != null ? ref1.manage_outcomes : void 0) && ((ref2 = ENV.current_user_roles) != null ? ref2.includes('admin') : void 0);\n  };\n\n  Outcome.prototype.isNative = function() {\n    return this.outcomeLink && (this.get('context_id') === this.outcomeLink.context_id && this.get('context_type') === this.outcomeLink.context_type);\n  };\n\n  Outcome.prototype.isAbbreviated = function() {\n    return !this.has('description');\n  };\n\n  Outcome.prototype.parse = function(resp) {\n    if (resp.outcome) {\n      this.outcomeLink = resp;\n      this.outcomeGroup = resp.outcome_group;\n      return resp.outcome;\n    } else {\n      return resp;\n    }\n  };\n\n  Outcome.prototype.present = function() {\n    return underscore__WEBPACK_IMPORTED_MODULE_1___default.a.extend({}, this.toJSON(), this.calculationMethodContent().present());\n  };\n\n  Outcome.prototype.setUrlTo = function(action) {\n    return this.url = (function() {\n      switch (action) {\n        case 'add':\n          return this.outcomeGroup.outcomes_url;\n        case 'edit':\n          return this.get('url');\n        case 'delete':\n          return this.outcomeLink.url;\n      }\n    }).call(this);\n  };\n\n  Outcome.prototype.save = function(data, saveOpts) {\n    if (ENV.ACCOUNT_LEVEL_MASTERY_SCALES) {\n      this.unset('mastery_points');\n      this.unset('points_possible');\n      this.unset('ratings');\n      this.unset('calculation_method');\n      this.unset('calculation_int');\n    }\n    return Outcome.__super__.save.apply(this, arguments);\n  };\n\n  return Outcome;\n\n})(_canvas_backbone__WEBPACK_IMPORTED_MODULE_2___default.a.Model));\n\n\n//# sourceURL=webpack:///./ui/shared/outcomes/backbone/models/Outcome.coffee?");

/***/ }),

/***/ "Oe3c":
/*!*****************************************************************************!*\
  !*** ./ui/shared/grade-summary/backbone/models/CalculationMethodContent.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CalculationMethodContent; });\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _canvas_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/i18n */ \"HGxv\");\n/* harmony import */ var _canvas_i18n_numberFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/i18n/numberFormat */ \"hnvJ\");\n// Copyright (C) 2015 - present Instructure, Inc.\n// This file is part of Canvas.\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\nconst I18n = Object(_canvas_i18n__WEBPACK_IMPORTED_MODULE_1__[\"useScope\"])('CalculationMethodContent');\n\nunderscore__WEBPACK_IMPORTED_MODULE_0___default.a.mixin({\n  sum(array, accessor = null, start = 0) {\n    return underscore__WEBPACK_IMPORTED_MODULE_0___default.a.reduce(array, (memo, el) => (accessor != null ? accessor(el) : el) + memo, start);\n  }\n\n});\n\nclass DecayingAverage {\n  constructor(weight, range) {\n    this.weight = weight;\n    this.range = range;\n    this.rest = this.range.slice(0, +-2 + 1 || undefined);\n    this.last = underscore__WEBPACK_IMPORTED_MODULE_0___default.a.last(this.range);\n  }\n\n  value() {\n    const n = underscore__WEBPACK_IMPORTED_MODULE_0___default.a.sum(this.rest) / this.rest.length * this.toPercentage(this.remainder()) + this.last * this.toPercentage(this.weight);\n    return Math.round(n * 100) / 100;\n  }\n\n  remainder() {\n    return 100 - this.weight;\n  }\n\n  toPercentage(n) {\n    return n / 100;\n  }\n\n}\n\nclass NMastery {\n  constructor(n, mastery_points, range) {\n    this.n = n;\n    this.mastery_points = mastery_points;\n    this.range = range;\n  }\n\n  aboveMastery() {\n    return underscore__WEBPACK_IMPORTED_MODULE_0___default.a.filter(this.range, n => n >= this.mastery_points);\n  }\n\n  value() {\n    if (this.mastery_points != null && this.aboveMastery().length >= this.n) {\n      return Math.round(underscore__WEBPACK_IMPORTED_MODULE_0___default.a.sum(this.aboveMastery()) / this.aboveMastery().length * 100) / 100;\n    } else {\n      return I18n.t('N/A');\n    }\n  }\n\n}\n\nclass Average {\n  constructor(range) {\n    this.range = range;\n  }\n\n  value() {\n    if (this.range.length > 0) {\n      return Math.round(underscore__WEBPACK_IMPORTED_MODULE_0___default.a.sum(this.range) / this.range.length * 100) / 100;\n    } else {\n      return I18n.t('N/A');\n    }\n  }\n\n}\n\nclass CalculationMethodContent {\n  constructor(model) {\n    // We can pass in a straight object or a backbone model\n    underscore__WEBPACK_IMPORTED_MODULE_0___default.a.each(['calculation_method', 'calculation_int', 'mastery_points', 'is_individual_outcome'], attr => this[attr] = model.get != null ? model.get(attr) : model[attr]);\n  }\n\n  decayingAverage() {\n    return new DecayingAverage(this.calculation_int, this.exampleScoreIntegers()).value();\n  }\n\n  exampleScoreIntegers() {\n    return [1, 4, 2, 3, 5, 3, 6, 1, 4, 2, 3, 5, 3, 6];\n  }\n\n  nMastery() {\n    return new NMastery(this.calculation_int, this.mastery_points, this.exampleScoreIntegers()).value();\n  }\n\n  average(range) {\n    return new Average(range).value();\n  }\n\n  present() {\n    return this.toJSON()[this.calculation_method];\n  }\n\n  toJSON() {\n    const alternativeCalculationValues = this.is_individual_outcome ? {\n      decaying_average: {\n        method: I18n.t('Decaying Average - %{recentInt}%/%{remainderInt}%', {\n          recentInt: this.calculation_int,\n          remainderInt: 100 - this.calculation_int\n        }),\n        calculationIntLabel: I18n.t('% weighting for last item'),\n        calculationIntDescription: I18n.t('must be between 1 and 99')\n      },\n      n_mastery: {\n        calculationIntLabel: I18n.t('# of times'),\n        calculationIntDescription: I18n.t('must be between 1 and 10')\n      },\n      latest: {\n        method: I18n.t('Most Recent Score')\n      },\n      highest: {\n        exampleScores: this.exampleScoreIntegers().join(', '),\n        exampleResult: _canvas_i18n_numberFormat__WEBPACK_IMPORTED_MODULE_2__[\"default\"].outcomeScore(underscore__WEBPACK_IMPORTED_MODULE_0___default.a.max(this.exampleScoreIntegers()))\n      },\n      average: {\n        method: I18n.t('Average')\n      }\n    } : {\n      decaying_average: {\n        method: I18n.t('%{recentInt}/%{remainderInt} Decaying Average', {\n          recentInt: this.calculation_int,\n          remainderInt: 100 - this.calculation_int\n        }),\n        calculationIntLabel: I18n.t('Last Item: '),\n        calculationIntDescription: I18n.t('Between 1% and 99%')\n      },\n      n_mastery: {\n        calculationIntLabel: I18n.t('Items: '),\n        calculationIntDescription: I18n.t('Between 1 and 10')\n      },\n      latest: {\n        method: I18n.t('Latest Score')\n      },\n      highest: {\n        exampleScores: this.exampleScoreIntegers().slice(0, 4).join(', '),\n        exampleResult: _canvas_i18n_numberFormat__WEBPACK_IMPORTED_MODULE_2__[\"default\"].outcomeScore(underscore__WEBPACK_IMPORTED_MODULE_0___default.a.max(this.exampleScoreIntegers().slice(0, 4)))\n      },\n      average: {\n        method: I18n.t('Average')\n      }\n    };\n    return {\n      decaying_average: {\n        method: alternativeCalculationValues.decaying_average.method,\n        friendlyCalculationMethod: I18n.t('Decaying Average'),\n        calculationIntLabel: alternativeCalculationValues.decaying_average.calculationIntLabel,\n        calculationIntDescription: alternativeCalculationValues.decaying_average.calculationIntDescription,\n        exampleText: I18n.t('Most recent result counts as %{calculation_int} of mastery weight, average of all other results count as %{remainder} of weight. If there is only one result, the single score will be returned.', {\n          calculation_int: I18n.n(this.calculation_int, {\n            percentage: true\n          }),\n          remainder: I18n.n(100 - this.calculation_int, {\n            percentage: true\n          })\n        }),\n        exampleScores: this.exampleScoreIntegers().join(', '),\n        exampleResult: _canvas_i18n_numberFormat__WEBPACK_IMPORTED_MODULE_2__[\"default\"].outcomeScore(this.decayingAverage()),\n        defaultInt: 65,\n        validRange: [1, 99]\n      },\n      n_mastery: {\n        method: I18n.t({\n          one: 'Achieve mastery one time',\n          other: 'Achieve mastery %{count} times'\n        }, {\n          count: this.calculation_int\n        }),\n        friendlyCalculationMethod: I18n.t('n Number of Times'),\n        calculationIntLabel: alternativeCalculationValues.n_mastery.calculationIntLabel,\n        calculationIntDescription: alternativeCalculationValues.n_mastery.calculationIntDescription,\n        exampleText: I18n.t({\n          one: 'Must achieve mastery at least one time. Scores above mastery will be averaged to calculate final score.',\n          other: 'Must achieve mastery at least %{count} times. Scores above mastery will be averaged to calculate final score.'\n        }, {\n          count: this.calculation_int\n        }),\n        exampleScores: this.exampleScoreIntegers().join(', '),\n        exampleResult: _canvas_i18n_numberFormat__WEBPACK_IMPORTED_MODULE_2__[\"default\"].outcomeScore(this.nMastery()),\n        defaultInt: 5,\n        validRange: [1, 10]\n      },\n      latest: {\n        method: alternativeCalculationValues.latest.method,\n        friendlyCalculationMethod: I18n.t('Most Recent Score'),\n        exampleText: I18n.t('Mastery score reflects the most recent graded assignment or quiz.'),\n        exampleScores: this.exampleScoreIntegers().slice(0, 4).join(', '),\n        exampleResult: _canvas_i18n_numberFormat__WEBPACK_IMPORTED_MODULE_2__[\"default\"].outcomeScore(underscore__WEBPACK_IMPORTED_MODULE_0___default.a.last(this.exampleScoreIntegers().slice(0, 4)))\n      },\n      highest: {\n        method: I18n.t('Highest Score'),\n        friendlyCalculationMethod: I18n.t('Highest Score'),\n        exampleText: I18n.t('Mastery score reflects the highest score of a graded assignment or quiz.'),\n        exampleScores: alternativeCalculationValues.highest.exampleScores,\n        exampleResult: alternativeCalculationValues.highest.exampleResult\n      },\n      average: {\n        method: alternativeCalculationValues.average.method,\n        friendlyCalculationMethod: I18n.t('Average'),\n        exampleText: I18n.t('Central value in a set of results. Calculated by dividing the sum of all item scores by the number of scores.'),\n        exampleScores: this.exampleScoreIntegers().slice(0, 7).join(', '),\n        exampleResult: _canvas_i18n_numberFormat__WEBPACK_IMPORTED_MODULE_2__[\"default\"].outcomeScore(this.average(this.exampleScoreIntegers().slice(0, 7)))\n      }\n    };\n  }\n\n}\n\n//# sourceURL=webpack:///./ui/shared/grade-summary/backbone/models/CalculationMethodContent.js?");

/***/ })

}]);