(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[3749],{

/***/ "UKxr":
/*!***************************************************************************!*\
  !*** ./ui/features/assignments_show_student/images/PhotographerPanda.svg ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"e02005c18455e6aa555c26d3a007b474.svg\";\n\n//# sourceURL=webpack:///./ui/features/assignments_show_student/images/PhotographerPanda.svg?");

/***/ }),

/***/ "hmuw":
/*!********************************************************************!*\
  !*** ./ui/features/assignments_show_student/images/UploadFile.svg ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"385ff3b0e7660fad56751f2a4b3c70e4.svg\";\n\n//# sourceURL=webpack:///./ui/features/assignments_show_student/images/UploadFile.svg?");

/***/ }),

/***/ "iQHB":
/*!*******************************************************************************************!*\
  !*** ./ui/features/assignments_show_student/react/components/AttemptType/MediaAttempt.js ***!
  \*******************************************************************************************/
/*! exports provided: VIDEO_SIZE_OPTIONS, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VIDEO_SIZE_OPTIONS\", function() { return VIDEO_SIZE_OPTIONS; });\n/* harmony import */ var _canvas_alerts_react_AlertManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/alerts/react/AlertManager */ \"5ynn\");\n/* harmony import */ var _media_player_iframe_content_react_CanvasMediaPlayer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../media_player_iframe_content/react/CanvasMediaPlayer */ \"jofb\");\n/* harmony import */ var _canvas_assignments_graphql_student_Assignment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/assignments/graphql/student/Assignment */ \"yXnT\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _canvas_util_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/util/closedCaptionLanguages */ \"stQK\");\n/* harmony import */ var _helpers_elideString__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../helpers/elideString */ \"pUPW\");\n/* harmony import */ var _helpers_SubmissionHelpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../helpers/SubmissionHelpers */ \"RPsh\");\n/* harmony import */ var _canvas_i18n__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @canvas/i18n */ \"HGxv\");\n/* harmony import */ var _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @instructure/ui-icons */ \"oMAr\");\n/* harmony import */ var _instructure_ui_img__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @instructure/ui-img */ \"ad5e\");\n/* harmony import */ var _canvas_loading_indicator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @canvas/loading-indicator */ \"7hyl\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @instructure/ui-a11y-content */ \"9+/z\");\n/* harmony import */ var _canvas_assignments_graphql_student_Submission__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @canvas/assignments/graphql/student/Submission */ \"uqZB\");\n/* harmony import */ var _Context__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../Context */ \"N28T\");\n/* harmony import */ var _images_PhotographerPanda_svg__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../images/PhotographerPanda.svg */ \"UKxr\");\n/* harmony import */ var _images_PhotographerPanda_svg__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_images_PhotographerPanda_svg__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _images_UploadFile_svg__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../images/UploadFile.svg */ \"hmuw\");\n/* harmony import */ var _images_UploadFile_svg__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_images_UploadFile_svg__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var _instructure_canvas_media__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @instructure/canvas-media */ \"JobW\");\n/* harmony import */ var _helpers_UploadMediaTranslations__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../helpers/UploadMediaTranslations */ \"2tQE\");\n/* harmony import */ var with_breakpoints__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! with-breakpoints */ \"JGuX\");\n/* harmony import */ var _instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @instructure/ui-buttons */ \"K6WN\");\n/* harmony import */ var _instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @instructure/ui-flex */ \"N46v\");\n/* harmony import */ var _instructure_ui_media_player__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @instructure/ui-media-player */ \"4UDy\");\n/* harmony import */ var _instructure_canvas_theme__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @instructure/canvas-theme */ \"7np9\");\n/* harmony import */ var _instructure_ui_view__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @instructure/ui-view */ \"OkHH\");\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst I18n = Object(_canvas_i18n__WEBPACK_IMPORTED_MODULE_7__[\"useScope\"])('assignments_2_media_attempt');\nconst languages = Object.keys(_canvas_util_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_4__[\"default\"]).map(key => {\n  return {\n    id: key,\n    label: _canvas_util_closedCaptionLanguages__WEBPACK_IMPORTED_MODULE_4__[\"default\"][key]\n  };\n});\nconst VIDEO_SIZE_OPTIONS = {\n  height: '400px',\n  width: '768px'\n};\n\nclass MediaAttempt extends react__WEBPACK_IMPORTED_MODULE_11___default.a.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      mediaModalOpen: false,\n      iframeURL: '',\n      mediaModalTabs: {\n        record: false,\n        upload: false\n      }\n    };\n\n    this.onComplete = (err, data) => {\n      if (err) {\n        this.context.setOnFailure(I18n.t('There was an error submitting your attempt.'));\n      } else {\n        this.props.updateUploadingFiles(true);\n\n        if (data.mediaObject.embedded_iframe_url) {\n          this.setState({\n            iframeURL: data.mediaObject.embedded_iframe_url\n          });\n        }\n\n        this.props.createSubmissionDraft({\n          variables: {\n            id: this.props.submission.id,\n            activeSubmissionType: 'media_recording',\n            attempt: this.props.submission.attempt || 1,\n            mediaId: data.mediaObject.media_object.media_id\n          }\n        });\n      }\n    };\n\n    this.onDismiss = () => {\n      this.setState({\n        mediaModalOpen: false\n      });\n    };\n\n    this.handleRemoveFile = () => {\n      this.props.updateUploadingFiles(true);\n      this.props.createSubmissionDraft({\n        variables: {\n          id: this.props.submission.id,\n          activeSubmissionType: 'media_recording',\n          attempt: this.props.submission.attempt || 1\n        }\n      });\n      this.setState({\n        iframeURL: ''\n      });\n    };\n\n    this.renderMediaPlayer = (mediaObject, renderTrashIcon) => {\n      if (!mediaObject) {\n        return null;\n      }\n\n      mediaObject.mediaSources.forEach(mediaSource => {\n        mediaSource.label = `${mediaSource.width}x${mediaSource.height}`;\n      });\n      const mediaTracks = mediaObject.mediaTracks.map(track => ({\n        src: `/media_objects/${mediaObject._id}/media_tracks/${track._id}`,\n        label: track.locale,\n        type: track.kind,\n        language: track.locale\n      }));\n      const shouldRenderWithIframeURL = mediaObject.mediaSources.length === 0 && this.state.iframeURL;\n      const autoCCTrack = Object(_media_player_iframe_content_react_CanvasMediaPlayer__WEBPACK_IMPORTED_MODULE_1__[\"getAutoTrack\"])(mediaObject.mediaTracks);\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__[\"Flex\"], {\n        direction: \"column\",\n        alignItems: \"center\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__[\"Flex\"].Item, {\n        \"data-testid\": \"media-recording\",\n        width: \"100%\"\n      }, shouldRenderWithIframeURL ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(\"div\", {\n        style: {\n          position: 'relative',\n          width: '100%',\n          height: '0',\n          paddingBottom: '56.25%' // 16:9 aspect ratio\n\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(\"iframe\", {\n        src: this.state.iframeURL,\n        title: \"preview\",\n        style: {\n          position: 'absolute',\n          border: 'none',\n          minWidth: '100%',\n          minHeight: '100%'\n        }\n      })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_media_player__WEBPACK_IMPORTED_MODULE_22__[\"MediaPlayer\"], {\n        tracks: mediaTracks,\n        sources: mediaObject.mediaSources,\n        captionPosition: \"bottom\",\n        autoShowCaption: autoCCTrack\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__[\"Flex\"].Item, {\n        overflowY: \"visible\",\n        margin: \"medium 0\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(\"span\", {\n        \"aria-hidden\": true,\n        title: mediaObject.title\n      }, Object(_helpers_elideString__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(mediaObject.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_12__[\"ScreenReaderContent\"], null, mediaObject.title), renderTrashIcon && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_20__[\"Button\"], {\n        \"data-testid\": \"remove-media-recording\",\n        renderIcon: _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_8__[\"IconTrashLine\"],\n        id: mediaObject.id,\n        margin: \"0 0 0 x-small\",\n        onClick: this.handleRemoveFile,\n        size: \"small\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_12__[\"ScreenReaderContent\"], null, I18n.t('Remove %{filename}', {\n        filename: mediaObject.title\n      })))));\n    };\n\n    this.renderSubmissionDraft = () => {\n      const mediaObject = this.props.submission.submissionDraft.mediaObject;\n      return this.renderMediaPlayer(mediaObject, true);\n    };\n\n    this.renderSubmission = () => {\n      const mediaObject = this.props.submission.mediaObject;\n      return this.renderMediaPlayer(mediaObject, false);\n    };\n\n    this.renderMediaUpload = () => {\n      const {\n        desktop\n      } = this.props.breakpoints;\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_11___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_canvas_media__WEBPACK_IMPORTED_MODULE_17__[\"default\"], {\n        onUploadComplete: this.onComplete,\n        onDismiss: this.onDismiss,\n        rcsConfig: {\n          contextId: this.props.assignment.env.courseId,\n          contextType: 'course'\n        },\n        open: this.state.mediaModalOpen,\n        tabs: this.state.mediaModalTabs,\n        uploadMediaTranslations: {\n          UploadMediaStrings: _helpers_UploadMediaTranslations__WEBPACK_IMPORTED_MODULE_18__[\"UploadMediaStrings\"],\n          MediaCaptureStrings: _helpers_UploadMediaTranslations__WEBPACK_IMPORTED_MODULE_18__[\"MediaCaptureStrings\"],\n          SelectStrings: _helpers_UploadMediaTranslations__WEBPACK_IMPORTED_MODULE_18__[\"SelectStrings\"]\n        },\n        liveRegion: () => document.getElementById('flash_screenreader_holder'),\n        languages: languages\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_Context__WEBPACK_IMPORTED_MODULE_14__[\"default\"].Consumer, null, context => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__[\"Flex\"], {\n        alignItems: \"center\",\n        justifyItems: \"center\",\n        direction: desktop ? 'row' : 'column'\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__[\"Flex\"].Item, {\n        margin: \"small\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_view__WEBPACK_IMPORTED_MODULE_24__[\"View\"], {\n        as: \"div\",\n        height: \"350px\",\n        width: \"400px\",\n        borderRadius: \"large\",\n        background: \"primary\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__[\"Flex\"], {\n        direction: \"column\",\n        alignItems: \"center\",\n        justifyItems: \"space-around\",\n        height: \"100%\",\n        shouldShrink: true\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__[\"Flex\"].Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_img__WEBPACK_IMPORTED_MODULE_9__[\"Img\"], {\n        src: _images_PhotographerPanda_svg__WEBPACK_IMPORTED_MODULE_15___default.a,\n        alt: I18n.t('panda taking photograph'),\n        height: \"180px\"\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__[\"Flex\"].Item, {\n        overflowY: \"visible\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_20__[\"Button\"], {\n        \"data-testid\": \"open-record-media-modal-button\",\n        disabled: !context.allowChangesToSubmission,\n        renderIcon: _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_8__[\"IconAttachMediaSolid\"],\n        color: \"primary\",\n        elementRef: el => {\n          this._mediaUploadRef = el;\n        },\n        onClick: () => this.setState({\n          mediaModalTabs: {\n            record: true,\n            upload: false\n          },\n          mediaModalOpen: true\n        })\n      }, I18n.t('Record Media')))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__[\"Flex\"].Item, {\n        margin: \"medium\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__[\"Flex\"], {\n        direction: desktop ? 'column' : 'row',\n        justifyItems: \"space-between\",\n        alignItems: \"center\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__[\"Flex\"].Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(\"div\", {\n        style: {\n          backgroundColor: _instructure_canvas_theme__WEBPACK_IMPORTED_MODULE_23__[\"default\"].variables.colors.backgroundDark,\n          height: desktop ? '9em' : '1px',\n          width: desktop ? '1px' : '9em'\n        }\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__[\"Flex\"].Item, {\n        color: \"darkgrey\",\n        margin: \"small\"\n      }, I18n.t('or')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__[\"Flex\"].Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(\"div\", {\n        style: {\n          backgroundColor: _instructure_canvas_theme__WEBPACK_IMPORTED_MODULE_23__[\"default\"].variables.colors.backgroundDark,\n          height: desktop ? '9em' : '1px',\n          width: desktop ? '1px' : '9em'\n        }\n      })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__[\"Flex\"].Item, {\n        margin: \"medium\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_view__WEBPACK_IMPORTED_MODULE_24__[\"View\"], {\n        as: \"div\",\n        height: \"350px\",\n        width: \"400px\",\n        borderRadius: \"large\",\n        background: \"primary\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__[\"Flex\"], {\n        direction: \"column\",\n        alignItems: \"center\",\n        justifyItems: \"space-around\",\n        height: \"100%\",\n        shouldShrink: true\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__[\"Flex\"].Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_img__WEBPACK_IMPORTED_MODULE_9__[\"Img\"], {\n        src: _images_UploadFile_svg__WEBPACK_IMPORTED_MODULE_16___default.a,\n        alt: I18n.t('rocketship on launchpad'),\n        height: \"180px\"\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_21__[\"Flex\"].Item, {\n        overflowY: \"visible\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_20__[\"Button\"], {\n        \"data-testid\": \"open-upload-media-modal-button\",\n        disabled: !context.allowChangesToSubmission,\n        renderIcon: _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_8__[\"IconUploadLine\"],\n        color: \"primary\",\n        onClick: () => this.setState({\n          mediaModalTabs: {\n            record: false,\n            upload: true\n          },\n          mediaModalOpen: true\n        })\n      }, I18n.t('Upload Media')))))))));\n    };\n  }\n\n  componentDidMount() {\n    var _this$props$submissio, _this$props$submissio2;\n\n    if (this.props.focusOnInit && !this.props.uploadingFiles && !Object(_helpers_SubmissionHelpers__WEBPACK_IMPORTED_MODULE_6__[\"isSubmitted\"])(this.props.submission) && !((_this$props$submissio = this.props.submission.submissionDraft) !== null && _this$props$submissio !== void 0 && (_this$props$submissio2 = _this$props$submissio.mediaObject) !== null && _this$props$submissio2 !== void 0 && _this$props$submissio2._id)) {\n      this._mediaUploadRef.focus();\n    }\n  }\n\n  render() {\n    var _this$props$submissio3, _this$props$submissio4;\n\n    if (this.props.uploadingFiles) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(_canvas_loading_indicator__WEBPACK_IMPORTED_MODULE_10__[\"default\"], null);\n    }\n\n    if (Object(_helpers_SubmissionHelpers__WEBPACK_IMPORTED_MODULE_6__[\"isSubmitted\"])(this.props.submission)) {\n      return this.renderSubmission();\n    }\n\n    if ((_this$props$submissio3 = this.props.submission.submissionDraft) !== null && _this$props$submissio3 !== void 0 && (_this$props$submissio4 = _this$props$submissio3.mediaObject) !== null && _this$props$submissio4 !== void 0 && _this$props$submissio4._id) {\n      return this.renderSubmissionDraft();\n    }\n\n    return this.renderMediaUpload();\n  }\n\n}\n\nMediaAttempt.propTypes = {\n  assignment: _canvas_assignments_graphql_student_Assignment__WEBPACK_IMPORTED_MODULE_2__[\"Assignment\"].shape.isRequired,\n  breakpoints: with_breakpoints__WEBPACK_IMPORTED_MODULE_19__[\"breakpointsShape\"],\n  createSubmissionDraft: prop_types__WEBPACK_IMPORTED_MODULE_3__[\"func\"].isRequired,\n  focusOnInit: prop_types__WEBPACK_IMPORTED_MODULE_3__[\"bool\"].isRequired,\n  submission: _canvas_assignments_graphql_student_Submission__WEBPACK_IMPORTED_MODULE_13__[\"Submission\"].shape.isRequired,\n  updateUploadingFiles: prop_types__WEBPACK_IMPORTED_MODULE_3__[\"func\"].isRequired,\n  uploadingFiles: prop_types__WEBPACK_IMPORTED_MODULE_3__[\"bool\"].isRequired\n};\nMediaAttempt.contextType = _canvas_alerts_react_AlertManager__WEBPACK_IMPORTED_MODULE_0__[\"AlertManagerContext\"];\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(with_breakpoints__WEBPACK_IMPORTED_MODULE_19__[\"default\"])(MediaAttempt));\n\n//# sourceURL=webpack:///./ui/features/assignments_show_student/react/components/AttemptType/MediaAttempt.js?");

/***/ }),

/***/ "jofb":
/*!****************************************************************************!*\
  !*** ./ui/features/media_player_iframe_content/react/CanvasMediaPlayer.js ***!
  \****************************************************************************/
/*! exports provided: getAutoTrack, default, setPlayerSize */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getAutoTrack\", function() { return getAutoTrack; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CanvasMediaPlayer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setPlayerSize\", function() { return setPlayerSize; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _canvas_i18n__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/i18n */ \"HGxv\");\n/* harmony import */ var _instructure_canvas_media__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @instructure/canvas-media */ \"JobW\");\n/* harmony import */ var _instructure_ui_media_player__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @instructure/ui-media-player */ \"4UDy\");\n/* harmony import */ var _instructure_ui_alerts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @instructure/ui-alerts */ \"spba\");\n/* harmony import */ var _instructure_ui_flex__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @instructure/ui-flex */ \"N46v\");\n/* harmony import */ var _instructure_ui_spinner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @instructure/ui-spinner */ \"cPO5\");\n/* harmony import */ var _instructure_js_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @instructure/js-utils */ \"1b+i\");\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\nconst I18n = Object(_canvas_i18n__WEBPACK_IMPORTED_MODULE_2__[\"useScope\"])('CanvasMediaPlayer');\n\nconst byBitrate = (a, b) => parseInt(a.bitrate, 10) - parseInt(b.bitrate, 10);\n\nconst liveRegion = () => window.top.document.getElementById('flash_screenreader_holder'); // It can take a while for notorious to process a newly uploaded video\n// Each attempt to get the media_sources is 2**n seconds after the previous attempt\n// so we'll keep at it for about an hour (2**(MAX_RETRY_ATTEMPTS+1)/60 minutes) as long as there's no network error.\n\n\nconst DEFAULT_MAX_RETRY_ATTEMPTS = 11;\nconst DEFAULT_SHOW_BE_PATIENT_MSG_AFTER_ATTEMPTS = 3;\nfunction getAutoTrack(tracks) {\n  var _auto_track;\n\n  if (!ENV.auto_show_cc) return undefined;\n  if (!tracks) return undefined;\n  let locale = ENV.locale || document.documentElement.getAttribute('lang') || 'en'; // look for an exact match\n\n  let auto_track = tracks.find(t => t.locale === locale);\n\n  if (!auto_track) {\n    // look for an exact match to the de-regionalized user locale\n    locale = locale.replace(/-.*/, '');\n    auto_track = tracks.find(t => t.locale === locale);\n\n    if (!auto_track) {\n      // look for any match to de-regionalized tracks\n      auto_track = tracks.find(t => t.locale.replace(/-.*/, '') === locale);\n    }\n  }\n\n  return (_auto_track = auto_track) === null || _auto_track === void 0 ? void 0 : _auto_track.locale;\n}\nfunction CanvasMediaPlayer(props) {\n  const sorted_sources = Array.isArray(props.media_sources) ? props.media_sources.sort(byBitrate) : props.media_sources;\n  const tracks = Array.isArray(props.media_tracks) ? props.media_tracks.map(t => ({\n    locale: t.language,\n    language: t.label\n  })) : null;\n  const [media_sources, setMedia_sources] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(sorted_sources);\n  const [media_tracks] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(tracks);\n  const [retryAttempt, setRetryAttempt] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(0);\n  const [mediaObjNetworkErr, setMediaObjNetworkErr] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null); // the ability to set these makes testing easier\n  // hint: set these values in a conditional breakpoint in\n  // media_player_iframe_content.js where the CanvasMediaPlayer is rendered\n  // for example:\n  // ENV.SHOW_MEDIA_SOURCE_BE_PATIENT_MSG_AFTER_ATTEMPTS=2, ENV.MAX_MEDIA_SOURCE_RETRY_ATTEMPTS=4, 0\n\n  const [MAX_RETRY_ATTEMPTS] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(ENV.MAX_MEDIA_SOURCE_RETRY_ATTEMPTS || props.MAX_RETRY_ATTEMPTS);\n  const [SHOW_BE_PATIENT_MSG_AFTER_ATTEMPTS] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(ENV.SHOW_MEDIA_SOURCE_BE_PATIENT_MSG_AFTER_ATTEMPTS || props.SHOW_BE_PATIENT_MSG_AFTER_ATTEMPTS);\n  const [auto_cc_track] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(getAutoTrack(tracks));\n  const containerRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  const mediaPlayerRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n\n  function boundingBox() {\n    var _window$frameElement;\n\n    if (document.fullscreenElement || document.webkitFullscreenElement) {\n      return {\n        width: window.innerWidth,\n        height: window.innerHeight\n      };\n    } else if (((_window$frameElement = window.frameElement) === null || _window$frameElement === void 0 ? void 0 : _window$frameElement.tagName) === 'IFRAME' || !containerRef.current) {\n      return {\n        width: window.innerWidth,\n        height: window.innerHeight\n      };\n    } else {\n      // media_player_iframe_content.js includes a 16px top/bottom margin\n      return {\n        width: containerRef.current.clientWidth,\n        height: Math.min(containerRef.current.clientHeight, window.innerHeight - 32)\n      };\n    }\n  }\n\n  const handleLoadedMetadata = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(event => {\n    const player = event.target;\n    const playerParent = containerRef.current ? containerRef.current.parentElement : window.frameElement;\n    setPlayerSize(player, props.type, boundingBox(), window.frameElement || playerParent);\n  }, [props.type]);\n  const handlePlayerSize = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(_event => {\n    const player = window.document.body.querySelector('video');\n    setPlayerSize(player, props.type, boundingBox(), null);\n  }, [props.type]);\n  const fetchSources = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(async function () {\n    var _resp, _resp$media_sources;\n\n    const url = `/media_objects/${props.media_id}/info`;\n    let resp;\n\n    try {\n      setMediaObjNetworkErr(null);\n      resp = await Object(_instructure_js_utils__WEBPACK_IMPORTED_MODULE_8__[\"asJson\"])(fetch(url, _instructure_js_utils__WEBPACK_IMPORTED_MODULE_8__[\"defaultFetchOptions\"]));\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.warn(`Error getting ${url}`, e.message);\n      setMediaObjNetworkErr(e);\n      return;\n    }\n\n    if ((_resp = resp) !== null && _resp !== void 0 && (_resp$media_sources = _resp.media_sources) !== null && _resp$media_sources !== void 0 && _resp$media_sources.length) {\n      setMedia_sources(resp.media_sources.sort(byBitrate));\n    } else {\n      setRetryAttempt(retryAttempt + 1);\n    }\n  }, [props.media_id, retryAttempt]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    // if we just uploaded the media, notorious may still be processing it\n    // and we don't have its media_sources yet\n    let retryTimerId = 0;\n\n    if (!media_sources.length && retryAttempt <= MAX_RETRY_ATTEMPTS) {\n      retryTimerId = setTimeout(() => {\n        fetchSources();\n      }, 2 ** retryAttempt * 1000);\n    }\n\n    return () => {\n      clearTimeout(retryTimerId);\n    };\n  }, [retryAttempt, media_sources, MAX_RETRY_ATTEMPTS, fetchSources]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    // what I wanted to do was listen for fullscreenchange on the MediaPlayer's div,\n    // but it doesn't have it's new size at the time the event is fired. It also\n    // doesn't get a resize event when transitioning to/from fullscreen.\n    window.addEventListener('resize', handlePlayerSize);\n    return () => {\n      window.removeEventListener('resize', handlePlayerSize);\n    };\n  }, [handlePlayerSize]);\n  const includeFullscreen = (document.fullscreenEnabled || document.webkitFullscreenEnabled) && props.type === 'video';\n\n  function renderNoPlayer() {\n    if (mediaObjNetworkErr) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_alerts__WEBPACK_IMPORTED_MODULE_5__[\"Alert\"], {\n        key: \"erralert\",\n        variant: \"error\",\n        margin: \"small\",\n        liveRegion: liveRegion\n      }, I18n.t('Failed retrieving media sources.'));\n    }\n\n    if (retryAttempt >= MAX_RETRY_ATTEMPTS) {\n      // this should be very rare\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_alerts__WEBPACK_IMPORTED_MODULE_5__[\"Alert\"], {\n        key: \"giveupalert\",\n        variant: \"info\",\n        margin: \"x-small\",\n        liveRegion: liveRegion\n      }, I18n.t('Giving up on retrieving media sources. This issue will probably resolve itself eventually.'));\n    }\n\n    if (retryAttempt >= SHOW_BE_PATIENT_MSG_AFTER_ATTEMPTS) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_6__[\"Flex\"], {\n        margin: \"xx-small\",\n        justifyItems: \"space-between\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_6__[\"Flex\"].Item, {\n        margin: \"0 0 x-small 0\",\n        shouldGrow: true,\n        shouldShrink: true\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_alerts__WEBPACK_IMPORTED_MODULE_5__[\"Alert\"], {\n        key: \"bepatientalert\",\n        variant: \"info\",\n        margin: \"x-small\",\n        liveRegion: liveRegion\n      }, I18n.t('Your media has been uploaded and will appear here after processing.'))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_6__[\"Flex\"].Item, {\n        shouldGrow: false,\n        shouldShrink: false,\n        margin: \"0 x-small 0 0\"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_spinner__WEBPACK_IMPORTED_MODULE_7__[\"Spinner\"], {\n        renderTitle: () => I18n.t('Loading'),\n        size: \"small\"\n      })));\n    }\n\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_alerts__WEBPACK_IMPORTED_MODULE_5__[\"Alert\"], {\n      key: \"loadingalert\",\n      variant: \"info\",\n      liveRegion: liveRegion,\n      screenReaderOnly: true\n    }, I18n.t('Loading')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_canvas_media__WEBPACK_IMPORTED_MODULE_3__[\"LoadingIndicator\"], {\n      translatedTitle: I18n.t('Loading'),\n      size: props.type === 'audio' ? 'x-small' : 'large'\n    }));\n  }\n\n  function getAriaLabel() {\n    if (!props.aria_label) return; // video\n\n    if (props.type === 'video') {\n      return I18n.t('Video player for %{label}', {\n        label: props.aria_label\n      });\n    } // audio\n\n\n    if (props.type === 'audio') {\n      return I18n.t('Audio player for %{label}', {\n        label: props.aria_label\n      });\n    }\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    ref: containerRef,\n    \"data-tracks\": JSON.stringify(media_tracks)\n  }, media_sources.length ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_media_player__WEBPACK_IMPORTED_MODULE_4__[\"MediaPlayer\"], {\n    ref: mediaPlayerRef,\n    sources: media_sources,\n    tracks: props.media_tracks,\n    hideFullScreen: !includeFullscreen,\n    onLoadedMetadata: handleLoadedMetadata,\n    captionPosition: \"bottom\",\n    autoShowCaption: auto_cc_track,\n    label: getAriaLabel()\n  }) : renderNoPlayer());\n}\nfunction setPlayerSize(player, type, boundingBox, playerContainer) {\n  const {\n    width,\n    height\n  } = Object(_instructure_canvas_media__WEBPACK_IMPORTED_MODULE_3__[\"sizeMediaPlayer\"])(player, type, boundingBox);\n  player.style.width = width;\n  player.style.height = height; // player.style.margin = '0 auto' // TODO: remove with player v7\n\n  player.classList.add(Object(_instructure_canvas_media__WEBPACK_IMPORTED_MODULE_3__[\"isAudio\"])(type) ? 'audio-player' : 'video-player'); // videos that are wide-and-short portrait need to shrink the parent\n\n  if (playerContainer && player.videoWidth > player.videoHeight) {\n    playerContainer.style.width = width;\n    playerContainer.style.height = height;\n    const playerContainerContainer = playerContainer.parentElement; // tinymce adds this\n\n    if (playerContainerContainer && playerContainerContainer.classList.contains('mce-preview-object') && playerContainerContainer.classList.contains('mce-object-iframe')) {\n      // we're in the RCE\n      playerContainerContainer.style.width = width;\n      playerContainerContainer.style.height = height;\n    }\n  }\n}\nCanvasMediaPlayer.propTypes = {\n  media_id: prop_types__WEBPACK_IMPORTED_MODULE_1__[\"string\"].isRequired,\n  media_sources: _instructure_ui_media_player__WEBPACK_IMPORTED_MODULE_4__[\"MediaPlayer\"].propTypes.sources,\n  media_tracks: _instructure_ui_media_player__WEBPACK_IMPORTED_MODULE_4__[\"MediaPlayer\"].propTypes.tracks,\n  type: Object(prop_types__WEBPACK_IMPORTED_MODULE_1__[\"oneOf\"])(['audio', 'video']),\n  MAX_RETRY_ATTEMPTS: prop_types__WEBPACK_IMPORTED_MODULE_1__[\"number\"],\n  SHOW_BE_PATIENT_MSG_AFTER_ATTEMPTS: prop_types__WEBPACK_IMPORTED_MODULE_1__[\"number\"],\n  aria_label: prop_types__WEBPACK_IMPORTED_MODULE_1__[\"string\"]\n};\nCanvasMediaPlayer.defaultProps = {\n  media_sources: [],\n  type: 'video',\n  MAX_RETRY_ATTEMPTS: DEFAULT_MAX_RETRY_ATTEMPTS,\n  SHOW_BE_PATIENT_MSG_AFTER_ATTEMPTS: DEFAULT_SHOW_BE_PATIENT_MSG_AFTER_ATTEMPTS,\n  aria_label: ''\n};\n\n//# sourceURL=webpack:///./ui/features/media_player_iframe_content/react/CanvasMediaPlayer.js?");

/***/ }),

/***/ "pUPW":
/*!***************************************************************************!*\
  !*** ./ui/features/assignments_show_student/react/helpers/elideString.js ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n */ \"HGxv\");\n/*\n * Copyright (C) 2016 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst I18n = Object(_canvas_i18n__WEBPACK_IMPORTED_MODULE_0__[\"useScope\"])('assignments_2_elide_string');\n\nconst elideString = title => {\n  if (title.length > 21) {\n    return `${title.substr(0, 9)}${I18n.t('...')}${title.substr(-9)}`;\n  } else {\n    return title;\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (elideString);\n\n//# sourceURL=webpack:///./ui/features/assignments_show_student/react/helpers/elideString.js?");

/***/ })

}]);