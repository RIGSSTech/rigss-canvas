(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[97],{

/***/ "0WIc":
/*!**********************************************************************************!*\
  !*** ./node_modules/@microsoft/immersive-reader-sdk/lib/immersive-reader-sdk.js ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("!function(e,t){ true?module.exports=t():undefined}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=1)}([function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.CookiePolicy=void 0,function(e){e[e.Disable=0]=\"Disable\",e[e.Enable=1]=\"Enable\"}(t.CookiePolicy||(t.CookiePolicy={}))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.CookiePolicy=t.launchAsync=t.close=t.renderButtons=void 0;var n=r(2);Object.defineProperty(t,\"renderButtons\",{enumerable:!0,get:function(){return n.renderButtons}});var o=r(3);Object.defineProperty(t,\"close\",{enumerable:!0,get:function(){return o.close}}),Object.defineProperty(t,\"launchAsync\",{enumerable:!0,get:function(){return o.launchAsync}});var i=r(0);Object.defineProperty(t,\"CookiePolicy\",{enumerable:!0,get:function(){return i.CookiePolicy}}),\"undefined\"!=typeof window&&window.addEventListener(\"load\",(function(){var e,t;window.hasOwnProperty(\"Promise\")||(e=\"https://contentstorage.onenote.office.net/onenoteltir/permanent-static-resources/promise-polyfill.min.js\",(t=document.createElement(\"script\")).src=e,document.head.appendChild(t)),n.renderButtons()}))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.renderButtons=void 0;var n={af:\"Indompelende leser\",am:\"በህያው ስሜት ፈጣሪ ዕይታ አንባቢ\",ar:\"القارئ الشامل\",as:\"ইমাৰচিভ ৰিডাৰ\",az:\"İmmersiv Oxuyucu\",be:\"Імерсіўны чытальнік\",bg:\"Концентриран четец\",bn:\"মনোগ্রাহী পাঠক\",\"bn-bd\":\"ইমার্সিভ পাঠক\",bs:\"Koncentrirani čitalac\",ca:\"Lector immersiu\",cs:\"Asistivní čtečka\",\"cy-gb\":\"Darllenydd Ymdrwythol\",da:\"Forenklet læser\",de:\"Plastischer Reader\",el:\"Προηγμένο πρόγραμμα ανάγνωσης\",en:\"Immersive Reader\",es:\"Lector inmersivo\",et:\"Süvaluger\",eu:\"Irakurgailu murgiltzailea\",fa:\"خواننده همه‌جانبه\",fi:\"Syventävä lukuohjelma\",fil:\"Immersive Reader\",fr:\"Lecteur immersif\",\"ga-ie\":\"Léitheoir tumthach\",gd:\"An leughadair ùr-nòsach\",gl:\"Lector avanzado\",gu:\"ઇમર્સિવ રીડર\",ha:\"Mai karatu Mai barbazawa\",he:\"תצוגת קריאה מודרנית\",hi:\"इमर्सिव रीडर\",hr:\"Stopljeni čitač\",hu:\"Modern olvasó\",hy:\"Խորասուզված ընթերցիչ\",id:\"Pembaca Imersif\",ig:\"Ọgụụ Kenzipụtara\",is:\"Aðgengilegt lestrarumhverfi\",it:\"Strumento di lettura immersiva\",ja:\"イマーシブ リーダー\",ka:\"იმერსიული წამკითხველი\",kk:\"Иммерсивті оқу құралы\",km:\"កម្មវិធីអានពណ៌រំលេចនៅលើអេក្រង់\",kn:\"ಇಮ್ಮರ್ಸಿವ್ ಓದುಗ\",ko:\"몰입형 리더\",kok:\"तंद्री लागिल्लो वाचक\",\"ku-arab\":\"خوێنەری پڕ\",ky:\"Курчаган Окугуч\",lb:\"Immersive Reader\",lo:\"ຕົວອ່ານອິມເມີສີບ\",lt:\"Įtraukianti skaitytuvė\",lv:\"Tīrskata lasītājs\",mi:\"Pūpānui Rumaki\",mk:\"Сеопфатен читач\",ml:\"ഇമ്മേഴ്‌സീവ് റീഡർ\",mn:\"Идэвхтэй уншигч\",mr:\"इमर्सिव्ह वाचक\",ms:\"Pembaca Imersif\",mt:\"Qarrej Immersiv\",ne:\"इमेर्सिभ रिडर\",nl:\"Insluitende lezer\",\"nn-no\":\"Engasjerande lesar\",no:\"Engasjerende leser\",nso:\"Go Bala ka Mongwalo o Mokoto\",or:\"ଇମରସିଭ୍ ରିଡର୍\",pa:\"ਇਮਰਸਿਵ ਰੀਡਰ\",\"pa-arab\":\"گھیرن آلا مطالعہ کار\",pl:\"Czytnik immersyjny\",prs:\"خواننده نمایش\",pt:\"Leitura Avançada\",quc:\"Nim ucholajil sik'inel uwach\",quz:\"Wankisqa Ñawiq\",ro:\"Immersive Reader\",ru:\"Иммерсивное средство чтения\",rw:\"Insakazasoma\",sd:\"امرسو ريڊر\",si:\"ගිලෙන සුළු කියවනය\",sk:\"Imerzná čítačka\",sl:\"Potopni bralnik\",sq:\"Lexuesi kredhës\",\"sr-cyrl-ba\":\"Концентрисани читалац\",\"sr-cyrl-rs\":\"Концентрисани читалац\",\"sr-latn-rs\":\"Koncentrisani čitalac\",sv:\"Avancerad läsare\",sw:\"Kisomaji cha Kuzamisha\",ta:\"அற்புதமான ரீடர்\",te:\"మంత్రముగ్ధులను చేసే పఠన సాధనం\",\"tg-cyrl-tj\":\"Хонандаи фарогир\",th:\"โปรแกรมช่วยอ่าน\",ti:\"ኣንባቢ ሕሉው ስምዒት ፈጣሪ\",tk:\"Giňişleýin okaýjy\",tn:\"Sebadi sa Imesife\",tr:\"Tam Ekran Okuyucu\",tt:\"Чолгап алучы уку чарасы\",\"ug-cn\":\"چۆكمە ئوقۇغۇچ\",uk:\"Занурення в текст\",ur:\"امرسیو مطالعہ کار\",uz:\"Immersiv mutolaa vositasi\",vi:\"Trình đọc Chân thực\",wo:\"Jàngukaay bu Rafet\",xh:\"Isifundi Esikhulu\",yo:\"Ìwò Alámùtán\",zh:\"沉浸式阅读器\",\"zh-hant\":\"沈浸式閱讀程式\",zu:\"Isifundi Sokuzizwisa\"};function o(e){var t=document.createElement(\"img\");t.src=\"https://contentstorage.onenote.office.net/onenoteltir/permanent-static-resources/immersive-reader-icon.svg\";var r=e.getAttribute(\"data-icon-px-size\")||\"20\";t.style.height=t.style.width=r+\"px\",t.style.verticalAlign=\"middle\",t.style.marginTop=\"-2px\";var n=e.getAttribute(\"data-locale\")||\"en\";t.alt=s(n),e.appendChild(t)}function i(e){var t=document.createElement(\"span\");t.style.marginLeft=\"8px\",e.appendChild(t)}function a(e){var t=document.createElement(\"span\"),r=e.getAttribute(\"data-locale\")||\"en\";t.textContent=s(r),e.appendChild(t)}function s(e){return e=e.toLowerCase(),n[e]?n[e]:\"zh-hk\"===e||\"zh-mo\"===e||\"zh-tw\"===e?n[\"zh-hant\"]:(e=e.substring(0,e.lastIndexOf(\"-\")),n[e]?n[e]:(e=e.substring(0,e.lastIndexOf(\"-\")),n[e]?n[e]:n.en))}t.renderButtons=function(e){var t=document.createElement(\"style\");t.innerHTML=\".immersive-reader-button{cursor:pointer;display:inline-block;padding:5px;} .immersive-reader-button:hover{background:rgba(0,0,0,.05);border-radius:2px\",document.head.appendChild(t);var r=[].slice.call(document.getElementsByClassName(\"immersive-reader-button\"));e&&e.elements&&(r=e.elements);for(var n=0,d=r;n<d.length;n++){var u=d[n];u.setAttribute(\"role\",\"button\");var l=u.getAttribute(\"data-locale\")||\"en\";switch(u.setAttribute(\"aria-label\",s(l)),u.getAttribute(\"data-button-style\")||\"icon\"){case\"icon\":o(u);break;case\"text\":a(u);break;case\"iconAndText\":o(u),i(u),a(u)}}}},function(e,t,r){\"use strict\";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,\"__esModule\",{value:!0}),t.isValidSubdomain=t.close=t.launchAsync=void 0;var o=r(0),i=r(4),a={};a[i.ErrorCode.TokenExpired]=\"The access token supplied is expired.\",a[i.ErrorCode.Throttled]=\"You have exceeded your quota.\",a[i.ErrorCode.ServerError]=\"An error occurred when calling the server to process the text.\",a[i.ErrorCode.InvalidSubdomain]=\"The subdomain supplied is invalid.\";var s=!1;function d(e){if(!e)return!1;return new RegExp(\"^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\\\-]{0,61}[a-zA-Z0-9])$\").test(e)}t.launchAsync=function(e,t,r,u){return s?Promise.reject(\"Immersive Reader is already launching\"):new Promise((function(l,c){if(e)if(r)if(r.chunks)if(r.chunks.length)if(d(t)||u&&u.customDomain){s=!0;var m=Date.now();(u=n({uiZIndex:1e3,timeout:15e3,useWebview:!1,allowFullscreen:!0,hideExitButton:!1,cookiePolicy:o.CookiePolicy.Disable},u)).uiZIndex&&\"number\"==typeof u.uiZIndex||(u.uiZIndex=1e3);var f=null,p=document.createElement(\"div\"),v=u.useWebview?document.createElement(\"webview\"):document.createElement(\"iframe\");v.allow=\"autoplay\";var h=document.createElement(\"style\");h.innerHTML=\"body{height:100%;overflow:hidden;}\";var b=function(){f&&(window.clearTimeout(f),f=null)},g=function(){document.body.contains(p)&&document.body.removeChild(p),window.removeEventListener(\"message\",k),b(),h.parentNode&&h.parentNode.removeChild(h)},y=function(){if(g(),u.onExit)try{u.onExit()}catch(e){}};g();var k=function(n){if(n&&n.data&&\"string\"==typeof n.data)if(\"ImmersiveReader-ReadyForContent\"===n.data){b();var o={cogSvcsAccessToken:e,cogSvcsSubdomain:t,request:r,launchToPostMessageSentDurationInMs:Date.now()-m,disableFirstRun:u.disableFirstRun,readAloudOptions:u.readAloudOptions,translationOptions:u.translationOptions,displayOptions:u.displayOptions,sendPreferences:!!u.onPreferencesChanged,preferences:u.preferences};v.contentWindow.postMessage(JSON.stringify({messageType:\"Content\",messageValue:o}),\"*\")}else if(\"ImmersiveReader-Exit\"===n.data)y();else if(n.data.startsWith(\"ImmersiveReader-LaunchResponse:\")){var d=null,f=null,h=null;try{h=JSON.parse(n.data.substring(\"ImmersiveReader-LaunchResponse:\".length))}catch(e){}h&&h.success?d={container:p,sessionId:h.sessionId,charactersProcessed:h.meteredContentSize}:f=h&&!h.success?{code:h.errorCode,message:a[h.errorCode],sessionId:h.sessionId}:{code:i.ErrorCode.ServerError,message:a[i.ErrorCode.ServerError]},s=!1,d?(b(),l(d)):f&&(y(),c(f))}else if(n.data.startsWith(\"ImmersiveReader-Preferences:\")&&u.onPreferencesChanged&&\"function\"==typeof u.onPreferencesChanged)try{u.onPreferencesChanged(n.data.substring(\"ImmersiveReader-Preferences:\".length))}catch(e){}};window.addEventListener(\"message\",k),f=window.setTimeout((function(){g(),s=!1,c({code:i.ErrorCode.Timeout,message:\"Page failed to load after timeout (\"+u.timeout+\" ms)\"})}),u.timeout),u.allowFullscreen&&v.setAttribute(\"allowfullscreen\",\"\"),v.style.cssText=\"position: static; width: 100vw; height: 100vh; left: 0; top: 0; border-width: 0\",u.useWebview&&v.addEventListener(\"loadstop\",(function(){v.contentWindow.postMessage(JSON.stringify({messageType:\"WebviewHost\"}),\"*\")}));var w=(u.customDomain?u.customDomain:\"https://\"+t+\".cognitiveservices.azure.com/immersivereader/webapp/v1.0/\")+\"reader?exitCallback=ImmersiveReader-Exit&sdkPlatform=js&sdkVersion=1.1.0\";w+=\"&cookiePolicy=\"+(u.cookiePolicy===o.CookiePolicy.Enable?\"enable\":\"disable\"),u.hideExitButton&&(w+=\"&hideExitButton=true\"),u.uiLang&&(w+=\"&omkt=\"+u.uiLang),v.src=w,p.style.cssText=\"position: fixed; width: 100vw; height: 100vh; left: 0; top: 0; border-width: 0; -webkit-perspective: 1px; z-index: \"+u.uiZIndex+\"; background: white; overflow: hidden\",p.appendChild(v),document.body.appendChild(p),document.head.appendChild(h)}else c({code:i.ErrorCode.InvalidSubdomain,message:a[i.ErrorCode.InvalidSubdomain]});else c({code:i.ErrorCode.BadArgument,message:\"Chunks must not be empty\"});else c({code:i.ErrorCode.BadArgument,message:\"Chunks must not be null\"});else c({code:i.ErrorCode.BadArgument,message:\"Content must not be null\"});else c({code:i.ErrorCode.BadArgument,message:\"Token must not be null\"})}))},t.close=function(){window.postMessage(\"ImmersiveReader-Exit\",\"*\")},t.isValidSubdomain=d},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.ErrorCode=void 0,function(e){e.BadArgument=\"BadArgument\",e.Timeout=\"Timeout\",e.TokenExpired=\"TokenExpired\",e.Throttled=\"Throttled\",e.ServerError=\"ServerError\",e.InvalidSubdomain=\"InvalidSubdomain\"}(t.ErrorCode||(t.ErrorCode={}))}])}));\n\n//# sourceURL=webpack:///./node_modules/@microsoft/immersive-reader-sdk/lib/immersive-reader-sdk.js?");

/***/ }),

/***/ "5GUz":
/*!******************************************************!*\
  !*** ./ui/shared/immersive-reader/ContentChunker.ts ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _formatters_spacing__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./formatters/spacing */ \"vdGB\");\n/*\n * Copyright (C) 2021 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar MimeTypes;\n\n(function (MimeTypes) {\n  MimeTypes[\"mathML\"] = \"application/mathml+xml\";\n  MimeTypes[\"html\"] = \"text/html\";\n})(MimeTypes || (MimeTypes = {}));\n\n/**\n * Breaks content into chunks of content and MathML for\n * Microsoft Immersive Reader.\n *\n * Example:\n * content = `<div>\n *   <p>\n *     Some content\n *     <span class=\"math\" data-mathml=\"...some MathML\"></span\n *   </p>\n *   <p>\n *     More content\n *   </p>\n * </div>`\n *\n * contentChunker.chunk(content)\n *\n * => [\n *      { content: \"<div><p>Some content\", mimeType: \"text/html\" },\n *      { content: \"<MathML from the data-attribut>\", mimeType: \"application/mathml+xml\"},\n *      { content: \"</p>Mp>More content</p></div>\", mimeType: \"text/html\"}\n *    ]\n *\n * Note that some tags will be missing closing tags, while others miss opening tags.\n *\n * DOM parsers will automatically close the tags without closings and remove the tags without\n * openings.\n *\n * @constructor\n * @param {ChunkerOptions} options to controll how content\n *  is chunked.\n */\nclass ContentChunker {\n  constructor(opts = {}) {\n    this.selector = void 0;\n    this.mathMLAttr = void 0;\n    this.formatters = void 0;\n    this.parser = void 0;\n    this.selector = opts.selector || '.MathJax_SVG';\n    this.mathMLAttr = opts.mathMLAttr || 'data-mathml';\n    this.formatters = opts.formatters || [_formatters_spacing__WEBPACK_IMPORTED_MODULE_0__[\"default\"]];\n    this.parser = new DOMParser();\n  }\n\n  chunk(content) {\n    const chunks = [];\n    const body = this.bodyFor(content);\n    const mathElement = body.querySelector(this.selector);\n    const [preMath, postMath] = body.innerHTML.split(mathElement === null || mathElement === void 0 ? void 0 : mathElement.outerHTML); // Add pre-math content\n\n    chunks.push({\n      content: this.applyFormatters(preMath),\n      mimeType: MimeTypes.html\n    }); // Add the math\n\n    if (mathElement) {\n      chunks.push({\n        content: mathElement.getAttribute(this.mathMLAttr) || '',\n        mimeType: MimeTypes.mathML\n      });\n    } else {\n      // Recursive base case: no more chunks to process\n      if (!mathElement) return chunks;\n    } // Recurse and concat results\n\n\n    chunks.push(...this.chunk(postMath));\n    return chunks;\n  }\n\n  applyFormatters(content) {\n    let formattedContent = content;\n    this.formatters.forEach(formatter => {\n      formattedContent = formatter(formattedContent, this.parser);\n    });\n    return formattedContent;\n  }\n\n  bodyFor(content) {\n    return this.parser.parseFromString(content, 'text/html').body;\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ContentChunker);\n\n//# sourceURL=webpack:///./ui/shared/immersive-reader/ContentChunker.ts?");

/***/ }),

/***/ "AZYJ":
/*!*******************************************************!*\
  !*** ./ui/shared/immersive-reader/ImmersiveReader.js ***!
  \*******************************************************/
/*! exports provided: ImmersiveReaderButton, initializeReaderButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ImmersiveReaderButton\", function() { return ImmersiveReaderButton; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"initializeReaderButton\", function() { return initializeReaderButton; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ \"i8i4\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @instructure/ui-buttons */ \"K6WN\");\n/* harmony import */ var _instructure_ui_svg_images__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @instructure/ui-svg-images */ \"88AY\");\n/* harmony import */ var _canvas_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/i18n */ \"HGxv\");\n/* harmony import */ var _canvas_alerts_react_FlashAlert__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @canvas/alerts/react/FlashAlert */ \"uloQ\");\n/* harmony import */ var _instructure_js_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @instructure/js-utils */ \"1b+i\");\n/* harmony import */ var _microsoft_immersive_reader_sdk__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @microsoft/immersive-reader-sdk */ \"0WIc\");\n/* harmony import */ var _microsoft_immersive_reader_sdk__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_microsoft_immersive_reader_sdk__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var with_breakpoints__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! with-breakpoints */ \"JGuX\");\n/* harmony import */ var _ContentChunker__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ContentChunker */ \"5GUz\");\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\nconst I18n = Object(_canvas_i18n__WEBPACK_IMPORTED_MODULE_4__[\"useScope\"])('ImmersiveReader');\n/**\n * This comes from https://github.com/microsoft/immersive-reader-sdk/blob/master/assets/icon.svg\n */\n\nconst LOGO = `\n<!-- Copyright (c) Microsoft Corporation. All rights reserved.\n     Licensed under the MIT License. -->\n\n<svg viewBox=\"0 0 40 37\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n        <g fill-rule=\"nonzero\">\n            <path d=\"M37.4,0.9 L37.4,9.6 L35.4,9.6 L35.4,2.9 L24.4,2.9 C22.9,3.3 20,4.5 20,6 L20,17.2 L18,17.2 L18,6 C18,5 15.6,3.6 13.8,2.9 L2,2.9 L2,29 L12.4,29 L12.4,31 L0,31 L0,0.9 L14.1,0.9 L14.3,1 C15,1.2 17.5,2.2 18.9,3.7 C20.5,1.9 23.5,1.1 23.9,1 L24.1,1 L37.4,1 L37.4,0.9 Z\" fill=\"#000000\"></path>\n            <path d=\"M27.4,37 L25.8,37 L18.4,29.4 L14,29.4 L14,21 L18.4,20.9 L26.1,13 L27.4,13 L27.4,37 Z M16,27.4 L19.2,27.4 L25.3,33.7 L25.3,16.6 L19.2,22.9 L15.9,22.9 L15.9,27.4 L16,27.4 Z\" fill=\"#0197F2\"></path>\n            <path d=\"M31.3,32.7 L29.6,31.7 C29.6,31.7 31.7,28.3 31.7,25.2 C31.7,21.9 29.6,18.5 29.6,18.4 L31.3,17.4 C31.4,17.6 33.7,21.3 33.7,25.2 C33.7,28.8 31.4,32.6 31.3,32.7 Z\" fill=\"#0197F2\"></path>\n            <path d=\"M36.4,36.2 L34.8,35 C34.8,35 38,30.8 38,25.2 C38,19.6 34.8,15.4 34.8,15.4 L36.4,14.2 C36.5,14.4 40,19 40,25.3 C40,31.5 36.5,36 36.4,36.2 Z\" fill=\"#0197F2\"></path>\n        </g>\n    </g>\n</svg>\n`;\n\nfunction handleClick({\n  title,\n  content\n}, readerSDK) {\n  ;\n  (readerSDK || Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(null, /*! @microsoft/immersive-reader-sdk */ \"0WIc\", 7))).then(({\n    launchAsync\n  }) => {\n    fetch('/api/v1/immersive_reader/authenticate', _instructure_js_utils__WEBPACK_IMPORTED_MODULE_6__[\"defaultFetchOptions\"]).then(response => response.json()).then(({\n      token,\n      subdomain\n    }) => {\n      const chunks = new _ContentChunker__WEBPACK_IMPORTED_MODULE_9__[\"default\"]().chunk(content());\n      const requestContent = {\n        title,\n        chunks\n      };\n      const options = {\n        cookiePolicy: _microsoft_immersive_reader_sdk__WEBPACK_IMPORTED_MODULE_7__[\"CookiePolicy\"].Disable\n      };\n      launchAsync(token, subdomain, requestContent, options);\n    }).catch(e => {\n      // eslint-disable-next-line no-console\n      console.error('Getting authentication details failed', e);\n      Object(_canvas_alerts_react_FlashAlert__WEBPACK_IMPORTED_MODULE_5__[\"showFlashError\"])(I18n.t('Immersive Reader Failed to Load'))();\n    });\n  }).catch(e => {\n    // eslint-disable-next-line no-console\n    console.error('Loading the Immersive Reader SDK failed', e);\n    Object(_canvas_alerts_react_FlashAlert__WEBPACK_IMPORTED_MODULE_5__[\"showFlashError\"])(I18n.t('Immersive Reader Failed to Load'))();\n  });\n}\n\nfunction ImmersiveReaderButton({\n  content,\n  readerSDK,\n  breakpoints\n}) {\n  return breakpoints !== null && breakpoints !== void 0 && breakpoints.mobileOnly ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_2__[\"IconButton\"], {\n    onClick: () => handleClick(content, readerSDK),\n    screenReaderLabel: I18n.t('Immersive Reader')\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_svg_images__WEBPACK_IMPORTED_MODULE_3__[\"SVGIcon\"], {\n    src: LOGO\n  })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_2__[\"Button\"], {\n    onClick: () => handleClick(content, readerSDK),\n    renderIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_svg_images__WEBPACK_IMPORTED_MODULE_3__[\"SVGIcon\"], {\n      src: LOGO\n    })\n  }, I18n.t('Immersive Reader'));\n}\nconst ImmersiveReaderButtonWithBreakpoints = Object(with_breakpoints__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(ImmersiveReaderButton);\nfunction initializeReaderButton(mountPoint, content) {\n  react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImmersiveReaderButtonWithBreakpoints, {\n    content: content\n  }), mountPoint);\n}\n\n//# sourceURL=webpack:///./ui/shared/immersive-reader/ImmersiveReader.js?");

/***/ }),

/***/ "vdGB":
/*!**********************************************************!*\
  !*** ./ui/shared/immersive-reader/formatters/spacing.ts ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/*\n * Copyright (C) 2021 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst MATH_SPAN_QUERY = '.math_equation_latex';\n/**\n * Formatter to correct spacing before equations\n *\n * Removes empty math containers to prevent extra\n * spacing before an equation in immersive reader\n */\n\nconst spacing = function spacing(content, parser) {\n  var _body$querySelector, _body$textContent, _mathParagraph$textCo;\n\n  if (!content) return '';\n  const body = parser.parseFromString(content, 'text/html').body;\n  const mathParagraph = (_body$querySelector = body.querySelector(MATH_SPAN_QUERY)) === null || _body$querySelector === void 0 ? void 0 : _body$querySelector.parentElement; // Adjacent equations on new lines. Return a break to preserve new lines\n\n  if (body.textContent === '') return '<br />'; // Adjacent equations on new lines with extra whitespace between them\n\n  if (!((_body$textContent = body.textContent) !== null && _body$textContent !== void 0 && _body$textContent.trim())) return `<p>${body.textContent}</p>`; // The content has actual text, don't remove it\n\n  if (mathParagraph !== null && mathParagraph !== void 0 && (_mathParagraph$textCo = mathParagraph.textContent) !== null && _mathParagraph$textCo !== void 0 && _mathParagraph$textCo.trim()) return content;\n  mathParagraph === null || mathParagraph === void 0 ? void 0 : mathParagraph.remove();\n  return body.innerHTML;\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (spacing);\n\n//# sourceURL=webpack:///./ui/shared/immersive-reader/formatters/spacing.ts?");

/***/ })

}]);