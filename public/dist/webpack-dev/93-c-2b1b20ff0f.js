(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[93],{

/***/ "+w22":
/*!*********************************************************!*\
  !*** ./ui/shared/enhanced-user-content/jquery/index.js ***!
  \*********************************************************/
/*! exports provided: enhanceUserContent, formatTimeAgoTitle, formatTimeAgoDate, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"enhanceUserContent\", function() { return enhanceUserContent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"formatTimeAgoTitle\", function() { return formatTimeAgoTitle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"formatTimeAgoDate\", function() { return formatTimeAgoDate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return enhanceTheEntireUniverse; });\n/* harmony import */ var _canvas_keyboard_nav_dialog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/keyboard-nav-dialog */ \"Fxmq\");\n/* harmony import */ var _canvas_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/i18n */ \"HGxv\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _canvas_timezone__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/timezone */ \"3H9/\");\n/* harmony import */ var html_escape__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! html-escape */ \"gI0r\");\n/* harmony import */ var prevent_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! prevent-default */ \"qqwe\");\n/* harmony import */ var _canvas_rce_RichContentEditor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @canvas/rce/RichContentEditor */ \"Ce78\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-dom */ \"i8i4\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _instructure_ui_link__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @instructure/ui-link */ \"dlTp\");\n/* harmony import */ var _instructure_helper__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./instructure_helper */ \"ctx7\");\n/* harmony import */ var jqueryui_draggable__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jqueryui/draggable */ \"oa+I\");\n/* harmony import */ var _canvas_jquery_jquery_ajaxJSON__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @canvas/jquery/jquery.ajaxJSON */ \"dhbk\");\n/* harmony import */ var _canvas_doc_previews__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @canvas/doc-previews */ \"CsJK\");\n/* harmony import */ var _canvas_google_analytics__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @canvas/google-analytics */ \"M+ds\");\n/* harmony import */ var _canvas_datetime__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @canvas/datetime */ \"7AEQ\");\n/* harmony import */ var _canvas_forms_jquery_jquery_instructure_forms__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @canvas/forms/jquery/jquery.instructure_forms */ \"Dhso\");\n/* harmony import */ var jqueryui_dialog__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! jqueryui/dialog */ \"ESjL\");\n/* harmony import */ var _canvas_jquery_jquery_instructure_misc_helpers__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @canvas/jquery/jquery.instructure_misc_helpers */ \"8JEM\");\n/* harmony import */ var _canvas_jquery_jquery_instructure_misc_plugins__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @canvas/jquery/jquery.instructure_misc_plugins */ \"aq8L\");\n/* harmony import */ var _canvas_keycodes__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @canvas/keycodes */ \"qAtv\");\n/* harmony import */ var _canvas_loading_image__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @canvas/loading-image */ \"lBOK\");\n/* harmony import */ var _canvas_rails_flash_notifications__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @canvas/rails-flash-notifications */ \"r2Yr\");\n/* harmony import */ var _canvas_util_templateData__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @canvas/util/templateData */ \"TvTI\");\n/* harmony import */ var _canvas_util_jquery_fixDialogButtons__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @canvas/util/jquery/fixDialogButtons */ \"897F\");\n/* harmony import */ var _canvas_media_comments_jquery_mediaCommentThumbnail__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @canvas/media-comments/jquery/mediaCommentThumbnail */ \"bbn0\");\n/* harmony import */ var date__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! date */ \"wX3B\");\n/* harmony import */ var jquery_tinypubsub__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! jquery-tinypubsub */ \"XKWA\");\n/* harmony import */ var jquery_tinypubsub__WEBPACK_IMPORTED_MODULE_28___default = /*#__PURE__*/__webpack_require__.n(jquery_tinypubsub__WEBPACK_IMPORTED_MODULE_28__);\n/* harmony import */ var jqueryui_resizable__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! jqueryui/resizable */ \"gNnW\");\n/* harmony import */ var jqueryui_sortable__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! jqueryui/sortable */ \"bgJ8\");\n/* harmony import */ var jqueryui_tabs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! jqueryui/tabs */ \"UEsX\");\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* loadDocPreview */\n\n\n\n/* datetimeString, dateString, fudgeDateForProfileTimezone */\n\n\n/* formSubmit, fillFormData, formErrors */\n\n\n\n/* replaceTags, youTubeID */\n\n\n/* ifExists, .dim, confirmDelete, showIf, fillWindowWithMe */\n\n\n\n\n\n\n\n\n\n/* /\\.publish\\(/ */\n\n\n\n\nconst I18n = Object(_canvas_i18n__WEBPACK_IMPORTED_MODULE_1__[\"useScope\"])('instructure_js');\nlet preview_counter = 0;\n\nfunction previewId() {\n  return `preview_${++preview_counter}`;\n}\n\nfunction handleYoutubeLink() {\n  const $link = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this);\n  const href = $link.attr('href');\n  const id = jquery__WEBPACK_IMPORTED_MODULE_2___default.a.youTubeID(href || '');\n\n  if (id && !$link.hasClass('inline_disabled')) {\n    const $after = jquery__WEBPACK_IMPORTED_MODULE_2___default()(`\n      <a\n        href=\"${Object(html_escape__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(href)}\"\n        class=\"youtubed\"\n      >\n        <img src=\"/images/play_overlay.png\"\n          class=\"media_comment_thumbnail\"\n          style=\"background-image: url(//img.youtube.com/vi/${Object(html_escape__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(id)}/2.jpg)\"\n          alt=\"${Object(html_escape__WEBPACK_IMPORTED_MODULE_5__[\"default\"])($link.data('preview-alt') || '')}\"\n        />\n      </a>\n    `);\n    $after.click(Object(prevent_default__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(function () {\n      const $video = jquery__WEBPACK_IMPORTED_MODULE_2___default()(`\n        <span class='youtube_holder' style='display: block;'>\n          <iframe\n            src='//www.youtube.com/embed/${Object(html_escape__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(id)}?autoplay=1&rel=0&hl=en_US&fs=1'\n            frameborder='0'\n            width='425'\n            height='344'\n            allowfullscreen\n          ></iframe>\n          <br/>\n          <a\n            href='#'\n            style='font-size: 0.8em;'\n            class='hide_youtube_embed_link'\n          >\n            ${Object(html_escape__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(I18n.t('links.minimize_youtube_video', 'Minimize Video'))}\n          </a>\n        </span>\n      `);\n      $video.find('.hide_youtube_embed_link').click(Object(prevent_default__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(() => {\n        $video.remove();\n        $after.show();\n        Object(_canvas_google_analytics__WEBPACK_IMPORTED_MODULE_15__[\"trackEvent\"])('hide_embedded_content', 'hide_you_tube');\n      }));\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).after($video).hide();\n    }));\n    Object(_canvas_google_analytics__WEBPACK_IMPORTED_MODULE_15__[\"trackEvent\"])('show_embedded_content', 'show_you_tube');\n    $link.addClass('youtubed').after($after);\n  }\n}\n\nObject(_canvas_google_analytics__WEBPACK_IMPORTED_MODULE_15__[\"trackEvent\"])('Route', window.location.pathname.replace(/\\/$/, '').replace(/\\d+/g, '--') || '/');\nconst JQUERY_UI_WIDGETS_WE_TRY_TO_ENHANCE = '.dialog, .draggable, .resizable, .sortable, .tabs';\n\nfunction buildUrl(url) {\n  try {\n    return new URL(url);\n  } catch (e) {// Don't raise an error\n  }\n} // Rendering a temporary Link element so we can copy its classnames to anchors with images inside,\n// since '@instructure/ui-link' doesn't provide a way to use its CSS themed classes directly.\n\n\nfunction handleAnchorsWithImage() {\n  const temp = document.createElement('div');\n  const tempLinkComponent = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_instructure_ui_link__WEBPACK_IMPORTED_MODULE_10__[\"Link\"], {\n    elementRef: e => {\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()('.user_content a:has(img)').each(function () {\n        jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).addClass(e.className);\n      });\n    }\n  },\n  /*#__PURE__*/\n  // Children prop is required\n  react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement('img'));\n  react_dom__WEBPACK_IMPORTED_MODULE_8___default.a.render(tempLinkComponent, temp);\n}\n\nfunction enhanceUserContent(visibilityMod) {\n  if (ENV.SKIP_ENHANCING_USER_CONTENT) {\n    return;\n  }\n\n  const $content = jquery__WEBPACK_IMPORTED_MODULE_2___default()('#content');\n  const visibilityQueryMod = visibilityMod === enhanceUserContent.ANY_VISIBILITY ? '' : ':visible';\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()(`.user_content:not(.enhanced)${visibilityQueryMod}`).addClass('unenhanced');\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()(`.user_content.unenhanced${visibilityQueryMod}`).each(function () {\n    const $this = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this);\n    $this.find('img').each((i, img) => {\n      // if the image file is unpublished it's replaced with the lock image\n      // and canvas adds hidden=1 to the URL.\n      // we also need to strip the alt text\n      if (/hidden=1$/.test(img.getAttribute('src'))) {\n        img.setAttribute('alt', I18n.t('This image is currently unavailable'));\n      }\n    });\n    $this.data('unenhanced_content_html', $this.html());\n  }).find('.enhanceable_content').show().filter(JQUERY_UI_WIDGETS_WE_TRY_TO_ENHANCE).ifExists($elements => {\n    const msg = 'Deprecated use of magic jQueryUI widget markup detected:\\n\\n' + \"You're relying on undocumented functionality where Canvas makes \" + 'jQueryUI widgets out of rich content that has the following class names: ' + JQUERY_UI_WIDGETS_WE_TRY_TO_ENHANCE + '.\\n\\n' + 'Canvas is moving away from jQueryUI for our own widgets and this behavior ' + \"will go away. Rather than relying on the internals of Canvas's JavaScript, \" + 'you should use your own custom JS file to do any such customizations.';\n    console.error(msg, $elements); // eslint-disable-line no-console\n  }).end().filter('.dialog').each(function () {\n    const $dialog = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this);\n    $dialog.hide();\n    $dialog.closest('.user_content').find(\"a[href='#\" + $dialog.attr('id') + \"']\").click(event => {\n      event.preventDefault();\n      $dialog.dialog();\n    });\n  }).end().filter('.draggable').draggable().end().filter('.resizable').resizable().end().filter('.sortable').sortable().end().filter('.tabs').each(function () {\n    jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).tabs();\n  }).end().end().find('a:not(.not_external, .external):external').each(function () {\n    const externalLink = Object(html_escape__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(I18n.t('titles.external_link', 'Links to an external site.'));\n    jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).not(':has(img)').addClass('external').html('<span>' + jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).html() + '</span>').attr('target', '_blank').attr('rel', 'noreferrer noopener').append('<span aria-hidden=\"true\" class=\"ui-icon ui-icon-extlink ui-icon-inline\" title=\"' + jquery__WEBPACK_IMPORTED_MODULE_2___default.a.raw(externalLink) + '\"/>').append('<span class=\"screenreader-only\">&nbsp;(' + jquery__WEBPACK_IMPORTED_MODULE_2___default.a.raw(externalLink) + ')</span>');\n  }).end();\n  handleAnchorsWithImage();\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()('a.instructure_file_link, a.instructure_scribd_file').each(function () {\n    const $link = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this);\n    const href = buildUrl($link[0].href); // Don't attempt to enhance links with no href\n\n    if (!href) return;\n    const matchesCanvasFile = href.pathname.match(/(?:\\/(courses|groups|users)\\/(\\d+))?\\/files\\/(\\d+)/);\n\n    if (!matchesCanvasFile) {\n      // a bug in the new RCE added instructure_file_link class name to all links\n      // only proceed if this is a canvas file link\n      return;\n    }\n\n    let $download_btn, $preview_link;\n\n    if (jquery__WEBPACK_IMPORTED_MODULE_2___default.a.trim($link.text())) {\n      const filename = this.textContent; // instructure_file_link_holder is used to find file_preview_link\n\n      const $span = jquery__WEBPACK_IMPORTED_MODULE_2___default()(\"<span class='instructure_file_holder link_holder instructure_file_link_holder'/>\");\n      const qs = href.searchParams;\n      qs.delete('wrap');\n      qs.append('download_frd', '1');\n      const download_url = `${href.origin}${href.pathname.replace(/(?:\\/(download|preview))?$/, '/download')}?${qs}`;\n      $download_btn = jquery__WEBPACK_IMPORTED_MODULE_2___default()(`<a class=\"file_download_btn\" role=\"button\" download style=\"margin-inline-start: 5px; text-decoration: none;\" href=\"${Object(html_escape__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(download_url)}\">\n            <img style=\"width:16px; height:16px\" src=\"/images/svg-icons/svg_icon_download.svg\" alt=\"\" role=\"presentation\"/>\n            <span class=\"screenreader-only\">\n              ${Object(html_escape__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(I18n.t('Download %{filename}', {\n        filename\n      }))}\n            </span>\n          </a>`);\n\n      if ($link.hasClass('instructure_scribd_file')) {\n        if ($link.hasClass('inline_disabled')) {\n          // link opens in overlay\n          $link.addClass('preview_in_overlay');\n        } else {\n          // link opens inline preview\n          $link.addClass('file_preview_link');\n        }\n      }\n\n      $link.removeClass('instructure_file_link');\n      $link.removeClass('instructure_scribd_file').before($span).appendTo($span);\n      $span.append($preview_link);\n      $span.append($download_btn);\n    }\n  }); // Some schools have been using 'file_preview_link' for inline previews\n  // outside of the RCE so find them all after we've gone through and\n  // added our own (above)\n\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()('.instructure_file_link_holder').find('a.file_preview_link, a.scribd_file_preview_link').each(function () {\n    const $link = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this);\n\n    if ($link.siblings('.preview_container').length) {\n      return;\n    }\n\n    const preview_id = previewId();\n    $link.attr('aria-expanded', 'false');\n    $link.attr('aria-controls', preview_id);\n    const $preview_container = jquery__WEBPACK_IMPORTED_MODULE_2___default()('<div role=\"region\" class=\"preview_container\" />').attr('id', preview_id).css('display', 'none');\n    $link.parent().append($preview_container);\n\n    if ($link.hasClass('auto_open')) {\n      $link.click();\n    }\n  });\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()('.user_content.unenhanced a,.user_content.unenhanced+div.answers a').find('img.media_comment_thumbnail').each(function () {\n    jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).closest('a').addClass('instructure_inline_media_comment');\n  }).end().filter('.instructure_inline_media_comment').removeClass('no-underline').mediaCommentThumbnail('normal').end().filter('.instructure_video_link, .instructure_audio_link').mediaCommentThumbnail('normal', true).end().not('.youtubed').each(handleYoutubeLink);\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()('.user_content.unenhanced').removeClass('unenhanced').addClass('enhanced');\n  setTimeout(() => {\n    jquery__WEBPACK_IMPORTED_MODULE_2___default()('.user_content form.user_content_post_form:not(.submitted)').submit().addClass('submitted');\n  }, 10); // Remove sandbox attribute from user content iframes to fix busted\n  // third-party content, like Google Drive documents.\n\n  document.querySelectorAll('.user_content iframe[sandbox=\"allow-scripts allow-forms allow-same-origin\"]').forEach(frame => {\n    frame.removeAttribute('sandbox');\n    const src = frame.src;\n    frame.src = src;\n  });\n} // we need an override control for jest since \":visible\" jQuery modifier will\n// always say false there\n\nenhanceUserContent.ANY_VISIBILITY = {};\nfunction formatTimeAgoTitle(date) {\n  const fudgedDate = jquery__WEBPACK_IMPORTED_MODULE_2___default.a.fudgeDateForProfileTimezone(date);\n  return fudgedDate.toString('MMM d, yyyy h:mmtt');\n}\nfunction formatTimeAgoDate(date) {\n  if (typeof date === 'string') {\n    date = Date.parse(date);\n  }\n\n  const diff = new Date() - date;\n\n  if (diff < 24 * 3600 * 1000) {\n    if (diff < 3600 * 1000) {\n      if (diff < 60 * 1000) {\n        return I18n.t('#time.less_than_a_minute_ago', 'less than a minute ago');\n      } else {\n        const minutes = parseInt(diff / (60 * 1000), 10);\n        return I18n.t('#time.count_minutes_ago', {\n          one: '1 minute ago',\n          other: '%{count} minutes ago'\n        }, {\n          count: minutes\n        });\n      }\n    } else {\n      const hours = parseInt(diff / (3600 * 1000), 10);\n      return I18n.t('#time.count_hours_ago', {\n        one: '1 hour ago',\n        other: '%{count} hours ago'\n      }, {\n        count: hours\n      });\n    }\n  } else {\n    return formatTimeAgoTitle(date);\n  }\n}\n\nfunction retriggerEarlyClicks() {\n  // handle all of the click events that were triggered before the dom was ready (and thus weren't handled by jquery listeners)\n  if (window._earlyClick) {\n    // unset the onclick handler we were using to capture the events\n    document.removeEventListener('click', window._earlyClick);\n\n    if (window._earlyClick.clicks) {\n      // wait to fire the \"click\" events till after all of the event hanlders loaded at dom ready are initialized\n      setTimeout(function () {\n        jquery__WEBPACK_IMPORTED_MODULE_2___default.a.each(underscore__WEBPACK_IMPORTED_MODULE_3___default.a.uniq(window._earlyClick.clicks), function () {\n          // cant use .triggerHandler because it will not bubble,\n          // but we do want to preventDefault, so this is what we have to do\n          const event = jquery__WEBPACK_IMPORTED_MODULE_2___default.a.Event('click');\n          event.preventDefault();\n          jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).trigger(event);\n        });\n      }, 1);\n    }\n  }\n}\n\nfunction ellipsifyBreadcrumbs() {\n  // this next block of code adds the ellipsis on the breadcrumb if it overflows one line\n  const $breadcrumbs = jquery__WEBPACK_IMPORTED_MODULE_2___default()('#breadcrumbs');\n\n  if ($breadcrumbs.length) {\n    let $breadcrumbEllipsis;\n    let addedEllipsisClass = false; // if we ever change the styling of the breadcrumbs so their height changes, change this too. the * 1.5 part is just in case to ever handle any padding or margin.\n\n    const hightOfOneBreadcrumb = 27 * 1.5;\n    let taskID;\n\n    const resizeBreadcrumb = () => {\n      if (taskID) (window.cancelIdleCallback || window.cancelAnimationFrame)(taskID);\n      taskID = (window.requestIdleCallback || window.requestAnimationFrame)(() => {\n        let maxWidth = 500;\n        $breadcrumbEllipsis = $breadcrumbEllipsis || $breadcrumbs.find('.ellipsible');\n        $breadcrumbEllipsis.ifExists(() => {\n          $breadcrumbEllipsis.css('maxWidth', '');\n\n          for (let i = 0; $breadcrumbs.height() > hightOfOneBreadcrumb && i < 20; i++) {\n            // the i here is just to make sure we don't get into an ifinite loop somehow\n            if (!addedEllipsisClass) {\n              addedEllipsisClass = true;\n              $breadcrumbEllipsis.addClass('ellipsis');\n            }\n\n            $breadcrumbEllipsis.css('maxWidth', maxWidth -= 20);\n          }\n        });\n      });\n    };\n\n    resizeBreadcrumb(); // force it to run once right now\n\n    jquery__WEBPACK_IMPORTED_MODULE_2___default()(window).resize(resizeBreadcrumb); // end breadcrumb ellipsis\n  }\n}\n\nfunction bindKeyboardShortcutsHelpPanel() {\n  _canvas_keyboard_nav_dialog__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.bindOpenKeys.call({\n    $el: jquery__WEBPACK_IMPORTED_MODULE_2___default()('#keyboard_navigation')\n  });\n}\n\nfunction warnAboutRolesBeingSwitched() {\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()('#switched_role_type').ifExists(function () {\n    const context_class = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).attr('class');\n    const $img = jquery__WEBPACK_IMPORTED_MODULE_2___default()('<img/>');\n    let switched_roles_message = null;\n\n    switch (jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).data('role')) {\n      case 'TeacherEnrollment':\n        switched_roles_message = I18n.t('switched_roles_message.teacher', 'You have switched roles temporarily for this course, and are now viewing the course as a teacher.  You can restore your role and permissions from the course home page.');\n        break;\n\n      case 'StudentEnrollment':\n        switched_roles_message = I18n.t('switched_roles_message.student', 'You have switched roles temporarily for this course, and are now viewing the course as a student.  You can restore your role and permissions from the course home page.');\n        break;\n\n      case 'TaEnrollment':\n        switched_roles_message = I18n.t('switched_roles_message.ta', 'You have switched roles temporarily for this course, and are now viewing the course as a TA.  You can restore your role and permissions from the course home page.');\n        break;\n\n      case 'ObserverEnrollment':\n        switched_roles_message = I18n.t('switched_roles_message.observer', 'You have switched roles temporarily for this course, and are now viewing the course as an observer.  You can restore your role and permissions from the course home page.');\n        break;\n\n      case 'DesignerEnrollment':\n        switched_roles_message = I18n.t('switched_roles_message.designer', 'You have switched roles temporarily for this course, and are now viewing the course as a designer.  You can restore your role and permissions from the course home page.');\n        break;\n\n      default:\n        switched_roles_message = I18n.t('switched_roles_message.student', 'You have switched roles temporarily for this course, and are now viewing the course as a student.  You can restore your role and permissions from the course home page.');\n    }\n\n    $img.attr('src', '/images/warning.png').attr('title', switched_roles_message).css({\n      paddingRight: 2,\n      width: 12,\n      height: 12\n    });\n    jquery__WEBPACK_IMPORTED_MODULE_2___default()('#crumb_' + context_class).find('a').prepend($img);\n  });\n}\n\nfunction expandQuotedTextWhenClicked() {\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()('a.show_quoted_text_link').live('click', function (event) {\n    const $text = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).parents('.quoted_text_holder').children('.quoted_text');\n\n    if ($text.length > 0) {\n      event.preventDefault();\n      $text.show();\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).hide();\n    }\n  });\n}\n\nfunction previewEquellaContentWhenClicked() {\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()('a.equella_content_link').live('click', function (event) {\n    event.preventDefault();\n    let $dialog = jquery__WEBPACK_IMPORTED_MODULE_2___default()('#equella_preview_dialog');\n\n    if (!$dialog.length) {\n      $dialog = jquery__WEBPACK_IMPORTED_MODULE_2___default()('<div/>');\n      $dialog.attr('id', 'equella_preview_dialog').hide();\n      $dialog.html(\"<h2/><iframe style='background: url(/images/ajax-loader-medium-444.gif) no-repeat left top; width: 800px; height: 350px; border: 0;' src='about:blank' borderstyle='0'/><div style='text-align: right;'><a href='#' class='original_link external external_link' target='_blank'>\" + Object(html_escape__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(I18n.t('links.view_equella_content_in_new_window', 'view the content in a new window')) + '</a>');\n      $dialog.find('h2').text(jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).attr('title') || jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).text() || I18n.t('titles.equella_content_preview', 'Equella Content Preview'));\n      const $iframe = $dialog.find('iframe');\n      setTimeout(() => {\n        $iframe.css('background', '#fff');\n      }, 2500);\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()('body').append($dialog);\n      $dialog.dialog({\n        autoOpen: false,\n        width: 'auto',\n        resizable: false,\n        title: I18n.t('titles.equella_content_preview', 'Equella Content Preview'),\n\n        close() {\n          $dialog.find('iframe').attr('src', 'about:blank');\n        }\n\n      });\n    }\n\n    $dialog.find('.original_link').attr('href', jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).attr('href'));\n    $dialog.dialog('close').dialog('open');\n    $dialog.find('iframe').attr('src', jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).attr('href'));\n  });\n}\n\nfunction openDialogsWhenClicked() {\n  // Adds a way to automatically open dialogs by just giving them the .dialog_opener class.\n  // Uses the aria-controls attribute to specify id of dialog to open because that is already\n  // a best practice accessibility-wise (as a side note you should also add \"role=button\").\n  // You can pass in options to the dialog with the data-dialog-options attribute.\n  //\n  // Examples:\n  //\n  // <a class=\"dialog_opener\" aria-controls=\"foobar\" role=\"button\" href=\"#\">\n  // opens the dialog with id=\"foobar\"\n  //\n  // <a class=\"dialog_opener\" aria-controls=\"my_dialog\" data-dialog-opts=\"{resizable:false, width: 300}\" role=\"button\" href=\"#\">\n  // opens the .my_dialog dialog and passes the options {resizable:false, width: 300}\n  // the :not clause is to not allow users access to this functionality in their content.\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()('.dialog_opener[aria-controls]:not(.user_content *)').live('click', function (event) {\n    const link = this;\n    jquery__WEBPACK_IMPORTED_MODULE_2___default()('#' + jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).attr('aria-controls')).ifExists($dialog => {\n      event.preventDefault(); // if the linked dialog has not already been initialized, initialize it (passing in opts)\n\n      if (!$dialog.data('dialog')) {\n        $dialog.dialog(jquery__WEBPACK_IMPORTED_MODULE_2___default.a.extend({\n          autoOpen: false,\n          modal: true\n        }, jquery__WEBPACK_IMPORTED_MODULE_2___default()(link).data('dialogOpts')));\n        $dialog.fixDialogButtons();\n      }\n\n      $dialog.dialog('open');\n    });\n  });\n}\n\nfunction previewFilesWhenClicked() {\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()('a.file_preview_link, a.scribd_file_preview_link').live('click', function (event) {\n    if (event.ctrlKey || event.altKey || event.metaKey || event.shiftKey) {\n      // if any modifier keys are pressed, do the browser default thing\n      return;\n    }\n\n    event.preventDefault();\n    const $link = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this);\n\n    if ($link.attr('aria-expanded') === 'true') {\n      // close the preview by clicking the \"Minimize File Preview\" link\n      $link.parent().find('.hide_file_preview_link').click();\n      return;\n    }\n\n    $link.loadingImage({\n      image_size: 'small',\n      horizontal: 'right!'\n    });\n    $link.attr('aria-expanded', 'true');\n    jquery__WEBPACK_IMPORTED_MODULE_2___default.a.ajaxJSON($link.attr('href').replace(/\\/(download|preview)/, '') // download as part of the path\n    .replace(/wrap=1&?/, '') // wrap=1 as part of the query_string\n    .replace(/[?&]$/, ''), // any trailing chars if wrap=1 was at the end\n    'GET', {}, data => {\n      const attachment = data && data.attachment;\n      $link.loadingImage('remove');\n\n      if (attachment && (jquery__WEBPACK_IMPORTED_MODULE_2___default.a.isPreviewable(attachment.content_type, 'google') || attachment.canvadoc_session_url)) {\n        const $div = jquery__WEBPACK_IMPORTED_MODULE_2___default()(`[id=\"${$link.attr('aria-controls')}\"]`);\n        $div.css('display', 'block').loadDocPreview({\n          canvadoc_session_url: attachment.canvadoc_session_url,\n          mimeType: attachment.content_type,\n          public_url: attachment.public_url,\n          attachment_preview_processing: attachment.workflow_state === 'pending_upload' || attachment.workflow_state === 'processing'\n        });\n        const $minimizeLink = jquery__WEBPACK_IMPORTED_MODULE_2___default()('<a href=\"#\" style=\"font-size: 0.8em;\" class=\"hide_file_preview_link\">' + Object(html_escape__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(I18n.t('links.minimize_file_preview', 'Minimize File Preview')) + '</a>').click(event => {\n          event.preventDefault();\n          $link.attr('aria-expanded', 'false');\n          $link.show();\n          $link.focus();\n          $div.html('').css('display', 'none');\n          Object(_canvas_google_analytics__WEBPACK_IMPORTED_MODULE_15__[\"trackEvent\"])('hide_embedded_content', 'hide_file_preview');\n        });\n        $div.prepend($minimizeLink);\n\n        if (Object.prototype.hasOwnProperty.call(event, 'originalEvent')) {\n          // Only focus this link if the open preview link was initiated by a real browser event\n          // If it was triggered by our auto_open stuff it shouldn't focus here.\n          $minimizeLink.focus();\n        }\n\n        Object(_canvas_google_analytics__WEBPACK_IMPORTED_MODULE_15__[\"trackEvent\"])('show_embedded_content', 'show_file_preview');\n      }\n    }, () => {\n      $link.loadingImage('remove').hide();\n    });\n  });\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()('a.preview_in_overlay').live('click', event => {\n    var _event$currentTarget, _target;\n\n    let target = null;\n\n    if (event.target.href) {\n      target = event.target;\n    } else if ((_event$currentTarget = event.currentTarget) !== null && _event$currentTarget !== void 0 && _event$currentTarget.href) {\n      target = event.currentTarget;\n    }\n\n    const matches = (_target = target) === null || _target === void 0 ? void 0 : _target.href.match(/\\/files\\/(\\d+)/);\n\n    if (matches) {\n      if (event.ctrlKey || event.altKey || event.metaKey || event.shiftKey) {\n        // if any modifier keys are pressed, do the browser default thing\n        return;\n      }\n\n      event.preventDefault();\n      const url = new URL(target.href);\n      const verifier = url === null || url === void 0 ? void 0 : url.searchParams.get('verifier');\n      const file_id = matches[1];\n      Promise.all(/*! import() */[__webpack_require__.e(22), __webpack_require__.e(42), __webpack_require__.e(52), __webpack_require__.e(59), __webpack_require__.e(78), __webpack_require__.e(3715)]).then(__webpack_require__.bind(null, /*! ../react/showFilePreview */ \"xTOM\")).then(module => {\n        module.showFilePreview(file_id, verifier);\n      }).catch(_err => {\n        jquery__WEBPACK_IMPORTED_MODULE_2___default.a.flashError(I18n.t('Something went wrong loading the file previewer.'));\n      });\n    }\n  });\n}\n\nfunction enhanceUserContentWhenAsked() {\n  // publishing the 'userContent/change' will run enhanceUserContent at most once every 50ms\n  let enhanceUserContentTimeout;\n  jquery__WEBPACK_IMPORTED_MODULE_2___default.a.subscribe('userContent/change', () => {\n    clearTimeout(enhanceUserContentTimeout);\n    enhanceUserContentTimeout = setTimeout(enhanceUserContent, 50);\n  });\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()(document).bind('user_content_change', enhanceUserContent);\n}\n\nfunction enhanceUserContentRepeatedly() {\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()(() => {\n    setInterval(enhanceUserContent, 15000);\n    setTimeout(enhanceUserContent, 15);\n  });\n} // app/views/discussion_topics/_entry.html.erb\n\n\nfunction showDiscussionTopicSubMessagesWhenClicked() {\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()('.show_sub_messages_link').click(function (event) {\n    event.preventDefault();\n    jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).parents('.subcontent').find('.communication_sub_message.toggled_communication_sub_message').removeClass('toggled_communication_sub_message');\n    jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).parents('.communication_sub_message').remove();\n  });\n} // app/views/discussion_topics/_entry.html.erb\n\n\nfunction addDiscussionTopicEntryWhenClicked() {\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()('.communication_message .add_entry_link').click(function (event) {\n    event.preventDefault();\n    const $message = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).parents('.communication_message');\n    const $reply = $message.find('.reply_message').hide();\n    const $response = $message.find('.communication_sub_message.blank').clone(true).removeClass('blank');\n    $reply.before($response.show());\n\n    const id = underscore__WEBPACK_IMPORTED_MODULE_3___default.a.uniqueId('textarea_');\n\n    $response.find('textarea.rich_text').attr('id', id);\n    jquery__WEBPACK_IMPORTED_MODULE_2___default()(document).triggerHandler('richTextStart', jquery__WEBPACK_IMPORTED_MODULE_2___default()('#' + id));\n    $response.find('textarea:first').focus().select();\n  });\n}\n\nfunction showAndHideRCEWhenAsked() {\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()(document).bind('richTextStart', (event, $editor) => {\n    if (!$editor || $editor.length === 0) {\n      return;\n    }\n\n    $editor = jquery__WEBPACK_IMPORTED_MODULE_2___default()($editor);\n\n    if (!$editor || $editor.length === 0) {\n      return;\n    }\n\n    _canvas_rce_RichContentEditor__WEBPACK_IMPORTED_MODULE_7__[\"default\"].loadNewEditor($editor, {\n      focus: true\n    });\n  }).bind('richTextEnd', (event, $editor) => {\n    if (!$editor || $editor.length === 0) {\n      return;\n    }\n\n    $editor = jquery__WEBPACK_IMPORTED_MODULE_2___default()($editor);\n\n    if (!$editor || $editor.length === 0) {\n      return;\n    }\n\n    _canvas_rce_RichContentEditor__WEBPACK_IMPORTED_MODULE_7__[\"default\"].destroyRCE($editor);\n  });\n}\n\nfunction doThingsWhenDiscussionTopicSubMessageIsPosted() {\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()('.communication_sub_message .add_sub_message_form').formSubmit({\n    beforeSubmit(_data) {\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).find('button').attr('disabled', true);\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).find('.submit_button').text(I18n.t('status.posting_message', 'Posting Message...'));\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).loadingImage();\n    },\n\n    success(data) {\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).loadingImage('remove');\n      const $message = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).parents('.communication_sub_message');\n\n      if (jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).hasClass('submission_comment_form')) {\n        const user_id = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).getTemplateData({\n          textValues: ['submission_user_id']\n        }).submission_user_id;\n        let submission = null;\n\n        for (const idx in data) {\n          const s = data[idx].submission;\n\n          if (s.user_id == user_id) {\n            submission = s;\n          }\n        }\n\n        if (submission) {\n          const comment = submission.submission_comments[submission.submission_comments.length - 1].submission_comment;\n          comment.post_date = jquery__WEBPACK_IMPORTED_MODULE_2___default.a.datetimeString(comment.created_at);\n          comment.message = comment.formatted_body || comment.comment;\n          $message.fillTemplateData({\n            data: comment,\n            htmlValues: ['message']\n          });\n        }\n      } else {\n        const entry = data.discussion_entry;\n        entry.post_date = jquery__WEBPACK_IMPORTED_MODULE_2___default.a.datetimeString(entry.created_at);\n        $message.find('.content > .message_html').val(entry.message);\n        $message.fillTemplateData({\n          data: entry,\n          htmlValues: ['message']\n        });\n      }\n\n      $message.find('.message').show();\n      $message.find('.user_content').removeClass('enhanced');\n      $message.parents('.communication_message').find('.reply_message').removeClass('lonely_behavior_message').show();\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(document).triggerHandler('richTextEnd', jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).find('textarea.rich_text'));\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(document).triggerHandler('user_content_change');\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).remove();\n\n      if (window.location.href.match(/dashboard/)) {\n        Object(_canvas_google_analytics__WEBPACK_IMPORTED_MODULE_15__[\"trackEvent\"])('dashboard_comment', 'create');\n      }\n    },\n\n    error(data) {\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).loadingImage('remove');\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).find('button').attr('disabled', false);\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).find('.submit_button').text(I18n.t('errors.posting_message_failed', 'Post Failed, Try Again'));\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).formErrors(data);\n    }\n\n  });\n}\n\nfunction cancelDiscussionTopicSubMessageWhenClicked() {\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()('.communication_sub_message form .cancel_button').click(function () {\n    const $form = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).parents('.communication_sub_message');\n    const $message = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).parents('.communication_message');\n    jquery__WEBPACK_IMPORTED_MODULE_2___default()(document).triggerHandler('richTextEnd', $form.find('textarea.rich_text'));\n    $form.remove();\n    $message.find('.reply_message').show();\n  });\n}\n\nfunction highlightDiscussionTopicMessagesOnHover() {\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()('.communication_message,.communication_sub_message').bind('focusin mouseenter', function () {\n    jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).addClass('communication_message_hover');\n  }).bind('focusout mouseleave', function () {\n    jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).removeClass('communication_message_hover');\n  });\n}\n\nfunction makeDatesPretty() {\n  // vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv\n  // vvvvvvvvvvvvvvvvv BEGIN stuf form making pretty dates vvvvvvvvvvvvvvvvvv\n  // vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv\n  let timeAgoEvents = [];\n\n  function timeAgoRefresh() {\n    timeAgoEvents = [...document.querySelectorAll('.time_ago_date')].filter(jquery__WEBPACK_IMPORTED_MODULE_2___default.a.expr.filters.visible);\n    processNextTimeAgoEvent();\n  }\n\n  function processNextTimeAgoEvent() {\n    const eventElement = timeAgoEvents.shift();\n\n    if (eventElement) {\n      const $event = jquery__WEBPACK_IMPORTED_MODULE_2___default()(eventElement),\n            date = $event.data('parsed_date') || Date.parse($event.data('timestamp') || '');\n\n      if (date) {\n        $event.data('timestamp', date.toISOString());\n        $event.data('parsed_date', date);\n        $event.text(formatTimeAgoDate(date));\n        $event.attr('title', formatTimeAgoTitle(date));\n      }\n\n      setTimeout(processNextTimeAgoEvent, 1);\n    } else {\n      setTimeout(timeAgoRefresh, 60000);\n    }\n  }\n\n  setTimeout(timeAgoRefresh, 100); // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  // ^^^^^^^^^^^^^^^^^^ END stuff for making pretty dates ^^^^^^^^^^^^^^^^^^^\n  // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n}\n\nfunction doThingsToModuleSequenceFooter() {\n  const sf = jquery__WEBPACK_IMPORTED_MODULE_2___default()('#sequence_footer');\n\n  if (sf.length) {\n    const el = jquery__WEBPACK_IMPORTED_MODULE_2___default()(sf[0]);\n    Promise.all(/*! import() */[__webpack_require__.e(31), __webpack_require__.e(85), __webpack_require__.e(3677)]).then(__webpack_require__.bind(null, /*! @canvas/module-sequence-footer */ \"fY8A\")).then(() => {\n      el.moduleSequenceFooter({\n        courseID: el.attr('data-course-id'),\n        assetType: el.attr('data-asset-type'),\n        assetID: el.attr('data-asset-id')\n      });\n    });\n  }\n}\n\nfunction showHideRemoveThingsToRightSideMoreLinksWhenClicked() {\n  // this is for things like the to-do, recent items and upcoming, it\n  // happend a lot so rather than duplicating it everywhere I stuck it here\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()('#right-side').delegate('.more_link', 'click', function (event) {\n    const $this = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this);\n    const $children = $this.parents('ul').children(':hidden').show();\n    $this.closest('li').remove(); // if they are using the keyboard to navigate (they hit enter on the link instead of actually\n    // clicking it) then put focus on the first of the now-visible items--otherwise, since the\n    // .more_link is hidden, focus would be completely lost and leave a blind person stranded.\n    // don't want to set focus if came from a mouse click because then you'd have 2 of the tooltip\n    // bubbles staying visible, see #9211\n\n    if (event.screenX === 0) {\n      $children.first().find(':tabbable:first').focus();\n    }\n\n    return false;\n  });\n}\n\nfunction confirmAndDeleteRightSideTodoItemsWhenClicked() {\n  jquery__WEBPACK_IMPORTED_MODULE_2___default()('#right-side').on('click', '.disable-todo-item-link', function (event) {\n    event.preventDefault();\n    const $item = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).parents('li, div.topic_message').last();\n    const $prevItem = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).closest('.to-do-list > li').prev();\n    const toFocus = $prevItem.find('.disable-todo-item-link').length && $prevItem.find('.disable-todo-item-link') || jquery__WEBPACK_IMPORTED_MODULE_2___default()('.todo-list-header');\n    const url = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).data('api-href');\n    const flashMessage = jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).data('flash-message');\n\n    function remove(delete_url) {\n      $item.confirmDelete({\n        url: delete_url,\n        noMessage: true,\n\n        success() {\n          if (flashMessage) {\n            jquery__WEBPACK_IMPORTED_MODULE_2___default.a.flashMessage(flashMessage);\n          }\n\n          jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).slideUp(function () {\n            jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).remove();\n            toFocus.focus();\n          });\n        }\n\n      });\n    }\n\n    remove(url);\n  });\n}\n\nfunction makeAllExternalLinksExternalLinks() {\n  // in 100ms (to give time for everything else to load), find all the external links and add give them\n  // the external link look and behavior (force them to open in a new tab)\n  setTimeout(function () {\n    const content = document.getElementById('content');\n    if (!content) return;\n    const links = content.querySelectorAll(`a[href*=\"//\"]:not([href*=\"${window.location.hostname}\"])`); // technique for finding \"external\" links copied from https://davidwalsh.name/external-links-css\n\n    for (let i = 0; i < links.length; i++) {\n      const $link = jquery__WEBPACK_IMPORTED_MODULE_2___default()(links[i]); // don't mess with the ones that were already processed in enhanceUserContent\n\n      if ($link.hasClass('external')) continue;\n      const $linkToReplace = $link.not('.open_in_a_new_tab').not(':has(img)').not('.not_external').not('.exclude_external_icon');\n\n      if ($linkToReplace.length) {\n        const indicatorText = I18n.t('titles.external_link', 'Links to an external site.');\n        const $linkIndicator = jquery__WEBPACK_IMPORTED_MODULE_2___default()('<span class=\"ui-icon ui-icon-extlink ui-icon-inline\"/>').attr('title', indicatorText);\n        $linkIndicator.append(jquery__WEBPACK_IMPORTED_MODULE_2___default()('<span class=\"screenreader-only\"/>').text(indicatorText));\n        $linkToReplace.addClass('external').children('span.ui-icon-extlink').remove().end().html('<span>' + $link.html() + '</span>').attr('target', '_blank').attr('rel', 'noreferrer noopener').append($linkIndicator);\n      }\n    }\n  }, 100);\n}\n\nfunction enhanceTheEntireUniverse() {\n  retriggerEarlyClicks();\n  ellipsifyBreadcrumbs();\n  bindKeyboardShortcutsHelpPanel();\n  warnAboutRolesBeingSwitched();\n  expandQuotedTextWhenClicked();\n  previewEquellaContentWhenClicked();\n  openDialogsWhenClicked();\n  previewFilesWhenClicked();\n  enhanceUserContentWhenAsked();\n  enhanceUserContentRepeatedly();\n  showDiscussionTopicSubMessagesWhenClicked();\n  addDiscussionTopicEntryWhenClicked();\n  showAndHideRCEWhenAsked();\n  doThingsWhenDiscussionTopicSubMessageIsPosted();\n  cancelDiscussionTopicSubMessageWhenClicked();\n  highlightDiscussionTopicMessagesOnHover();\n  makeDatesPretty();\n  doThingsToModuleSequenceFooter();\n  showHideRemoveThingsToRightSideMoreLinksWhenClicked();\n  confirmAndDeleteRightSideTodoItemsWhenClicked();\n  makeAllExternalLinksExternalLinks();\n}\n\n//# sourceURL=webpack:///./ui/shared/enhanced-user-content/jquery/index.js?");

/***/ }),

/***/ "6NVu":
/*!***********************************!*\
  !*** ./packages/deparam/index.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return deparam; });\n/* harmony import */ var obj_unflatten__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! obj-unflatten */ \"IxAH\");\n//\n// Copyright (C) 2012 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n// an extraction of the deparam method from Ben Alman's jQuery BBQ\n// http://benalman.com/projects/jquery-bbq-plugin/\n\n\n\nconst coerceTypes = {\n  true: true,\n  false: false,\n  null: null\n}\n\nfunction deparam(params, coerce) {\n  // shortcut for just deparam'ing the current querystring\n  if (!params || typeof params === 'boolean') {\n    const currentQueryString = window.location.search\n    if (!currentQueryString) return {}\n    return deparam(currentQueryString, ...arguments)\n  }\n\n  const obj = {}\n  params\n    .replace(/\\+/g, ' ')\n    .split('&')\n    .forEach(param => {\n      let [key, val] = param.split('=')\n      key = decodeURIComponent(key)\n      val = decodeURIComponent(val)\n\n      // coerce values.\n      if (coerce) {\n        val =\n          val && !isNaN(val)\n            ? +val // number\n            : val === 'undefined'\n            ? undefined // undefined\n            : coerceTypes[val] !== undefined\n            ? coerceTypes[val] // true, false, null\n            : val // string\n      }\n\n      obj[key] = val\n    })\n\n  return Object(obj_unflatten__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(obj)\n}\n\n\n//# sourceURL=webpack:///./packages/deparam/index.js?");

/***/ }),

/***/ "897F":
/*!***************************************************!*\
  !*** ./ui/shared/util/jquery/fixDialogButtons.js ***!
  \***************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prevent_default__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prevent-default */ \"qqwe\");\n/* harmony import */ var jqueryui_dialog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jqueryui/dialog */ \"ESjL\");\n//\n// Copyright (C) 2012 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.fixDialogButtons = function () {\n  return this.each(function () {\n    const $dialog = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n    const $buttons = $dialog.find('.button-container:last .btn, button[type=submit]');\n\n    if ($buttons.length) {\n      $dialog.find('.button-container:last, button[type=submit]').hide();\n      let buttons = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.map($buttons.toArray(), button => {\n        const $button = jquery__WEBPACK_IMPORTED_MODULE_0___default()(button);\n        let classes = $button.attr('class') || '';\n        const id = $button.attr('id'); // if you add the class 'dialog_closer' to any of the buttons,\n        // clicking it will cause the dialog to close\n\n        if ($button.is('.dialog_closer')) {\n          $button.off('.fixdialogbuttons');\n          $button.on('click.fixdialogbuttons', Object(prevent_default__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(() => $dialog.dialog('close')));\n        }\n\n        if ($button.prop('type') === 'submit' && $button[0].form) {\n          classes += ' button_type_submit';\n        }\n\n        return {\n          text: $button.text(),\n          'data-text-while-loading': $button.data('textWhileLoading'),\n          click: () => $button.click(),\n          class: classes,\n          id\n        };\n      }); // put the primary button(s) on the far right\n\n      buttons = underscore__WEBPACK_IMPORTED_MODULE_1___default.a.sortBy(buttons, button => button.class.match(/btn-primary/) ? 1 : 0);\n      $dialog.dialog('option', 'buttons', buttons);\n    }\n  });\n};\n\n//# sourceURL=webpack:///./ui/shared/util/jquery/fixDialogButtons.js?");

/***/ }),

/***/ "BrAc":
/*!**********************************!*\
  !*** ./ui/shared/axios/index.js ***!
  \**********************************/
/*! exports provided: AxiosPromise, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"vDqi\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"AxiosPromise\", function() { return axios__WEBPACK_IMPORTED_MODULE_0__[\"AxiosPromise\"]; });\n\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n // Add CSRF stuffs to make Canvas happy when we are making requests with axios\n\naxios__WEBPACK_IMPORTED_MODULE_0___default.a.defaults.xsrfCookieName = '_csrf_token';\naxios__WEBPACK_IMPORTED_MODULE_0___default.a.defaults.xsrfHeaderName = 'X-CSRF-Token'; // Handle stringified IDs for JSON responses\n\nconst originalDefaults = axios__WEBPACK_IMPORTED_MODULE_0___default.a.defaults.headers.common.Accept;\naxios__WEBPACK_IMPORTED_MODULE_0___default.a.defaults.headers.common.Accept = 'application/json+canvas-string-ids, ' + originalDefaults; // Rails checks this header to decide if a request is an xhr request\n\naxios__WEBPACK_IMPORTED_MODULE_0___default.a.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\n/* harmony default export */ __webpack_exports__[\"default\"] = (axios__WEBPACK_IMPORTED_MODULE_0___default.a);\n\n//# sourceURL=webpack:///./ui/shared/axios/index.js?");

/***/ }),

/***/ "Fxmq":
/*!*******************************************************************!*\
  !*** ./ui/shared/keyboard-nav-dialog/backbone/views/index.coffee ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n */ \"HGxv\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/backbone */ \"mX+G\");\n/* harmony import */ var _canvas_backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_canvas_backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var jqueryui_dialog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jqueryui/dialog */ \"ESjL\");\nvar I18n, KeyboardNavDialog,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\n\n\n\n\n\n\n\n\nI18n = Object(_canvas_i18n__WEBPACK_IMPORTED_MODULE_0__[\"useScope\"])('KeyboardNavDialog');\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (KeyboardNavDialog = (function(superClass) {\n  extend(KeyboardNavDialog, superClass);\n\n  function KeyboardNavDialog() {\n    return KeyboardNavDialog.__super__.constructor.apply(this, arguments);\n  }\n\n  KeyboardNavDialog.prototype.el = '#keyboard_navigation';\n\n  KeyboardNavDialog.prototype.initialize = function() {\n    KeyboardNavDialog.__super__.initialize.apply(this, arguments);\n    this.bindOpenKeys;\n    return this;\n  };\n\n  KeyboardNavDialog.prototype.render = function(html) {\n    this.$el.html(html);\n    return this;\n  };\n\n  KeyboardNavDialog.prototype.bindOpenKeys = function() {\n    var activeElement;\n    activeElement = null;\n    return jquery__WEBPACK_IMPORTED_MODULE_2___default()(document).keydown((function(_this) {\n      return function(e) {\n        var isQuestionMark;\n        isQuestionMark = e.keyCode === 191 && e.shiftKey;\n        if (isQuestionMark && !jquery__WEBPACK_IMPORTED_MODULE_2___default()(e.target).is(\":input\") && !ENV.disable_keyboard_shortcuts) {\n          e.preventDefault();\n          if (_this.$el.is(\":visible\")) {\n            _this.$el.dialog(\"close\");\n            if (activeElement) {\n              return jquery__WEBPACK_IMPORTED_MODULE_2___default()(activeElement).focus();\n            }\n          } else {\n            activeElement = document.activeElement;\n            return _this.$el.dialog({\n              title: I18n.t('titles.keyboard_shortcuts', \"Keyboard Shortcuts\"),\n              width: 400,\n              height: \"auto\",\n              close: function() {\n                jquery__WEBPACK_IMPORTED_MODULE_2___default()(\"li\", this).attr(\"tabindex\", \"\");\n                if (activeElement) {\n                  return jquery__WEBPACK_IMPORTED_MODULE_2___default()(activeElement).focus();\n                }\n              }\n            });\n          }\n        }\n      };\n    })(this));\n  };\n\n  return KeyboardNavDialog;\n\n})(_canvas_backbone__WEBPACK_IMPORTED_MODULE_1__[\"View\"]));\n\n\n//# sourceURL=webpack:///./ui/shared/keyboard-nav-dialog/backbone/views/index.coffee?");

/***/ }),

/***/ "IxAH":
/*!*****************************************!*\
  !*** ./packages/obj-unflatten/index.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return unflatten; });\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_0__);\n//\n// Copyright (C) 2012 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n// turns {'foo[bar]': 1} into {foo: {bar: 1}}\nfunction unflatten(obj) {\n  return underscore__WEBPACK_IMPORTED_MODULE_0___default()(obj).reduce((newObj, val, key) => {\n    let keys = key.split('][')\n    let lastKey = keys.length - 1\n\n    // If the first keys part contains [ and the last ends with ], then []\n    // are correctly balanced.\n    if (/\\[/.test(keys[0]) && /\\]$/.test(keys[lastKey])) {\n      // Remove the trailing ] from the last keys part.\n      keys[lastKey] = keys[lastKey].replace(/\\]$/, '')\n\n      // Split first keys part into two parts on the [ and add them back onto\n      // the beginning of the keys array.\n      keys = keys\n        .shift()\n        .split('[')\n        .concat(keys)\n      lastKey = keys.length - 1\n    } else {\n      // Basic 'foo' style key.\n      lastKey = 0\n    }\n\n    if (lastKey) {\n      // Complex key, build deep object structure based on a few rules:\n      // * The 'cur' pointer starts at the object top-level.\n      // * [] = array push (n is set to array length), [n] = array if n is\n      //   numeric, otherwise object.\n      // * If at the last keys part, set the value.\n      // * For each keys part, if the current level is undefined create an\n      //   object or array based on the type of the next keys part.\n      // * Move the 'cur' pointer to the next level.\n      // * Rinse & repeat.\n      let i = 0\n      let cur = newObj\n      while (i <= lastKey) {\n        key = keys[i] === '' ? cur.length : keys[i]\n\n        cur = cur[key] =\n          i < lastKey ? cur[key] || (keys[i + 1] && isNaN(keys[i + 1]) ? {} : []) : val\n        i++\n      }\n    } else {\n      // Simple key, even simpler rules, since only scalars and shallow\n      // arrays are allowed.\n\n      if (underscore__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(newObj[key])) {\n        // val is already an array, so push on the next value.\n        newObj[key].push(val)\n      } else if (newObj[key] != null) {\n        // val isn't an array, but since a second value has been specified,\n        // convert val into an array.\n        newObj[key] = [newObj[key], val]\n      } else {\n        // val is a scalar.\n        newObj[key] = val\n      }\n    }\n\n    return newObj\n  }, Object.create(null))\n}\n\n\n//# sourceURL=webpack:///./packages/obj-unflatten/index.js?");

/***/ }),

/***/ "TvTI":
/*!****************************************!*\
  !*** ./ui/shared/util/templateData.js ***!
  \****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var html_escape__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! html-escape */ \"gI0r\");\n/* harmony import */ var _canvas_jquery_jquery_instructure_misc_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/jquery/jquery.instructure_misc_helpers */ \"8JEM\");\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n/* replaceTags */\n// Fills the selected object(s) with data values as specified.  Plaintext values should be specified in the\n//  data: data used to fill template.\n//  id: set the id attribute of the template object\n//  textValues: a list of strings, which values should be plaintext\n//  htmlValues: a list of strings, which values should be html\n//  hrefValues: List of string.  Searches for all anchor tags in the template\n//    and globally replaces \"{{ value }}\" with data[value].  Useful for adding\n//    new elements asynchronously, when you don't know what their URL will be\n//    until they're created.\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.fillTemplateData = function (options) {\n  if (this.length && options) {\n    if (options.iterator) {\n      //  todo: replace .andSelf with .addBack when JQuery is upgraded.\n      this.find('*').andSelf().each(function () {\n        const $el = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n        jquery__WEBPACK_IMPORTED_MODULE_0___default.a.each(['name', 'id', 'class'], (i, attr) => {\n          if ($el.attr(attr)) {\n            $el.attr(attr, $el.attr(attr).replace(/-iterator-/, options.iterator));\n          }\n        });\n      });\n    }\n\n    if (options.id) {\n      this.attr('id', options.id);\n    }\n\n    let contentChange = false;\n\n    if (options.data) {\n      for (var item in options.data) {\n        if (options.except && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(item, options.except) != -1) {\n          continue;\n        }\n\n        if (options.data[item] && options.dataValues && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(item, options.dataValues) != -1) {\n          this.data(item, options.data[item].toString());\n        }\n\n        const $found_all = this.find('.' + item);\n        var avoid = options.avoid || '';\n        $found_all.each(function () {\n          const $found = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);\n\n          if ($found.length > 0 && $found.closest(avoid).length === 0) {\n            if (typeof options.data[item] === 'undefined' || options.data[item] === null) {\n              options.data[item] = '';\n            }\n\n            if (options.htmlValues && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(item, options.htmlValues) != -1) {\n              $found.html(jquery__WEBPACK_IMPORTED_MODULE_0___default.a.raw(options.data[item].toString()));\n\n              if ($found.hasClass('user_content')) {\n                contentChange = true;\n                $found.removeClass('enhanced');\n                $found.data('unenhanced_content_html', options.data[item].toString());\n              }\n            } else if ($found[0].tagName.toUpperCase() == 'INPUT') {\n              $found.val(options.data[item]);\n            } else {\n              try {\n                const str = options.data[item].toString();\n                $found.html(Object(html_escape__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(str));\n              } catch (e) {}\n            }\n          }\n        });\n      }\n    }\n\n    if (options.hrefValues && options.data) {\n      this.find('a,span[rel]').each(function () {\n        let $obj = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this),\n            oldHref,\n            oldRel,\n            oldName;\n\n        for (const i in options.hrefValues) {\n          if (!options.hrefValues.hasOwnProperty(i)) {\n            continue;\n          }\n\n          const name = options.hrefValues[i];\n\n          if (oldHref = $obj.attr('href')) {\n            const newHref = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.replaceTags(oldHref, name, encodeURIComponent(options.data[name]));\n            const orig = $obj.text() === $obj.html() ? $obj.text() : null;\n\n            if (oldHref !== newHref) {\n              $obj.attr('href', newHref);\n\n              if (orig) {\n                $obj.text(orig);\n              }\n            }\n          }\n\n          if (oldRel = $obj.attr('rel')) {\n            $obj.attr('rel', jquery__WEBPACK_IMPORTED_MODULE_0___default.a.replaceTags(oldRel, name, options.data[name]));\n          }\n\n          if (oldName = $obj.attr('name')) {\n            $obj.attr('name', jquery__WEBPACK_IMPORTED_MODULE_0___default.a.replaceTags(oldName, name, options.data[name]));\n          }\n        }\n      });\n    }\n\n    if (contentChange) {\n      jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).triggerHandler('user_content_change');\n    }\n  }\n\n  return this;\n};\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.fillTemplateData.defaults = {\n  htmlValues: null,\n  hrefValues: null\n}; // Reverse version of fillTemplateData.  Lets you pull out the string versions of values held in divs, spans, etc.\n// Based on the usage of class names within an object to specify an object's sub-parts.\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.getTemplateData = function (options) {\n  if (!this.length || !options) {\n    return {};\n  }\n\n  var result = {},\n      item,\n      val;\n\n  if (options.textValues) {\n    const _this = this;\n\n    options.textValues.forEach(item => {\n      const $item = _this.find('.' + item.replace(/\\[/g, '\\\\[').replace(/\\]/g, '\\\\]') + ':first');\n\n      val = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.trim($item.text());\n\n      if ($item.html() === '&nbsp;') {\n        val = '';\n      }\n\n      if (val.length === 1 && val.charCodeAt(0) === 160) {\n        val = '';\n      }\n\n      result[item] = val;\n    });\n  }\n\n  if (options.dataValues) {\n    for (item in options.dataValues) {\n      var val = this.data(options.dataValues[item]);\n\n      if (val) {\n        result[options.dataValues[item]] = val;\n      }\n    }\n  }\n\n  if (options.htmlValues) {\n    for (item in options.htmlValues) {\n      const $elem = this.find('.' + options.htmlValues[item].replace(/\\[/g, '\\\\[').replace(/\\]/g, '\\\\]') + ':first');\n      val = null;\n\n      if ($elem.hasClass('user_content') && $elem.data('unenhanced_content_html')) {\n        val = $elem.data('unenhanced_content_html');\n      } else {\n        val = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.trim($elem.html());\n      }\n\n      result[options.htmlValues[item]] = val;\n    }\n  }\n\n  return result;\n};\n\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.getTemplateValue = function (value, options) {\n  const opts = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.extend({}, options, {\n    textValues: [value]\n  });\n  return this.getTemplateData(opts)[value];\n};\n\n//# sourceURL=webpack:///./ui/shared/util/templateData.js?");

/***/ }),

/***/ "XKWA":
/*!*********************************************!*\
  !*** ./packages/jquery-tinypubsub/index.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*!\n * jQuery Tiny Pub/Sub - v0.6 - 1/10/2011\n * http://benalman.com/\n *\n * Copyright (c) 2010 \"Cowboy\" Ben Alman\n * Dual licensed under the MIT and GPL licenses.\n * http://benalman.com/about/license/\n */\n\nconst $ = __webpack_require__(/*! jquery */ \"ouhR\")\n\n  // Create a \"dummy\" jQuery object on which to bind, unbind and trigger event\n  // handlers. Note that $({}) works in jQuery 1.4.3+.\n  var o = $({}), subscribe, unsubscribe, publish;\n\n  // Subscribe to a topic. Works just like bind, except the passed handler\n  // is wrapped in a function so that the event object can be stripped out.\n  // Even though the event object might be useful, it is unnecessary and\n  // will only complicate things in the future should the user decide to move\n  // to a non-$.event-based pub/sub implementation.\n  $.subscribe = subscribe = function( topic, fn ) {\n    if ($.isPlainObject(topic)) {\n      return $.each(topic, function(topic, fn) {\n        subscribe(topic, fn);\n      });\n    }\n    // Call fn, stripping out the 1st argument (the event object).\n    function wrapper() {\n      return fn.apply( this, Array.prototype.slice.call( arguments, 1 ) );\n    }\n\n    // Add .guid property to function to allow it to be easily unbound. Note\n    // that $.guid is new in jQuery 1.4+, and $.event.guid was used before.\n    wrapper.guid = fn.guid = fn.guid || $.guid++;\n\n    // Bind the handler.\n    o.bind( topic, wrapper );\n  };\n\n  // Unsubscribe from a topic. Works exactly like unbind.\n  $.unsubscribe = unsubscribe = function() {\n    o.unbind.apply( o, arguments );\n  };\n\n  // Publish a topic. Works exactly like trigger.\n  $.publish = publish = function() {\n    o.trigger.apply( o, arguments );\n  };\n\n  module.exports = {\n    subscribe: subscribe,\n    unsubscribe: unsubscribe,\n    publish: publish\n  };\n\n\n\n//# sourceURL=webpack:///./packages/jquery-tinypubsub/index.js?");

/***/ }),

/***/ "bbn0":
/*!******************************************************************!*\
  !*** ./ui/shared/media-comments/jquery/mediaCommentThumbnail.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas_i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n */ \"HGxv\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"Y/W1\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var html_escape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! html-escape */ \"gI0r\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var deparam__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! deparam */ \"6NVu\");\n//\n// Copyright (C) 2011 - present Instructure, Inc.\n//\n// This file is part of Canvas.\n//\n// Canvas is free software: you can redistribute it and/or modify it under\n// the terms of the GNU Affero General Public License as published by the Free\n// Software Foundation, version 3 of the License.\n//\n// Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n// A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n// details.\n//\n// You should have received a copy of the GNU Affero General Public License along\n// with this program. If not, see <http://www.gnu.org/licenses/>.\n\n\n\n\n\nconst I18n = Object(_canvas_i18n__WEBPACK_IMPORTED_MODULE_0__[\"useScope\"])('mediaCommentThumbnail');\nconst MEDIA_COMMENT_THUMBNAIL_SIZES = {\n  normal: {\n    width: 140,\n    height: 100\n  },\n  small: {\n    width: 70,\n    height: 50\n  }\n};\n\nfunction createMediaCommentThumbnail(elem, size, keepOriginalText) {\n  if (!INST.kalturaSettings) return console.log('Kaltura has not been enabled for this account');\n  let idAttr, url;\n  const $link = jquery__WEBPACK_IMPORTED_MODULE_3___default()(elem);\n\n  try {\n    const a = document.createElement('a');\n    a.href = $link.attr('href');\n    url = a;\n  } catch (error) {}\n\n  if (url && Object(deparam__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(url.search).no_preview) return;\n  const dimensions = MEDIA_COMMENT_THUMBNAIL_SIZES[size] || MEDIA_COMMENT_THUMBNAIL_SIZES.normal;\n  const id = $link.data('media_comment_id') || jquery__WEBPACK_IMPORTED_MODULE_3___default.a.trim($link.find('.media_comment_id:first').text()) || (idAttr = $link.attr('id')) && idAttr.match(/^media_comment_/) && idAttr.substring(14) || jquery__WEBPACK_IMPORTED_MODULE_3___default.a.trim($link.parent().find('.media_comment_id:first').text());\n  const authorName = $link.data('author');\n  const createdAt = $link.data('created_at');\n  let altText;\n\n  if (authorName && createdAt) {\n    altText = I18n.t('Play media comment by %{name} from %{createdAt}.', {\n      name: authorName,\n      createdAt\n    });\n  } else {\n    altText = I18n.t('Play media comment.');\n  }\n\n  if (id) {\n    const domain = `https://${INST.kalturaSettings.resource_domain}`;\n    const backgroundUrl = `${domain}/p/${INST.kalturaSettings.partner_id}/thumbnail/entry_id/${id}/width/` + `${dimensions.width}/height/${dimensions.height}/bgcolor/000000/type/2/vid_sec/5`;\n    const $thumbnail = jquery__WEBPACK_IMPORTED_MODULE_3___default()(`<span\n        style='background-image: url(${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(backgroundUrl)});'\n        class='media_comment_thumbnail media_comment_thumbnail-${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(size)}'\n      >\n        <span class='media_comment_thumbnail_play_button'>\n          <span class='screenreader-only'>\n            ${Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(altText)}\n          </span>\n        </span>\n      </span>`);\n    const $p = $link.closest('p');\n\n    if (!$p.attr('title')) {\n      $p.attr('title', Object(html_escape__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(altText));\n    }\n\n    let $a = $link;\n\n    if (keepOriginalText) {\n      $a = $link.clone().empty().removeClass('instructure_file_link');\n      const $holder = $link.parent('.instructure_file_link_holder');\n\n      if ($holder.length) {\n        $a.appendTo($holder);\n      } else {\n        $link.after($a);\n      }\n    } else {\n      $link.empty();\n    }\n\n    $a.data('download', $a.attr('href')).prop('href', '#').addClass('instructure_inline_media_comment').append($thumbnail).css({\n      backgroundImage: '',\n      padding: 0\n    });\n  }\n} // public API\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (jquery__WEBPACK_IMPORTED_MODULE_3___default.a.fn.mediaCommentThumbnail = function (size = 'normal', keepOriginalText) {\n  return this.each(function () {\n    // defer each thumbnail generation till the next time through the event loop to not kill browser rendering,\n    // has the effect of saying \"only work on thumbnailing these while the browser is not doing something else\"\n    underscore__WEBPACK_IMPORTED_MODULE_1___default.a.defer(createMediaCommentThumbnail, this, size, keepOriginalText);\n  });\n});\n\n//# sourceURL=webpack:///./ui/shared/media-comments/jquery/mediaCommentThumbnail.js?");

/***/ }),

/***/ "ctx7":
/*!**********************************************************************!*\
  !*** ./ui/shared/enhanced-user-content/jquery/instructure_helper.js ***!
  \**********************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var browser_sniffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! browser-sniffer */ \"ik22\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var jqueryui_dialog__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jqueryui/dialog */ \"ESjL\");\n/*\n * Copyright (C) 2011 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n// create a global object \"INST\" that we will have be Instructure's namespace.\n\n\n\n\nfunction getTld(hostname) {\n  hostname = (hostname || '').split(':')[0];\n  const parts = hostname.split('.'),\n        length = parts.length;\n  return (length > 1 ? [parts[length - 2], parts[length - 1]] : parts).join('');\n}\n\nconst locationTld = getTld(window.location.hostname);\n\njquery__WEBPACK_IMPORTED_MODULE_1___default.a.expr[':'].external = function (element) {\n  const href = jquery__WEBPACK_IMPORTED_MODULE_1___default()(element).attr('href'); // if a browser doesnt support <a>.hostname then just dont mark anything as external, better to not get false positives.\n\n  return !!(href && href.length && !href.match(/^(mailto\\:|javascript\\:)/) && element.hostname && getTld(element.hostname) != locationTld);\n};\n\nwindow.equella = {\n  ready(data) {\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()(document).triggerHandler('equella_ready', data);\n  },\n\n  cancel() {\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()(document).triggerHandler('equella_cancel');\n  }\n\n};\njquery__WEBPACK_IMPORTED_MODULE_1___default()(document).bind('equella_ready', function (event, data) {\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#equella_dialog').triggerHandler('equella_ready', data);\n}).bind('equella_cancel', function () {\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#equella_dialog').dialog('close');\n});\nwindow.external_tool_dialog = {\n  ready(data) {\n    const e = jQuery.Event('selection');\n    e.contentItems = data;\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#resource_selection_dialog:visible').triggerHandler(e);\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#homework_selection_dialog:visible').triggerHandler(e);\n  },\n\n  cancel() {\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#external_tool_button_dialog').dialog('close');\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#resource_selection_dialog').dialog('close');\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#homework_selection_dialog:visible').dialog('close');\n  }\n\n};\n\nwindow.jsonFlickrApi = function (data) {\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('#instructure_image_search').triggerHandler('search_results', data);\n};\n\n//# sourceURL=webpack:///./ui/shared/enhanced-user-content/jquery/instructure_helper.js?");

/***/ }),

/***/ "dDTa":
/*!*****************************************************!*\
  !*** ./ui/shared/external-apps/iframeAllowances.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst iframeAllowances = () => {\n  const allowances = ENV.LTI_LAUNCH_FRAME_ALLOWANCES || [];\n  return allowances.join('; ');\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (iframeAllowances);\n\n//# sourceURL=webpack:///./ui/shared/external-apps/iframeAllowances.js?");

/***/ }),

/***/ "uloQ":
/*!**********************************************!*\
  !*** ./ui/shared/alerts/react/FlashAlert.js ***!
  \**********************************************/
/*! exports provided: default, showFlashAlert, destroyContainer, showFlashError, showFlashSuccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return FlashAlert; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"showFlashAlert\", function() { return showFlashAlert; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"destroyContainer\", function() { return destroyContainer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"showFlashError\", function() { return showFlashError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"showFlashSuccess\", function() { return showFlashSuccess; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ \"i8i4\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _canvas_i18n__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/i18n */ \"HGxv\");\n/* harmony import */ var _instructure_ui_alerts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @instructure/ui-alerts */ \"spba\");\n/* harmony import */ var _instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @instructure/ui-buttons */ \"K6WN\");\n/* harmony import */ var _instructure_ui_text__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @instructure/ui-text */ \"iE3e\");\n/* harmony import */ var _instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @instructure/ui-a11y-content */ \"9+/z\");\n/* harmony import */ var _instructure_ui_motion__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @instructure/ui-motion */ \"Nl9J\");\n/*\n * Copyright (C) 2017 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * Flash alerts, especially for ajax error messages\n * Typical usage:\n * import {showFlashError} from './FlashAlert'\n * ...\n * axios.put(url, data).then((response) => {\n *     // do something with response\n *   }).catch(showFlashError(your_error_message))\n *\n * showFlashError() with no argument shows a generic message\n *\n * On error, will display an inst-ui Alert at the top of the page\n * with an error message and \"Details\" button. When the user clicks\n * the button, it shows error details extracted from the axios Error\n *\n * You could also import the lower level showFlashAlert function or\n * the FlashAlert component if you need more control\n *\n * showFlashAlert({ err, message, type }, onCloseCallback)\n *  err: error object\n *  message: user-facing message\n *  type: one of ['info', 'success', 'warning', 'error']\n *        default is 'info' unless an error object is passed in, else is 'error'\n */\n\n\n\n\n\n\n\n\n\nconst I18n = Object(_canvas_i18n__WEBPACK_IMPORTED_MODULE_3__[\"useScope\"])('ajaxflashalert');\nconst messageHolderId = 'flashalert_message_holder'; // specs fail if I reuse jquery's elements\n\nconst screenreaderMessageHolderId = 'flash_screenreader_holder';\nconst timeout = 10000; // An Alert with a message and \"Details\" button which surfaces\n// more info about the error when pressed.\n// Is displayed at the top of the document, and will close itself after a while\n\nclass FlashAlert extends react__WEBPACK_IMPORTED_MODULE_0___default.a.Component {\n  constructor(props) {\n    super(props);\n\n    this.showDetails = () => {\n      this.setState({\n        showDetails: true\n      });\n      clearTimeout(this.timerId);\n      this.timerId = setTimeout(() => this.closeAlert(), this.props.timeout);\n    };\n\n    this.closeAlert = () => {\n      this.setState({\n        isOpen: false\n      }, () => {\n        setTimeout(() => {\n          clearTimeout(this.timerId);\n          this.props.onClose();\n        }, 500);\n      });\n    };\n\n    this.state = {\n      showDetails: false,\n      isOpen: true\n    };\n    this.timerId = 0;\n  }\n\n  getLiveRegion() {\n    // return element where flash screenreader messages go.\n    // create if necessary\n    let liveRegion = document.getElementById(screenreaderMessageHolderId);\n\n    if (!liveRegion) {\n      liveRegion = document.createElement('div');\n      liveRegion.id = screenreaderMessageHolderId;\n      liveRegion.setAttribute('role', 'alert');\n      document.body.appendChild(liveRegion);\n    }\n\n    return liveRegion;\n  }\n\n  findDetailMessage() {\n    const err = this.props.error;\n    let a = err.message;\n    let b;\n\n    if (err.response) {\n      if (err.response.data) {\n        try {\n          if (Array.isArray(err.response.data.errors)) {\n            // probably a canvas api\n            a = err.response.data.errors[0].message;\n            b = err.message;\n          } else if (err.response.data.message) {\n            // probably a canvas api too\n            a = err.response.data.message;\n            b = err.message;\n          }\n        } catch (ignore) {\n          a = err.message;\n        }\n      }\n    }\n\n    return {\n      a,\n      b\n    };\n  }\n\n  renderDetailMessage() {\n    const {\n      a,\n      b\n    } = this.findDetailMessage();\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_6__[\"Text\"], {\n      as: \"p\",\n      fontStyle: \"italic\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_6__[\"Text\"], null, a), b ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null) : null, b ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_6__[\"Text\"], null, b) : null);\n  }\n\n  render() {\n    let details = null;\n\n    if (this.props.error) {\n      if (this.state.showDetails) {\n        details = this.renderDetailMessage();\n      } else {\n        details = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_7__[\"PresentationContent\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_buttons__WEBPACK_IMPORTED_MODULE_5__[\"Button\"], {\n          variant: \"link\",\n          onClick: this.showDetails\n        }, I18n.t('Details'))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_7__[\"ScreenReaderContent\"], null, this.renderDetailMessage()));\n      }\n    }\n\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_motion__WEBPACK_IMPORTED_MODULE_8__[\"Transition\"], {\n      transitionOnMount: true,\n      in: this.state.isOpen,\n      type: \"fade\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_instructure_ui_alerts__WEBPACK_IMPORTED_MODULE_4__[\"Alert\"], {\n      variant: this.props.variant,\n      renderCloseButtonLabel: I18n.t('Close'),\n      onDismiss: this.closeAlert,\n      margin: \"small auto\",\n      timeout: this.props.timeout,\n      liveRegion: this.getLiveRegion,\n      transition: \"fade\",\n      screenReaderOnly: this.props.screenReaderOnly\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"p\", {\n      style: {\n        margin: '0 -5px'\n      }\n    }, this.props.message), details)));\n  }\n\n}\nFlashAlert.propTypes = {\n  onClose: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func.isRequired,\n  message: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,\n  error: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.instanceOf(Error),\n  variant: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.oneOf(['info', 'success', 'warning', 'error']),\n  timeout: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.number,\n  screenReaderOnly: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool\n};\nFlashAlert.defaultProps = {\n  error: null,\n  variant: 'info',\n  timeout,\n  screenReaderOnly: false\n};\nfunction showFlashAlert({\n  message,\n  err,\n  type = err ? 'error' : 'info',\n  srOnly = false\n}) {\n  function closeAlert(atNode) {\n    react_dom__WEBPACK_IMPORTED_MODULE_2___default.a.unmountComponentAtNode(atNode);\n    atNode.remove();\n  }\n\n  function getAlertContainer() {\n    let alertContainer = document.getElementById(messageHolderId);\n\n    if (!alertContainer) {\n      alertContainer = document.createElement('div');\n      alertContainer.classList.add('clickthrough-container');\n      alertContainer.id = messageHolderId;\n      alertContainer.setAttribute('style', 'position: fixed; top: 0; left: 0; width: 100%; z-index: 100000;');\n      document.body.appendChild(alertContainer);\n    }\n\n    return alertContainer;\n  }\n\n  function renderAlert(parent) {\n    react_dom__WEBPACK_IMPORTED_MODULE_2___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FlashAlert, {\n      message: message,\n      timeout: Number.isNaN(parseInt(ENV.flashAlertTimeout, 10)) ? timeout : ENV.flashAlertTimeout,\n      error: err,\n      variant: type,\n      onClose: closeAlert.bind(null, parent) // eslint-disable-line react/jsx-no-bind\n      ,\n      screenReaderOnly: srOnly\n    }), parent);\n  }\n\n  const div = document.createElement('div'); // div.setAttribute('class', styles.flashMessage)\n\n  div.setAttribute('style', 'max-width:50em;margin:1rem auto;');\n  div.setAttribute('class', 'flashalert-message');\n  getAlertContainer().appendChild(div);\n  renderAlert(div);\n}\nfunction destroyContainer() {\n  const container = document.getElementById(messageHolderId);\n  const liveRegion = document.getElementById(screenreaderMessageHolderId);\n  if (container) container.remove();\n  if (liveRegion) liveRegion.remove();\n}\nfunction showFlashError(message = I18n.t('An error occurred making a network request')) {\n  return err => showFlashAlert({\n    message,\n    err,\n    type: 'error'\n  });\n}\nfunction showFlashSuccess(message) {\n  return () => showFlashAlert({\n    message,\n    type: 'success'\n  });\n}\n\n//# sourceURL=webpack:///./ui/shared/alerts/react/FlashAlert.js?");

/***/ })

}]);