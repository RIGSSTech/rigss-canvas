(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[3730],{

/***/ "B9hN":
/*!****************************************************************!*\
  !*** ./ui/shared/tinymce-external-tools/TinyMCEContentItem.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"ouhR\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _canvas_lti_jquery_messages__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/lti/jquery/messages */ \"jFoo\");\n/* harmony import */ var _canvas_external_apps_iframeAllowances__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/external-apps/iframeAllowances */ \"dDTa\");\n/*\n * Copyright (C) 2015 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\nconst LTI_MIME_TYPES = ['application/vnd.ims.lti.v1.ltilink', 'application/vnd.ims.lti.v1.launch+json'];\n\nfunction exportPropsToSelf(properties, keyMethod) {\n  keyMethod = keyMethod || Object.keys;\n\n  function _propMethod(prop) {\n    return {\n      configurable: true,\n\n      get() {\n        return properties[prop];\n      }\n\n    };\n  }\n\n  let keys = keyMethod(properties),\n      keyLength = keys.length,\n      prop;\n\n  while (keyLength--) {\n    prop = keys[keyLength];\n    Object.defineProperty(this, prop, _propMethod(prop));\n  }\n}\n\nfunction ContentItem(properties) {\n  exportPropsToSelf.call(this, properties);\n}\n\nfunction linkText(tinyMCEContentItem) {\n  const editorSelection = window.tinyMCE && window.tinyMCE.activeEditor.selection;\n  const selectedText = editorSelection && editorSelection.getContent();\n  return selectedText || tinyMCEContentItem.text && tinyMCEContentItem.text.trim() || tinyMCEContentItem.title && tinyMCEContentItem.title.trim();\n}\n\nContentItem.fromJSON = function (obj) {\n  return new ContentItem(obj);\n};\n\nconst TinyMCEPayloadGenerators = {\n  iframe(tinyMCEContentItem) {\n    return jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div/>').append(jquery__WEBPACK_IMPORTED_MODULE_0___default()('<iframe/>', {\n      src: tinyMCEContentItem.url,\n      title: tinyMCEContentItem.title,\n      allowfullscreen: 'true',\n      webkitallowfullscreen: 'true',\n      mozallowfullscreen: 'true',\n      allow: Object(_canvas_external_apps_iframeAllowances__WEBPACK_IMPORTED_MODULE_2__[\"default\"])()\n    }).addClass(tinyMCEContentItem.class).css({\n      width: tinyMCEContentItem.placementAdvice.displayWidth,\n      height: tinyMCEContentItem.placementAdvice.displayHeight\n    }).attr({\n      width: tinyMCEContentItem.placementAdvice.displayWidth,\n      height: tinyMCEContentItem.placementAdvice.displayHeight\n    })).html();\n  },\n\n  embed(tinyMCEContentItem) {\n    return jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div/>').append(jquery__WEBPACK_IMPORTED_MODULE_0___default()('<img/>', {\n      src: tinyMCEContentItem.url,\n      alt: tinyMCEContentItem.text\n    }).css({\n      width: tinyMCEContentItem.placementAdvice.displayWidth,\n      height: tinyMCEContentItem.placementAdvice.displayHeight\n    })).html();\n  },\n\n  text(tinyMCEContentItem) {\n    return tinyMCEContentItem.text;\n  },\n\n  link(tinyMCEContentItem) {\n    var _window$tinyMCE$activ;\n\n    const $linkContainer = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div/>'),\n          $link = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<a/>', {\n      href: tinyMCEContentItem.url,\n      title: tinyMCEContentItem.title,\n      target: tinyMCEContentItem.linkTarget\n    });\n\n    if (tinyMCEContentItem.linkClassName) {\n      $link.addClass(tinyMCEContentItem.linkClassName);\n    }\n\n    $linkContainer.append($link);\n\n    if (tinyMCEContentItem.thumbnail) {\n      $link.append(jquery__WEBPACK_IMPORTED_MODULE_0___default()('<img />', {\n        src: tinyMCEContentItem.thumbnail['@id'],\n        height: tinyMCEContentItem.thumbnail.height || 48,\n        width: tinyMCEContentItem.thumbnail.width || 48,\n        alt: tinyMCEContentItem.text\n      }));\n    } else if ((_window$tinyMCE$activ = window.tinyMCE.activeEditor) !== null && _window$tinyMCE$activ !== void 0 && _window$tinyMCE$activ.selection.getContent()) {\n      $link[0].innerHTML = linkText(tinyMCEContentItem);\n    } else {\n      // don't inject tool provided content into the page HTML\n      $link.text(linkText(tinyMCEContentItem));\n    }\n\n    return $linkContainer.html();\n  }\n\n};\n\nfunction TinyMCEContentItem(contentItem) {\n  this.contentItem = contentItem;\n\n  const decorate = (prop, getFunc) => {\n    Object.defineProperty(this, prop, {\n      get: getFunc.bind(this)\n    });\n  };\n\n  exportPropsToSelf.call(this, contentItem, Object.getOwnPropertyNames);\n  decorate('isLTI', function () {\n    return !!~LTI_MIME_TYPES.indexOf(this.mediaType);\n  });\n  decorate('isOverriddenForThumbnail', function () {\n    return this.isLTI && this.thumbnail && this.placementAdvice.presentationDocumentTarget === 'iframe';\n  });\n  decorate('isImage', function () {\n    return this.mediaType && this.mediaType.indexOf('image') == 0;\n  });\n  decorate('linkClassName', function () {\n    return this.isOverriddenForThumbnail ? 'lti-thumbnail-launch' : '';\n  });\n  decorate('url', function () {\n    return (this.isLTI ? this.canvasURL : this.contentItem.url).replace(/^(data:text\\/html|javascript:)/, '#$1');\n  });\n  decorate('linkTarget', function () {\n    if (this.isOverriddenForThumbnail) {\n      return JSON.stringify(this.placementAdvice);\n    }\n\n    return this.placementAdvice.presentationDocumentTarget.toLowerCase() == 'window' ? '_blank' : null;\n  });\n  decorate('docTarget', function () {\n    if (this.placementAdvice.presentationDocumentTarget == 'embed' && !this.isImage) {\n      return 'text';\n    } else if (this.isOverriddenForThumbnail) {\n      return 'link';\n    }\n\n    return this.placementAdvice.presentationDocumentTarget.toLowerCase();\n  });\n  decorate('codePayload', function () {\n    switch (this.docTarget) {\n      case 'iframe':\n        return TinyMCEPayloadGenerators.iframe(this);\n\n      case 'embed':\n        return TinyMCEPayloadGenerators.embed(this);\n\n      case 'text':\n        return TinyMCEPayloadGenerators.text(this);\n\n      default:\n        return TinyMCEPayloadGenerators.link(this);\n    }\n  });\n}\n\nTinyMCEContentItem.ContentItem = ContentItem;\n\nTinyMCEContentItem.fromJSON = function (data) {\n  const contentItem = ContentItem.fromJSON(data);\n  return new TinyMCEContentItem(contentItem);\n};\n\nObject(_canvas_lti_jquery_messages__WEBPACK_IMPORTED_MODULE_1__[\"monitorLtiMessages\"])();\n/* harmony default export */ __webpack_exports__[\"default\"] = (TinyMCEContentItem);\n\n//# sourceURL=webpack:///./ui/shared/tinymce-external-tools/TinyMCEContentItem.js?");

/***/ }),

/***/ "G4i8":
/*!**************************************************************************!*\
  !*** ./ui/shared/lti/jquery/subjects lazy ^\.\/.*\.js$ namespace object ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var map = {\n\t\"./__tests__/lti.resourceImported.test.js\": [\n\t\t\"LFe7\",\n\t\t3783\n\t],\n\t\"./__tests__/lti.screenReaderAlert.test.js\": [\n\t\t\"0Guc\",\n\t\t3784\n\t],\n\t\"./__tests__/lti.showAlert.test.js\": [\n\t\t\"+y7l\",\n\t\t3785\n\t],\n\t\"./__tests__/org.imsglobal.lti.get_data.test.js\": [\n\t\t\"CXUv\",\n\t\t3769\n\t],\n\t\"./__tests__/org.imsglobal.lti.put_data.test.js\": [\n\t\t\"mElt\",\n\t\t3770\n\t],\n\t\"./__tests__/requestFullWindowLaunch.test.js\": [\n\t\t\"o6ta\",\n\t\t3786\n\t],\n\t\"./lti.enableScrollEvents.js\": [\n\t\t\"HVU3\",\n\t\t3839\n\t],\n\t\"./lti.fetchWindowSize.js\": [\n\t\t\"OANa\",\n\t\t3840\n\t],\n\t\"./lti.frameResize.js\": [\n\t\t\"bSyB\",\n\t\t3771\n\t],\n\t\"./lti.hideRightSideWrapper.js\": [\n\t\t\"ozOx\",\n\t\t3841\n\t],\n\t\"./lti.removeUnloadMessage.js\": [\n\t\t\"tjuu\",\n\t\t3787\n\t],\n\t\"./lti.resourceImported.js\": [\n\t\t\"FC2N\",\n\t\t3842\n\t],\n\t\"./lti.screenReaderAlert.js\": [\n\t\t\"YYEg\",\n\t\t3843\n\t],\n\t\"./lti.scrollToTop.js\": [\n\t\t\"W/R1\",\n\t\t3844\n\t],\n\t\"./lti.setUnloadMessage.js\": [\n\t\t\"6fDN\",\n\t\t3788\n\t],\n\t\"./lti.showAlert.js\": [\n\t\t\"onLg\",\n\t\t3845\n\t],\n\t\"./lti.showModuleNavigation.js\": [\n\t\t\"NSTA\",\n\t\t3846\n\t],\n\t\"./org.imsglobal.lti.capabilities.js\": [\n\t\t\"zPPZ\",\n\t\t3847\n\t],\n\t\"./org.imsglobal.lti.get_data.js\": [\n\t\t\"lH2A\",\n\t\t3781\n\t],\n\t\"./org.imsglobal.lti.put_data.js\": [\n\t\t\"hugc\",\n\t\t3782\n\t],\n\t\"./requestFullWindowLaunch.js\": [\n\t\t\"8IHO\",\n\t\t3848\n\t],\n\t\"./toggleCourseNavigationMenu.js\": [\n\t\t\"ECMy\",\n\t\t3849\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"G4i8\";\nmodule.exports = webpackAsyncContext;\n\n//# sourceURL=webpack:///./ui/shared/lti/jquery/subjects_lazy_^\\.\\/.*\\.js$_namespace_object?");

/***/ }),

/***/ "VCL8":
/*!****************************************************************************!*\
  !*** ./node_modules/react-lifecycles-compat/react-lifecycles-compat.es.js ***!
  \****************************************************************************/
/*! exports provided: polyfill */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"polyfill\", function() { return polyfill; });\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nfunction componentWillMount() {\n  // Call this.constructor.gDSFP to support sub-classes.\n  var state = this.constructor.getDerivedStateFromProps(this.props, this.state);\n  if (state !== null && state !== undefined) {\n    this.setState(state);\n  }\n}\n\nfunction componentWillReceiveProps(nextProps) {\n  // Call this.constructor.gDSFP to support sub-classes.\n  // Use the setState() updater to ensure state isn't stale in certain edge cases.\n  function updater(prevState) {\n    var state = this.constructor.getDerivedStateFromProps(nextProps, prevState);\n    return state !== null && state !== undefined ? state : null;\n  }\n  // Binding \"this\" is important for shallow renderer support.\n  this.setState(updater.bind(this));\n}\n\nfunction componentWillUpdate(nextProps, nextState) {\n  try {\n    var prevProps = this.props;\n    var prevState = this.state;\n    this.props = nextProps;\n    this.state = nextState;\n    this.__reactInternalSnapshotFlag = true;\n    this.__reactInternalSnapshot = this.getSnapshotBeforeUpdate(\n      prevProps,\n      prevState\n    );\n  } finally {\n    this.props = prevProps;\n    this.state = prevState;\n  }\n}\n\n// React may warn about cWM/cWRP/cWU methods being deprecated.\n// Add a flag to suppress these warnings for this special case.\ncomponentWillMount.__suppressDeprecationWarning = true;\ncomponentWillReceiveProps.__suppressDeprecationWarning = true;\ncomponentWillUpdate.__suppressDeprecationWarning = true;\n\nfunction polyfill(Component) {\n  var prototype = Component.prototype;\n\n  if (!prototype || !prototype.isReactComponent) {\n    throw new Error('Can only polyfill class components');\n  }\n\n  if (\n    typeof Component.getDerivedStateFromProps !== 'function' &&\n    typeof prototype.getSnapshotBeforeUpdate !== 'function'\n  ) {\n    return Component;\n  }\n\n  // If new component APIs are defined, \"unsafe\" lifecycles won't be called.\n  // Error if any of these lifecycles are present,\n  // Because they would work differently between older and newer (16.3+) versions of React.\n  var foundWillMountName = null;\n  var foundWillReceivePropsName = null;\n  var foundWillUpdateName = null;\n  if (typeof prototype.componentWillMount === 'function') {\n    foundWillMountName = 'componentWillMount';\n  } else if (typeof prototype.UNSAFE_componentWillMount === 'function') {\n    foundWillMountName = 'UNSAFE_componentWillMount';\n  }\n  if (typeof prototype.componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'componentWillReceiveProps';\n  } else if (typeof prototype.UNSAFE_componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'UNSAFE_componentWillReceiveProps';\n  }\n  if (typeof prototype.componentWillUpdate === 'function') {\n    foundWillUpdateName = 'componentWillUpdate';\n  } else if (typeof prototype.UNSAFE_componentWillUpdate === 'function') {\n    foundWillUpdateName = 'UNSAFE_componentWillUpdate';\n  }\n  if (\n    foundWillMountName !== null ||\n    foundWillReceivePropsName !== null ||\n    foundWillUpdateName !== null\n  ) {\n    var componentName = Component.displayName || Component.name;\n    var newApiName =\n      typeof Component.getDerivedStateFromProps === 'function'\n        ? 'getDerivedStateFromProps()'\n        : 'getSnapshotBeforeUpdate()';\n\n    throw Error(\n      'Unsafe legacy lifecycles will not be called for components using new component APIs.\\n\\n' +\n        componentName +\n        ' uses ' +\n        newApiName +\n        ' but also contains the following legacy lifecycles:' +\n        (foundWillMountName !== null ? '\\n  ' + foundWillMountName : '') +\n        (foundWillReceivePropsName !== null\n          ? '\\n  ' + foundWillReceivePropsName\n          : '') +\n        (foundWillUpdateName !== null ? '\\n  ' + foundWillUpdateName : '') +\n        '\\n\\nThe above lifecycles should be removed. Learn more about this warning here:\\n' +\n        'https://fb.me/react-async-component-lifecycle-hooks'\n    );\n  }\n\n  // React <= 16.2 does not support static getDerivedStateFromProps.\n  // As a workaround, use cWM and cWRP to invoke the new static lifecycle.\n  // Newer versions of React will ignore these lifecycles if gDSFP exists.\n  if (typeof Component.getDerivedStateFromProps === 'function') {\n    prototype.componentWillMount = componentWillMount;\n    prototype.componentWillReceiveProps = componentWillReceiveProps;\n  }\n\n  // React <= 16.2 does not support getSnapshotBeforeUpdate.\n  // As a workaround, use cWU to invoke the new lifecycle.\n  // Newer versions of React will ignore that lifecycle if gSBU exists.\n  if (typeof prototype.getSnapshotBeforeUpdate === 'function') {\n    if (typeof prototype.componentDidUpdate !== 'function') {\n      throw new Error(\n        'Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype'\n      );\n    }\n\n    prototype.componentWillUpdate = componentWillUpdate;\n\n    var componentDidUpdate = prototype.componentDidUpdate;\n\n    prototype.componentDidUpdate = function componentDidUpdatePolyfill(\n      prevProps,\n      prevState,\n      maybeSnapshot\n    ) {\n      // 16.3+ will not execute our will-update method;\n      // It will pass a snapshot value to did-update though.\n      // Older versions will require our polyfilled will-update value.\n      // We need to handle both cases, but can't just check for the presence of \"maybeSnapshot\",\n      // Because for <= 15.x versions this might be a \"prevContext\" object.\n      // We also can't just check \"__reactInternalSnapshot\",\n      // Because get-snapshot might return a falsy value.\n      // So check for the explicit __reactInternalSnapshotFlag flag to determine behavior.\n      var snapshot = this.__reactInternalSnapshotFlag\n        ? this.__reactInternalSnapshot\n        : maybeSnapshot;\n\n      componentDidUpdate.call(this, prevProps, prevState, snapshot);\n    };\n  }\n\n  return Component;\n}\n\n\n\n\n//# sourceURL=webpack:///./node_modules/react-lifecycles-compat/react-lifecycles-compat.es.js?");

/***/ }),

/***/ "XTTg":
/*!****************************************************************************************!*\
  !*** ./ui/features/assignments_show_student/react/components/AttemptType/TextEntry.js ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return TextEntry; });\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _canvas_rce_react_CanvasRce__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @canvas/rce/react/CanvasRce */ \"7NEt\");\n/* harmony import */ var _canvas_tinymce_external_tools_TinyMCEContentItem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @canvas/tinymce-external-tools/TinyMCEContentItem */ \"B9hN\");\n/* harmony import */ var _canvas_assignments_graphql_student_Submission__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/assignments/graphql/student/Submission */ \"uqZB\");\n/* harmony import */ var _canvas_util_jquery_apiUserContent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @canvas/util/jquery/apiUserContent */ \"msTH\");\n/* harmony import */ var _instructure_canvas_theme__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @instructure/canvas-theme */ \"7np9\");\n/* harmony import */ var _Context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Context */ \"N28T\");\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n // This is how long we wait to see that changes have stopped before actually\n// saving the draft\n\nconst saveDraftDelayMS = 1000;\nclass TextEntry extends react__WEBPACK_IMPORTED_MODULE_1___default.a.Component {\n  constructor(...args) {\n    super(...args);\n    this._isMounted = false;\n    this._isInitted = false;\n    this._saveDraftTimer = null;\n    this._lastSavedContent = null;\n    this._rceRef = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__[\"createRef\"])();\n\n    this.handleMessage = e => {\n      const editor = this._rceRef.current;\n\n      if (editor == null || e.data.subject !== 'A2ExternalContentReady') {\n        return;\n      }\n\n      e.data.content_items.map(contentItem => _canvas_tinymce_external_tools_TinyMCEContentItem__WEBPACK_IMPORTED_MODULE_3__[\"default\"].fromJSON(contentItem).codePayload).forEach(code => {\n        editor.insertCode(code);\n      });\n    };\n\n    this.getDraftBody = () => {\n      const {\n        submission\n      } = this.props;\n\n      if (['graded', 'submitted'].includes(submission.state)) {\n        // If this attempt has been submitted/graded, use it. (It could be null\n        // if a grade was given without a proper submission; the RCE will throw\n        // an error in that case, so default to an empty string.)\n        return submission.body || '';\n      } else if (submission.submissionDraft != null) {\n        // If a draft object exists, get the submission contents from it\n        return submission.submissionDraft.body || '';\n      } // If the submission is marked as unsubmitted and there's no draft object,\n      // the user has started a new attempt but not entered any text, so return\n      // an empty string. The body attribute may contain the contents of a\n      // previous attempt, which we don't want.\n\n\n      return '';\n    };\n\n    this.checkForChanges = newContent => {\n      // The idea here:\n      // - Every time this function is called (currently when the RCE content changes),\n      //   check whether the contents of the editor have changed, assuming we're\n      //   in a state where we care about changes.\n      // - If we see changes, call the onContentsChanged prop, and schedule a\n      //   timer to actually save the draft. Further changes to the content will\n      //   cancel/re-schedule this timer, so that we only actually save the draft\n      //   after the user has stopped making changes for some time.\n      if (!this._isInitted) {\n        return;\n      }\n\n      const {\n        submission\n      } = this.props;\n      const isNewAttempt = submission.submissionDraft == null && submission.state === 'unsubmitted'; // If read-only *or* this is a brand new attempt with no content,\n      // we don't want to save a draft, so don't bother comparing\n\n      if (isNewAttempt && newContent === '') {\n        return;\n      }\n\n      const editorContents = newContent;\n\n      if (this._lastSavedContent !== editorContents) {\n        this._lastSavedContent = editorContents;\n        this.props.onContentsChanged();\n        clearTimeout(this._saveDraftTimer);\n        this._saveDraftTimer = setTimeout(() => {\n          this.saveSubmissionDraft({\n            attempt: submission.attempt,\n            rceText: editorContents\n          });\n        }, saveDraftDelayMS);\n      }\n    };\n\n    this.handleRCEInit = tinyeditor => {\n      this._tinyeditor = tinyeditor;\n      const draftBody = this.getDraftBody();\n      tinyeditor.setContent(draftBody);\n      this._lastSavedContent = draftBody;\n\n      if (this.props.focusOnInit) {\n        this._rceRef.current.focus();\n      }\n\n      this._isInitted = true;\n    };\n\n    this.handleEditorFocus = _event => {\n      // these two lines put the caret at the end of the text when focused\n      this._tinyeditor.selection.select(this._tinyeditor.getBody(), true);\n\n      this._tinyeditor.selection.collapse(false);\n    };\n\n    this.getRCEText = () => {\n      var _this$_rceRef$current;\n\n      return (_this$_rceRef$current = this._rceRef.current) === null || _this$_rceRef$current === void 0 ? void 0 : _this$_rceRef$current.getCode();\n    };\n\n    this.saveSubmissionDraft = async ({\n      attempt,\n      rceText\n    }) => {\n      await this.props.createSubmissionDraft({\n        variables: {\n          id: this.props.submission.id,\n          activeSubmissionType: 'online_text_entry',\n          attempt: attempt || 1,\n          body: rceText\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    window.addEventListener('message', this.handleMessage);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this._tinyeditor == null) {\n      return;\n    }\n\n    if (this.props.submission.attempt !== prevProps.submission.attempt) {\n      const body = this.getDraftBody();\n\n      if (body !== this._tinyeditor.getContent()) {\n        this._tinyeditor.setContent(body);\n      }\n\n      this._lastSavedContent = body;\n\n      if (this.props.focusOnInit) {\n        this._rceRef.current.focus();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n    clearTimeout(this._saveDraftTimer);\n    window.removeEventListener('message', this.handleMessage);\n  }\n\n  renderContent() {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n      \"data-testid\": \"read-only-content\",\n      dangerouslySetInnerHTML: {\n        __html: _canvas_util_jquery_apiUserContent__WEBPACK_IMPORTED_MODULE_5__[\"default\"].convert(this.props.submission.body)\n      }\n    });\n  }\n\n  renderRCE(context) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n      \"data-testid\": \"text-editor\",\n      style: {\n        padding: `${_instructure_canvas_theme__WEBPACK_IMPORTED_MODULE_6__[\"default\"].variables.spacing.small} ${_instructure_canvas_theme__WEBPACK_IMPORTED_MODULE_6__[\"default\"].variables.spacing.xLarge}`\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_canvas_rce_react_CanvasRce__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n      ref: this._rceRef,\n      autosave: false,\n      defaultContent: this.getDraftBody(),\n      editorOptions: {\n        focus: false\n      },\n      height: 300,\n      readOnly: context.isObserver,\n      textareaId: \"textentry_text\",\n      onFocus: this.handleEditorFocus,\n      onBlur: () => {},\n      onInit: this.handleRCEInit,\n      onContentChange: content => {\n        this.checkForChanges(content);\n      }\n    }));\n  }\n\n  render() {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, this.props.readOnly ? this.renderContent() : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Context__WEBPACK_IMPORTED_MODULE_7__[\"default\"].Consumer, null, context => this.renderRCE(context)));\n  }\n\n}\nTextEntry.propTypes = {\n  createSubmissionDraft: prop_types__WEBPACK_IMPORTED_MODULE_0__[\"func\"],\n  focusOnInit: prop_types__WEBPACK_IMPORTED_MODULE_0__[\"bool\"].isRequired,\n  onContentsChanged: prop_types__WEBPACK_IMPORTED_MODULE_0__[\"func\"],\n  submission: _canvas_assignments_graphql_student_Submission__WEBPACK_IMPORTED_MODULE_4__[\"Submission\"].shape,\n  readOnly: prop_types__WEBPACK_IMPORTED_MODULE_0__[\"bool\"]\n};\n\n//# sourceURL=webpack:///./ui/features/assignments_show_student/react/components/AttemptType/TextEntry.js?");

/***/ }),

/***/ "fhP7":
/*!************************************************************!*\
  !*** ./ui/shared/rce/plugins/canvas_mentions/constants.js ***!
  \************************************************************/
/*! exports provided: TRIGGER_CHAR, MARKER_ID, MARKER_SELECTOR, MENTION_MENU_ID, MENTION_MENU_SELECTOR, TRUSTED_MESSAGE_ORIGIN, NAVIGATION_MESSAGE, INPUT_CHANGE_MESSAGE, SELECTION_MESSAGE, KEY_CODES, KEY_NAMES, ARIA_ID_TEMPLATES */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TRIGGER_CHAR\", function() { return TRIGGER_CHAR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MARKER_ID\", function() { return MARKER_ID; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MARKER_SELECTOR\", function() { return MARKER_SELECTOR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MENTION_MENU_ID\", function() { return MENTION_MENU_ID; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MENTION_MENU_SELECTOR\", function() { return MENTION_MENU_SELECTOR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TRUSTED_MESSAGE_ORIGIN\", function() { return TRUSTED_MESSAGE_ORIGIN; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NAVIGATION_MESSAGE\", function() { return NAVIGATION_MESSAGE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"INPUT_CHANGE_MESSAGE\", function() { return INPUT_CHANGE_MESSAGE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SELECTION_MESSAGE\", function() { return SELECTION_MESSAGE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"KEY_CODES\", function() { return KEY_CODES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"KEY_NAMES\", function() { return KEY_NAMES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ARIA_ID_TEMPLATES\", function() { return ARIA_ID_TEMPLATES; });\n/*\n * Copyright (C) 2021 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst TRIGGER_CHAR = '@';\nconst MARKER_ID = 'mentions-marker';\nconst MARKER_SELECTOR = `span#${MARKER_ID}`;\nconst MENTION_MENU_ID = 'mention-menu';\nconst MENTION_MENU_SELECTOR = 'span#mention-menu';\nconst TRUSTED_MESSAGE_ORIGIN = ENV.DEEP_LINKING_POST_MESSAGE_ORIGIN;\nconst NAVIGATION_MESSAGE = 'mentions.NavigationEvent';\nconst INPUT_CHANGE_MESSAGE = 'mentions.InputChangeEvent';\nconst SELECTION_MESSAGE = 'mentions.SelectionEvent';\nconst KEY_CODES = {\n  backspace: 8,\n  enter: 13,\n  up: 38,\n  down: 40,\n  escape: 27,\n  tab: 9\n};\nconst KEY_NAMES = {\n  [KEY_CODES.up]: 'UpArrow',\n  [KEY_CODES.down]: 'DownArrow',\n  [KEY_CODES.enter]: 'Enter'\n};\nconst ARIA_ID_TEMPLATES = {\n  ariaControlTemplate: instanceId => {\n    return `${instanceId}-mention-popup`;\n  },\n  activeDescendant: (instanceId, itemId) => {\n    return `${instanceId}-mention-popup-item-${itemId}`;\n  }\n};\n\n//# sourceURL=webpack:///./ui/shared/rce/plugins/canvas_mentions/constants.js?");

/***/ }),

/***/ "iO0t":
/*!***************************************************!*\
  !*** ./ui/shared/lti/jquery/response_messages.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/*\n * Copyright (C) 2021 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst GENERIC_ERROR_CODE = 'error';\nconst UNSUPPORTED_SUBJECT_ERROR_CODE = 'unsupported_subject';\nconst WRONG_ORIGIN_ERROR_CODE = 'wrong_origin';\nconst BAD_REQUEST_ERROR_CODE = 'bad_request';\n\nconst buildResponseMessages = ({\n  targetWindow,\n  origin,\n  subject,\n  message_id\n}) => {\n  const sendResponse = (contents = {}) => {\n    const message = {\n      subject: `${subject}.response`\n    };\n\n    if (message_id) {\n      message.message_id = message_id;\n    }\n\n    if (targetWindow) {\n      targetWindow.postMessage({ ...message,\n        ...contents\n      }, origin);\n    } else {\n      // eslint-disable-next-line no-console\n      console.error('Error sending response postMessage: target window does not exist');\n    }\n  };\n\n  const sendSuccess = () => {\n    sendResponse({});\n  };\n\n  const sendError = (code, message) => {\n    const error = {\n      code\n    };\n\n    if (message) {\n      error.message = message;\n    }\n\n    sendResponse({\n      error\n    });\n  };\n\n  const sendGenericError = message => {\n    sendError(GENERIC_ERROR_CODE, message);\n  };\n\n  const sendBadRequestError = message => {\n    sendError(BAD_REQUEST_ERROR_CODE, message);\n  };\n\n  const sendWrongOriginError = () => {\n    sendError(WRONG_ORIGIN_ERROR_CODE);\n  };\n\n  const sendUnsupportedSubjectError = () => {\n    sendError(UNSUPPORTED_SUBJECT_ERROR_CODE);\n  };\n\n  return {\n    sendResponse,\n    sendSuccess,\n    sendError,\n    sendGenericError,\n    sendBadRequestError,\n    sendWrongOriginError,\n    sendUnsupportedSubjectError\n  };\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (buildResponseMessages);\n\n//# sourceURL=webpack:///./ui/shared/lti/jquery/response_messages.js?");

/***/ }),

/***/ "jFoo":
/*!******************************************!*\
  !*** ./ui/shared/lti/jquery/messages.js ***!
  \******************************************/
/*! exports provided: ltiState, SUBJECT_ALLOW_LIST, SUBJECT_IGNORE_LIST, ltiMessageHandler, monitorLtiMessages */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ltiState\", function() { return ltiState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SUBJECT_ALLOW_LIST\", function() { return SUBJECT_ALLOW_LIST; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SUBJECT_IGNORE_LIST\", function() { return SUBJECT_IGNORE_LIST; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ltiMessageHandler\", function() { return ltiMessageHandler; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"monitorLtiMessages\", function() { return monitorLtiMessages; });\n/* harmony import */ var _rce_plugins_canvas_mentions_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../rce/plugins/canvas_mentions/constants */ \"fhP7\");\n/* harmony import */ var _response_messages__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./response_messages */ \"iO0t\");\n/*\n * Copyright (C) 2018 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/* eslint no-console: 0 */\n\n // page-global storage for data relevant to LTI postMessage events\n\nconst ltiState = {};\nconst SUBJECT_ALLOW_LIST = ['lti.enableScrollEvents', 'lti.fetchWindowSize', 'lti.frameResize', 'lti.hideRightSideWrapper', 'lti.removeUnloadMessage', 'lti.resourceImported', 'lti.screenReaderAlert', 'lti.scrollToTop', 'lti.setUnloadMessage', 'lti.showAlert', 'lti.showModuleNavigation', 'org.imsglobal.lti.capabilities', 'org.imsglobal.lti.get_data', 'org.imsglobal.lti.put_data', 'requestFullWindowLaunch', 'toggleCourseNavigationMenu']; // These are handled elsewhere so ignore them\n\nconst SUBJECT_IGNORE_LIST = ['A2ExternalContentReady', 'LtiDeepLinkingResponse', _rce_plugins_canvas_mentions_constants__WEBPACK_IMPORTED_MODULE_0__[\"NAVIGATION_MESSAGE\"], _rce_plugins_canvas_mentions_constants__WEBPACK_IMPORTED_MODULE_0__[\"INPUT_CHANGE_MESSAGE\"], _rce_plugins_canvas_mentions_constants__WEBPACK_IMPORTED_MODULE_0__[\"SELECTION_MESSAGE\"]];\n\nasync function ltiMessageHandler(e, platformStorageFeatureFlag = false) {\n  if (e.data.source && e.data.source.includes('react-devtools')) {\n    return false;\n  }\n\n  let message;\n\n  try {\n    message = typeof e.data === 'string' ? JSON.parse(e.data) : e.data;\n  } catch (err) {\n    // unparseable message may not be meant for our handlers\n    return false;\n  } // look at messageType for backwards compatibility\n\n\n  const subject = message.subject || message.messageType;\n  const responseMessages = Object(_response_messages__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n    targetWindow: e.source,\n    origin: e.origin,\n    subject,\n    message_id: message.message_id\n  });\n\n  if (SUBJECT_IGNORE_LIST.includes(subject)) {\n    // These messages are handled elsewhere\n    return false;\n  } else if (!SUBJECT_ALLOW_LIST.includes(subject)) {\n    // Enforce subject allowlist -- unknown type\n    if (platformStorageFeatureFlag) {\n      responseMessages.sendUnsupportedSubjectError();\n    }\n\n    return false;\n  } // temporary: ignore LTI Platform Storage messages when feature flag is off\n\n\n  if (!platformStorageFeatureFlag && subject.includes('org.imsglobal.lti')) {\n    return false;\n  }\n\n  try {\n    const handlerModule = await __webpack_require__(\"G4i8\")(`./${subject}.js`);\n    const hasSentResponse = handlerModule.default({\n      message,\n      event: e,\n      responseMessages\n    });\n\n    if (!hasSentResponse && platformStorageFeatureFlag) {\n      responseMessages.sendSuccess();\n    }\n\n    return true;\n  } catch (error) {\n    console.error(`Error loading or executing message handler for \"${subject}\": ${error}`);\n\n    if (platformStorageFeatureFlag) {\n      responseMessages.sendGenericError(error.message);\n    }\n\n    return false;\n  }\n}\n\nfunction monitorLtiMessages() {\n  var _ENV, _ENV$FEATURES;\n\n  const platformStorageFeatureFlag = (_ENV = ENV) === null || _ENV === void 0 ? void 0 : (_ENV$FEATURES = _ENV.FEATURES) === null || _ENV$FEATURES === void 0 ? void 0 : _ENV$FEATURES.lti_platform_storage;\n  window.addEventListener('message', e => {\n    if (e.data !== '') ltiMessageHandler(e, platformStorageFeatureFlag);\n  });\n}\n\n\n\n//# sourceURL=webpack:///./ui/shared/lti/jquery/messages.js?");

/***/ }),

/***/ "wx14":
/*!************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/extends.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return _extends; });\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\n//# sourceURL=webpack:///./node_modules/@babel/runtime/helpers/esm/extends.js?");

/***/ })

}]);