(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[3753],{

/***/ "DWas":
/*!***********************************************!*\
  !*** ./ui/shared/use-immediate-hook/index.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return useImmediate; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"LvDl\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var shallow_equal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shallow-equal */ \"bHqI\");\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n// This hook is much like useEffect, except it doesn't wait for the DOM to\n// render and runs the function immediately. It also takes an additional options\n// parameter where you can specify {deep: true} to make it run a deep comparison\n// on the dependencies instead of the default shallow comparison.\n//\n// This is useful for starting asynchronous operations that don't depend on the\n// new DOM, such as api fetches. Because it runs immediately, it may also reduce\n// flicker in the browser by avoiding multiple DOM updates.\n\n\n\n\nfunction depsHaveChanged(priorDeps, newDeps, opts) {\n  return !opts.deep && !Object(shallow_equal__WEBPACK_IMPORTED_MODULE_2__[\"shallowEqualArrays\"])(priorDeps, newDeps) || opts.deep && !Object(lodash__WEBPACK_IMPORTED_MODULE_1__[\"isEqual\"])(priorDeps, newDeps);\n}\n\nfunction useImmediate(fn, newDeps, opts = {}) {\n  const priorDeps = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  const cleanupFn = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null); // schedule the final cleanup for when the component unmounts\n\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => () => {\n    if (cleanupFn.current) cleanupFn.current();\n  }, []); // Like useEffect, we want to run the fn and its cleanup every time if deps are not specified\n\n  const depsChanged = !newDeps || depsHaveChanged(priorDeps.current, newDeps, opts);\n\n  if (depsChanged) {\n    if (cleanupFn.current) cleanupFn.current();\n    cleanupFn.current = fn();\n    priorDeps.current = newDeps;\n  }\n}\n\n//# sourceURL=webpack:///./ui/shared/use-immediate-hook/index.js?");

/***/ }),

/***/ "UZSf":
/*!**********************************************************************!*\
  !*** ./ui/shared/direct-sharing/react/proptypes/contentSelection.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__);\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst CONTENT_SELECTION_TYPES = ['folders', 'files', 'attachments', 'quizzes', 'assignments', 'announcements', 'calendar_events', 'discussion_topics', 'modules', 'module_items', 'pages', 'rubrics']; // build the shape {folders: arrayOf(...), files: arrayOf(...), ...}\n\nconst contentSelectionShape = Object(prop_types__WEBPACK_IMPORTED_MODULE_0__[\"exact\"])(CONTENT_SELECTION_TYPES.reduce((selections, type) => {\n  selections[type] = Object(prop_types__WEBPACK_IMPORTED_MODULE_0__[\"arrayOf\"])(Object(prop_types__WEBPACK_IMPORTED_MODULE_0__[\"oneOfType\"])([prop_types__WEBPACK_IMPORTED_MODULE_0__[\"string\"], prop_types__WEBPACK_IMPORTED_MODULE_0__[\"number\"]]));\n  return selections;\n}, {}));\n/* harmony default export */ __webpack_exports__[\"default\"] = (contentSelectionShape);\n\n//# sourceURL=webpack:///./ui/shared/direct-sharing/react/proptypes/contentSelection.js?");

/***/ }),

/***/ "bHqI":
/*!******************************************************!*\
  !*** ./node_modules/shallow-equal/dist/index.esm.js ***!
  \******************************************************/
/*! exports provided: shallowEqualArrays, shallowEqualObjects */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shallowEqualArrays\", function() { return shallowEqualArrays; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shallowEqualObjects\", function() { return shallowEqualObjects; });\nfunction shallowEqualObjects(objA, objB) {\n  if (objA === objB) {\n    return true;\n  }\n\n  if (!objA || !objB) {\n    return false;\n  }\n\n  var aKeys = Object.keys(objA);\n  var bKeys = Object.keys(objB);\n  var len = aKeys.length;\n\n  if (bKeys.length !== len) {\n    return false;\n  }\n\n  for (var i = 0; i < len; i++) {\n    var key = aKeys[i];\n\n    if (objA[key] !== objB[key] || !Object.prototype.hasOwnProperty.call(objB, key)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction shallowEqualArrays(arrA, arrB) {\n  if (arrA === arrB) {\n    return true;\n  }\n\n  if (!arrA || !arrB) {\n    return false;\n  }\n\n  var len = arrA.length;\n\n  if (arrB.length !== len) {\n    return false;\n  }\n\n  for (var i = 0; i < len; i++) {\n    if (arrA[i] !== arrB[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n\n\n\n//# sourceURL=webpack:///./node_modules/shallow-equal/dist/index.esm.js?");

/***/ }),

/***/ "dpkT":
/*!*****************************************************************************!*\
  !*** ./ui/shared/direct-sharing/react/components/DirectShareCoursePanel.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return DirectShareCoursePanel; });\n/* harmony import */ var _canvas_i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n */ \"HGxv\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _instructure_ui_alerts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @instructure/ui-alerts */ \"spba\");\n/* harmony import */ var _canvas_do_fetch_api_effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @canvas/do-fetch-api-effect */ \"Ipg6\");\n/* harmony import */ var _proptypes_contentSelection__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../proptypes/contentSelection */ \"UZSf\");\n/* harmony import */ var _ConfirmActionButtonBar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ConfirmActionButtonBar */ \"2UvW\");\n/* harmony import */ var _CourseAndModulePicker__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./CourseAndModulePicker */ \"ocMh\");\n/* harmony import */ var _DirectShareOperationStatus__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./DirectShareOperationStatus */ \"6Unn\");\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\nconst I18n = Object(_canvas_i18n__WEBPACK_IMPORTED_MODULE_0__[\"useScope\"])('direct_share_course_panel'); // eventually this will have options for where to place the item in the new course.\n// for now, it just has the selector plus some buttons\n\nDirectShareCoursePanel.propTypes = {\n  sourceCourseId: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"string\"],\n  contentSelection: _proptypes_contentSelection__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n  onCancel: prop_types__WEBPACK_IMPORTED_MODULE_2__[\"func\"]\n};\nfunction DirectShareCoursePanel({\n  sourceCourseId,\n  contentSelection,\n  onCancel\n}) {\n  const [selectedCourse, setSelectedCourse] = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(null);\n  const [startCopyOperationPromise, setStartCopyOperationPromise] = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(null);\n  const [selectedModule, setSelectedModule] = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(null);\n  const [selectedPosition, setSelectedPosition] = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(null);\n\n  function startCopyOperation() {\n    setStartCopyOperationPromise(Object(_canvas_do_fetch_api_effect__WEBPACK_IMPORTED_MODULE_4__[\"default\"])({\n      method: 'POST',\n      path: `/api/v1/courses/${selectedCourse.id}/content_migrations`,\n      body: {\n        migration_type: 'course_copy_importer',\n        select: contentSelection,\n        settings: {\n          source_course_id: sourceCourseId,\n          insert_into_module_id: (selectedModule === null || selectedModule === void 0 ? void 0 : selectedModule.id) || null,\n          insert_into_module_type: contentSelection ? Object.keys(contentSelection)[0] : null,\n          insert_into_module_position: selectedPosition\n        }\n      }\n    }));\n  }\n\n  function handleSelectedCourse(course) {\n    setSelectedModule(null);\n    setSelectedCourse(course);\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_DirectShareOperationStatus__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n    promise: startCopyOperationPromise,\n    startingMsg: I18n.t('Starting copy operation'),\n    successMsg: I18n.t('Copy operation started successfully'),\n    errorMsg: I18n.t('There was a problem starting the copy operation')\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_CourseAndModulePicker__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n    selectedCourseId: selectedCourse === null || selectedCourse === void 0 ? void 0 : selectedCourse.id,\n    setSelectedCourse: handleSelectedCourse,\n    selectedModuleId: (selectedModule === null || selectedModule === void 0 ? void 0 : selectedModule.id) || null,\n    setSelectedModule: setSelectedModule,\n    setModuleItemPosition: setSelectedPosition,\n    disableModuleInsertion: contentSelection && 'modules' in contentSelection,\n    moduleFilteringOpts: {\n      per_page: 50\n    },\n    courseFilteringOpts: {\n      enforce_manage_grant_requirement: true\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_instructure_ui_alerts__WEBPACK_IMPORTED_MODULE_3__[\"Alert\"], {\n    variant: \"warning\",\n    hasShadow: false\n  }, I18n.t('Importing the same course content more than once will overwrite any existing content in the course.')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ConfirmActionButtonBar__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n    padding: \"small 0 0 0\",\n    primaryLabel: startCopyOperationPromise ? null : I18n.t('Copy'),\n    primaryDisabled: selectedCourse === null,\n    secondaryLabel: startCopyOperationPromise ? I18n.t('Close') : I18n.t('Cancel'),\n    onPrimaryClick: startCopyOperation,\n    onSecondaryClick: onCancel\n  }));\n}\n\n//# sourceURL=webpack:///./ui/shared/direct-sharing/react/components/DirectShareCoursePanel.js?");

/***/ }),

/***/ "yoUd":
/*!***********************************************!*\
  !*** ./ui/shared/use-fetch-api-hook/index.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return useFetchApi; });\n/* harmony import */ var _canvas_use_immediate_hook__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/use-immediate-hook */ \"DWas\");\n/* harmony import */ var _canvas_do_fetch_api_effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/do-fetch-api-effect */ \"Ipg6\");\n/*\n * Copyright (C) 2019 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n // utility for making it easy to abort the fetch\n\nfunction abortable({\n  success,\n  error,\n  loading,\n  meta\n}) {\n  const aborter = new AbortController();\n  let active = true;\n  return {\n    activeSuccess: (...p) => {\n      if (active && success) success(...p);\n    },\n    activeError: (...p) => {\n      if (active && error) error(...p);\n    },\n    activeLoading: (...p) => {\n      if (active && loading) loading(...p);\n    },\n    activeMeta: (...p) => {\n      if (active && meta) meta(...p);\n    },\n    abort: () => {\n      active = false;\n      aborter.abort();\n    },\n    signal: aborter.signal\n  };\n} // NOTE: if identity of any of the output functions changes, the prior fetch will be aborted and a\n// new fetch will start, just as if you had changed an input parameter. This will result in a react\n// error: \"too many rerenders\". An common example of this problem is this:\n//\n// useFetchApi({path: '/api/v1/foo', success: json => setSomeState(mungeApi(json))})\n//\n// The success function is recreated every time this is called, so it has a new identity. Instead of\n// doing this, you could use the convert parameter:\n//\n// useFetchApi({path: '/api/v1/foo', success: setSomeState, convert: mungeApi})\n//\n// If that doesn't suit your use case, another approach would be the useCallback hook to preserve\n// the identity of your callbacks.\n//\n// You can optionally pass an array of additional dependencies as a second argument. If any of\n// these change, the fetch will be repeated.\n\n\nfunction useFetchApi({\n  // data output callbacks\n  success,\n  // (parsed json object of the response body) => {}\n  error,\n  // (Error object from doFetchApi) => {}\n  loading,\n  // (boolean that specifies whether a fetch is in progress) => {}\n  meta,\n  // other information about the fetch: ({link, response}) => {}. called only when success is called.\n  // inputs\n  path,\n  // the url to fetch; often a relative path\n  convert,\n  // allows you to convert the json response data into another format before calling success\n  forceResult,\n  // specify this to bypass the fetch and report this to success instead. meta is not called.\n  params = {},\n  // url parameters\n  headers = {},\n  // additional request headers\n  // Setting fetchAllPages makes useFetchApi continually fetch pages while the Link header indicates\n  // there is a next page. The success callback will be invoked for each page with a flattened array\n  // of the results accumulated thus far. The meta callback will also be called once for each page.\n  // If an error occurs on any page, the error callback will be called and pagination will stop. The\n  // loading callback will only be called with false when pagination ends. If any of the parameters\n  // change, the pagination starts over. Overrides fetchNumPages.\n  fetchAllPages = false,\n  // Setting fetchNumPages makes useFetchApi continually fetch the next page while the Link header\n  // supplies the next page or until the provided limit is reached. The same implications listed in\n  // comments for fetchAllPages option apply. Overridden by fetchAllPages, if that param is true.\n  fetchNumPages = 0,\n  fetchOpts = {} // other options to pass to fetch\n\n}, additionalDependencies = []) {\n  // useImmediate for deep comparisons and may help avoid browser flickering\n  Object(_canvas_use_immediate_hook__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(() => {\n    if (typeof forceResult !== 'undefined') {\n      success(forceResult);\n      return;\n    } // prevent sending results and errors from stale queries\n\n\n    const {\n      activeSuccess,\n      activeError,\n      activeLoading,\n      activeMeta,\n      abort,\n      signal\n    } = abortable({\n      success,\n      error,\n      loading,\n      meta\n    });\n\n    async function fetchLoop() {\n      try {\n        activeLoading(true);\n        let nextPage = false;\n        let accummulatedResults = [];\n        let pagesRemaining = fetchNumPages;\n\n        do {\n          const paramsWithPage = { ...params\n          };\n          if (nextPage) paramsWithPage.page = nextPage; // we don't want to flood the server with parallel requests, and we need to wait for the\n          // \"next\" link header before we know what the next page url is, so we actually want to\n          // await in the loop.\n          // eslint-disable-next-line no-await-in-loop\n\n          const {\n            json,\n            response,\n            link\n          } = await Object(_canvas_do_fetch_api_effect__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            path,\n            headers,\n            params: paramsWithPage,\n            fetchOpts: {\n              signal,\n              ...fetchOpts\n            }\n          });\n          const result = convert && json ? convert(json) : json;\n          accummulatedResults = accummulatedResults.concat(result);\n          activeMeta({\n            response,\n            link\n          });\n\n          if (fetchAllPages || pagesRemaining) {\n            var _link$next;\n\n            activeSuccess(accummulatedResults);\n            nextPage = fetchAllPages || --pagesRemaining ? link === null || link === void 0 ? void 0 : (_link$next = link.next) === null || _link$next === void 0 ? void 0 : _link$next.page : false;\n          } else {\n            activeSuccess(result);\n          }\n        } while (nextPage);\n      } catch (err) {\n        activeError(err);\n      } finally {\n        activeLoading(false);\n      }\n    }\n\n    fetchLoop();\n    return abort;\n  }, [...additionalDependencies, success, error, loading, meta, path, convert, forceResult, params, headers, fetchAllPages, fetchNumPages, fetchOpts], {\n    deep: true\n  });\n}\n\n//# sourceURL=webpack:///./ui/shared/use-fetch-api-hook/index.js?");

/***/ })

}]);