(window["canvasWebpackJsonp"] = window["canvasWebpackJsonp"] || []).push([[3830],{

/***/ "opr0":
/*!***********************************************************************************!*\
  !*** ./ui/features/course_settings/react/components/CourseAvailabilityOptions.js ***!
  \***********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CourseAvailabilityOptions; });\n/* harmony import */ var _canvas_i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @canvas/i18n */ \"HGxv\");\n/* harmony import */ var _canvas_timezone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @canvas/timezone */ \"3H9/\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ \"wd/R\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! prop-types */ \"17x9\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _instructure_ui_simple_select__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @instructure/ui-simple-select */ \"fw+x\");\n/* harmony import */ var _instructure_ui_text__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @instructure/ui-text */ \"iE3e\");\n/* harmony import */ var _instructure_ui_form_field__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @instructure/ui-form-field */ \"sTNg\");\n/* harmony import */ var _instructure_ui_checkbox__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @instructure/ui-checkbox */ \"Kdwl\");\n/* harmony import */ var _canvas_datetime_react_components_DateInput__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @canvas/datetime/react/components/DateInput */ \"4P7D\");\n/* harmony import */ var _instructure_ui_flex__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @instructure/ui-flex */ \"N46v\");\n/* harmony import */ var _instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @instructure/ui-a11y-content */ \"9+/z\");\n/* harmony import */ var _instructure_ui_icons__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @instructure/ui-icons */ \"oMAr\");\n/* harmony import */ var _canvas_datetime_changeTimezone__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @canvas/datetime/changeTimezone */ \"AMou\");\n/* harmony import */ var _instructure_ui_view__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @instructure/ui-view */ \"OkHH\");\n/*\n * Copyright (C) 2021 - present Instructure, Inc.\n *\n * This file is part of Canvas.\n *\n * Canvas is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, version 3 of the License.\n *\n * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY\n * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more\n * details.\n *\n * You should have received a copy of the GNU Affero General Public License along\n * with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst I18n = Object(_canvas_i18n__WEBPACK_IMPORTED_MODULE_0__[\"useScope\"])('CourseAvailabilityOptions');\nfunction CourseAvailabilityOptions({\n  canManage,\n  viewPastLocked,\n  viewFutureLocked\n}) {\n  var _window$ENV$STUDENTS_, _window$ENV$DEFAULT_T, _window$ENV$STUDENTS_2, _window$ENV$DEFAULT_T2;\n\n  const FORM_IDS = {\n    RESTRICT_ENROLLMENTS: 'course_restrict_enrollments_to_course_dates',\n    START_DATE: 'course_start_at',\n    END_DATE: 'course_conclude_at',\n    RESTRICT_FUTURE: 'course_restrict_student_future_view',\n    RESTRICT_PAST: 'course_restrict_student_past_view'\n  };\n  const TERM_DATES = {\n    START_DATE: ((_window$ENV$STUDENTS_ = window.ENV.STUDENTS_ENROLLMENT_DATES) === null || _window$ENV$STUDENTS_ === void 0 ? void 0 : _window$ENV$STUDENTS_.start_at) || ((_window$ENV$DEFAULT_T = window.ENV.DEFAULT_TERM_DATES) === null || _window$ENV$DEFAULT_T === void 0 ? void 0 : _window$ENV$DEFAULT_T.start_at),\n    END_DATE: ((_window$ENV$STUDENTS_2 = window.ENV.STUDENTS_ENROLLMENT_DATES) === null || _window$ENV$STUDENTS_2 === void 0 ? void 0 : _window$ENV$STUDENTS_2.end_at) || ((_window$ENV$DEFAULT_T2 = window.ENV.DEFAULT_TERM_DATES) === null || _window$ENV$DEFAULT_T2 === void 0 ? void 0 : _window$ENV$DEFAULT_T2.end_at)\n  };\n\n  const setFormValue = (id, value) => {\n    const field = document.getElementById(id);\n    field.value = value;\n  };\n\n  const getFormValue = id => document.getElementById(id).value;\n\n  const [selectedApplicabilityValue, setSelectedApplicabilityValue] = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(getFormValue(FORM_IDS.RESTRICT_ENROLLMENTS) === 'true' ? 'course' : 'term');\n  const [startDate, setStartDate] = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(moment__WEBPACK_IMPORTED_MODULE_2___default()(getFormValue(FORM_IDS.START_DATE)).toISOString());\n  const [endDate, setEndDate] = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(moment__WEBPACK_IMPORTED_MODULE_2___default()(getFormValue(FORM_IDS.END_DATE)).toISOString());\n  const [restrictBefore, setRestrictBefore] = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(getFormValue(FORM_IDS.RESTRICT_FUTURE) === 'true');\n  const [restrictAfter, setRestrictAfter] = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(getFormValue(FORM_IDS.RESTRICT_PAST) === 'true');\n  const startDateInputValue = selectedApplicabilityValue === 'course' ? startDate : TERM_DATES.START_DATE;\n  const endDateInputValue = selectedApplicabilityValue === 'course' ? endDate : TERM_DATES.END_DATE;\n\n  const datesInteraction = () => canManage && selectedApplicabilityValue === 'course' ? 'enabled' : 'disabled';\n\n  const formatDate = date => _canvas_timezone__WEBPACK_IMPORTED_MODULE_1__[\"default\"].format(date, 'date.formats.full');\n\n  const parseDate = (date, tz) => {\n    const dateObj = new Date(date);\n    const parsedDate = Object(_canvas_datetime_changeTimezone__WEBPACK_IMPORTED_MODULE_13__[\"changeTimezone\"])(dateObj, {\n      originTZ: tz,\n      desiredTZ: ENV.TIMEZONE\n    });\n    return formatDate(parsedDate);\n  };\n\n  const participationExplanationText = () => {\n    return selectedApplicabilityValue === 'term' ? I18n.t('Course participation is limited to *term* start and end dates.', {\n      wrappers: [`<strong>$1</strong>`]\n    }) : I18n.t('Course participation is limited to *course* start and end dates. Any section dates created in the course may override course dates.', {\n      wrappers: [`<strong>$1</strong>`]\n    });\n  };\n\n  const clearCourseDates = () => {\n    setFormValue(FORM_IDS.START_DATE, null);\n    setStartDate(null);\n    setFormValue(FORM_IDS.END_DATE, null);\n    setEndDate(null);\n  };\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", {\n    className: \"CourseAvailabilityOptions\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_form_field__WEBPACK_IMPORTED_MODULE_7__[\"FormFieldGroup\"], {\n    description: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_11__[\"ScreenReaderContent\"], null, I18n.t('Course Participation and Access Settings')),\n    rowSpacing: \"small\",\n    layout: \"inline\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_simple_select__WEBPACK_IMPORTED_MODULE_5__[\"SimpleSelect\"], {\n    renderLabel: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_11__[\"ScreenReaderContent\"], null, I18n.t('Limit course participation to term or custom course dates?')),\n    interaction: canManage ? 'enabled' : 'disabled',\n    isInline: true,\n    width: \"350px\",\n    value: selectedApplicabilityValue,\n    onChange: (e, {\n      value\n    }) => {\n      if (value !== 'course') {\n        // Discard course dates, if they are removed from the Date inputs when Participation is different to course,\n        // in order to avoid saving these changes if they are not on the screen at the moment of submitting the form\n        clearCourseDates();\n      }\n\n      setFormValue(FORM_IDS.RESTRICT_ENROLLMENTS, value === 'course');\n      setSelectedApplicabilityValue(value);\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_simple_select__WEBPACK_IMPORTED_MODULE_5__[\"SimpleSelect\"].Option, {\n    id: \"term\",\n    value: \"term\"\n  }, I18n.t('Term')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_simple_select__WEBPACK_IMPORTED_MODULE_5__[\"SimpleSelect\"].Option, {\n    id: \"course\",\n    value: \"course\"\n  }, I18n.t('Course'))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_6__[\"Text\"], {\n    size: \"small\",\n    weight: \"light\",\n    dangerouslySetInnerHTML: {\n      __html: participationExplanationText()\n    }\n  }), ENV.COURSE_PACES_ENABLED && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_6__[\"Text\"], {\n    size: \"small\",\n    weight: \"light\"\n  }, I18n.t('Changing the course participation will republish all course pacing with any new dates.')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_10__[\"Flex\"], {\n    direction: \"column\",\n    display: \"inline-flex\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_10__[\"Flex\"].Item, {\n    padding: \"xx-small\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_11__[\"ScreenReaderContent\"], null, I18n.t('Course Start Date')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_canvas_datetime_react_components_DateInput__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n    renderLabel: I18n.t('Start'),\n    formatDate: formatDate,\n    interaction: datesInteraction(),\n    width: \"16rem\",\n    selectedDate: startDateInputValue,\n    onSelectedDateChange: value => {\n      const start = moment__WEBPACK_IMPORTED_MODULE_2___default()(value).toISOString();\n      setFormValue(FORM_IDS.START_DATE, start);\n      setStartDate(start);\n    }\n  }), startDateInputValue && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_view__WEBPACK_IMPORTED_MODULE_14__[\"View\"], {\n    as: \"div\",\n    margin: \"x-small none xx-small small\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_6__[\"Text\"], {\n    size: \"x-small\",\n    weight: \"light\"\n  }, `${I18n.t('Local')}: ${parseDate(startDateInputValue, ENV.TIMEZONE)}`)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_view__WEBPACK_IMPORTED_MODULE_14__[\"View\"], {\n    as: \"div\",\n    margin: \"none none none small\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_6__[\"Text\"], {\n    size: \"x-small\",\n    weight: \"light\"\n  }, `${I18n.t('Course')}: ${parseDate(startDateInputValue, ENV.CONTEXT_TIMEZONE)}`)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_10__[\"Flex\"].Item, {\n    padding: \"xx-small\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_11__[\"ScreenReaderContent\"], null, I18n.t('Course End Date')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_canvas_datetime_react_components_DateInput__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n    renderLabel: I18n.t('End'),\n    formatDate: formatDate,\n    interaction: datesInteraction(),\n    width: \"16rem\",\n    selectedDate: endDateInputValue,\n    onSelectedDateChange: value => {\n      const end = moment__WEBPACK_IMPORTED_MODULE_2___default()(value).toISOString();\n      setFormValue(FORM_IDS.END_DATE, end);\n      setEndDate(end);\n    }\n  }), endDateInputValue && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_view__WEBPACK_IMPORTED_MODULE_14__[\"View\"], {\n    as: \"div\",\n    margin: \"x-small none xx-small small\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_6__[\"Text\"], {\n    size: \"x-small\",\n    weight: \"light\"\n  }, `${I18n.t('Local')}: ${parseDate(endDateInputValue, ENV.TIMEZONE)}`)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_view__WEBPACK_IMPORTED_MODULE_14__[\"View\"], {\n    as: \"div\",\n    margin: \"none none xx-small small\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_6__[\"Text\"], {\n    size: \"x-small\",\n    weight: \"light\"\n  }, `${I18n.t('Course')}: ${parseDate(endDateInputValue, ENV.CONTEXT_TIMEZONE)}`))))), _canvas_timezone__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isMidnight(endDate) && selectedApplicabilityValue === 'course' && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_10__[\"Flex\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_10__[\"Flex\"].Item, {\n    margin: \"xx-small small xx-small 0\",\n    align: \"start\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_a11y_content__WEBPACK_IMPORTED_MODULE_11__[\"AccessibleContent\"], {\n    alt: I18n.t('Warning')\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_icons__WEBPACK_IMPORTED_MODULE_12__[\"IconWarningSolid\"], {\n    size: \"x-small\",\n    color: \"warning\"\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_flex__WEBPACK_IMPORTED_MODULE_10__[\"Flex\"].Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_text__WEBPACK_IMPORTED_MODULE_6__[\"Text\"], {\n    size: \"small\"\n  }, I18n.t('Course participation is set to expire at midnight, so the previous day is the last day this course will be active.'))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_checkbox__WEBPACK_IMPORTED_MODULE_8__[\"Checkbox\"], {\n    label: selectedApplicabilityValue === 'term' ? I18n.t('Restrict students from viewing course before term start date') : I18n.t('Restrict students from viewing course before course start date'),\n    size: \"small\",\n    disabled: !canManage || viewFutureLocked,\n    checked: restrictBefore,\n    onChange: e => {\n      setFormValue(FORM_IDS.RESTRICT_FUTURE, e.target.checked);\n      setRestrictBefore(e.target.checked);\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_instructure_ui_checkbox__WEBPACK_IMPORTED_MODULE_8__[\"Checkbox\"], {\n    label: selectedApplicabilityValue === 'term' ? I18n.t('Restrict students from viewing course after term end date') : I18n.t('Restrict students from viewing course after course end date'),\n    size: \"small\",\n    disabled: !canManage || viewPastLocked,\n    checked: restrictAfter,\n    onChange: e => {\n      setFormValue(FORM_IDS.RESTRICT_PAST, e.target.checked);\n      setRestrictAfter(e.target.checked);\n    }\n  })));\n}\nCourseAvailabilityOptions.propTypes = {\n  canManage: prop_types__WEBPACK_IMPORTED_MODULE_4__[\"bool\"].isRequired,\n  viewPastLocked: prop_types__WEBPACK_IMPORTED_MODULE_4__[\"bool\"].isRequired,\n  viewFutureLocked: prop_types__WEBPACK_IMPORTED_MODULE_4__[\"bool\"].isRequired\n};\n\n//# sourceURL=webpack:///./ui/features/course_settings/react/components/CourseAvailabilityOptions.js?");

/***/ })

}]);